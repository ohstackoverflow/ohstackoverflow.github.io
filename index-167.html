<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 167) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-167.html">
<link rel="prev" href="index-168.html" type="text/html">
<link rel="next" href="index-166.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-randomize-shuffle-a-javascript-array/" class="u-url">How to randomize (shuffle) a JavaScript array?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-randomize-shuffle-a-javascript-array/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:38:22+08:00" itemprop="datePublished" title="2023-02-16 23:38">2023-02-16 23:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have an array like this:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">arr1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"a"</span><span class="p">,</span><span class="w"> </span><span class="s2">"b"</span><span class="p">,</span><span class="w"> </span><span class="s2">"c"</span><span class="p">,</span><span class="w"> </span><span class="s2">"d"</span><span class="p">];</span>
</pre></div>

<p>How can I randomize / shuffle it?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The de-facto unbiased shuffle algorithm is the Fisher-Yates (aka Knuth)
Shuffle.</p>
<p>You can see a great visualization here (and the original post linked to this)</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">shuffle</span><span class="p">(</span><span class="k">array</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">let</span><span class="w"> </span><span class="n">currentIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">array</span><span class="p">.</span><span class="n">length</span><span class="p">,</span><span class="w">  </span><span class="n">randomIndex</span><span class="p">;</span>

<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="k">While</span><span class="w"> </span><span class="n">there</span><span class="w"> </span><span class="n">remain</span><span class="w"> </span><span class="n">elements</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">shuffle</span><span class="p">.</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">currentIndex</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">Pick</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">remaining</span><span class="w"> </span><span class="k">element</span><span class="p">.</span>
<span class="w">    </span><span class="n">randomIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="n">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">currentIndex</span><span class="p">);</span>
<span class="w">    </span><span class="n">currentIndex</span><span class="o">--</span><span class="p">;</span>

<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="ow">And</span><span class="w"> </span><span class="n">swap</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="k">element</span><span class="p">.</span>
<span class="w">    </span><span class="o">[</span><span class="n">array[currentIndex</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">randomIndex</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
<span class="n">      array[randomIndex</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">currentIndex</span><span class="o">]</span><span class="err">]</span><span class="p">;</span>
<span class="w">  </span><span class="err">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">array</span><span class="p">;</span>
<span class="err">}</span>

<span class="o">//</span><span class="w"> </span><span class="n">Used</span><span class="w"> </span><span class="ow">like</span><span class="w"> </span><span class="n">so</span>
<span class="nf">var</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">2, 11, 37, 42</span><span class="o">]</span><span class="p">;</span>
<span class="n">shuffle</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">arr</span><span class="p">);</span>
</pre></div>

<p>Some more info about the algorithm used.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Here's a JavaScript implementation of the Durstenfeld shuffle, an optimized
version of Fisher-Yates:</p>
<div class="code"><pre class="code literal-block"><span class="cm">/* Randomize array in-place using Durstenfeld shuffle algorithm */</span>
<span class="k">function</span><span class="w"> </span><span class="n">shuffleArray</span><span class="p">(</span><span class="k">array</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">array</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="n">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<span class="w">        </span><span class="nf">var</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="k">array</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">j</span><span class="o">]</span><span class="p">;</span>
<span class="w">        </span><span class="k">array</span><span class="o">[</span><span class="n">j</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>

<p>It picks a random element for each original array element, and excludes it
from the next draw, like picking randomly from a deck of cards.</p>
<p>This clever exclusion swaps the picked element with the current one, then
picks the next random element from the remainder, looping backwards for
optimal efficiency, ensuring the random pick is simplified (it can always
start at 0), and thereby skipping the final element.</p>
<p>Algorithm runtime is <code>O(n)</code>. <strong>Note</strong> that the shuffle is done in-place so if
you don't want to modify the original array, first make a copy of it with
<code>.slice(0)</code>.</p>
<hr>
<h3>
<em>EDIT:</em> Updating to ES6 / ECMAScript 2015</h3>
<p>The new ES6 allows us to assign two variables at once. This is especially
handy when we want to swap the values of two variables, as we can do it in one
line of code. Here is a shorter form of the same function, using this feature.</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">shuffleArray</span><span class="p">(</span><span class="k">array</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">let</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">array</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">const</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="n">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<span class="w">        </span><span class="o">[</span><span class="n">array[i</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">j</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">array[j</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="k">array</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="err">]</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-split-a-string-in-java/" class="u-url">How do I split a string in Java?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-split-a-string-in-java/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:37:18+08:00" itemprop="datePublished" title="2023-02-16 23:37">2023-02-16 23:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to split the string <code>"004-034556"</code> into two strings by the delimiter
<code>"-"</code>:</p>
<div class="code"><pre class="code literal-block">part1 = "004";
part2 = "034556";
</pre></div>

<p>That means the first string will contain the characters before <code>'-'</code>, and the
second string will contain the characters after <code>'-'</code>.</p>
<p>I also want to check if the string has <code>'-'</code> in it.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Use the appropriately named method <code>String#split()</code>.</p>
<div class="code"><pre class="code literal-block">String string = "004-034556";
String[] parts = string.split("-");
String part1 = parts[0]; // 004
String part2 = parts[1]; // 034556
</pre></div>

<p>Note that <code>split</code>'s argument is assumed to be a regular expression, so
remember to escape special characters if necessary.</p>
<blockquote>
<p>there are 12 characters with special meanings: the backslash <code>\</code>, the caret
<code>^</code>, the dollar sign <code>$</code>, the period or dot <code>.</code>, the vertical bar or pipe
symbol <code>|</code>, the question mark <code>?</code>, the asterisk or star <code>*</code>, the plus sign
<code>+</code>, the opening parenthesis <code>(</code>, the closing parenthesis <code>)</code>, and the
opening square bracket <code>[</code>, the opening curly brace <code>{</code>, These special
characters are often called "metacharacters".</p>
</blockquote>
<p>For instance, to split on a period/dot <code>.</code> (which means "any character" in
regex), use either backslash <code>\</code> to escape the individual special character
like so <code>split("\\.")</code>, or use character class <code>[]</code> to represent literal
character(s) like so <code>split("[.]")</code>, or use <code>Pattern#quote()</code> to escape the
entire string like so <code>split(Pattern.quote("."))</code>.</p>
<div class="code"><pre class="code literal-block">String[] parts = string.split(Pattern.quote(".")); // Split on the exact string.
</pre></div>

<p>To test beforehand if the string contains certain character(s), just use
<code>String#contains()</code>.</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">string</span>.<span class="nv">contains</span><span class="ss">(</span><span class="s2">"-"</span><span class="ss">))</span><span class="w"> </span>{
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">Split</span><span class="w"> </span><span class="nv">it</span>.
}<span class="w"> </span><span class="k">else</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">throw</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="nv">IllegalArgumentException</span><span class="ss">(</span><span class="s2">"String "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">string</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">" does not contain -"</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p>Note, this does not take a regular expression. For that, use
<code>String#matches()</code> instead.</p>
<p>If you'd like to retain the split character in the resulting parts, then make
use of positive lookaround. In case you want to have the split character to
end up in left hand side, use positive lookbehind by prefixing <code>?&lt;=</code> group on
the pattern.</p>
<div class="code"><pre class="code literal-block">String string = "004-034556";
String[] parts = string.split("(?&lt;=-)");
String part1 = parts[0]; // 004-
String part2 = parts[1]; // 034556
</pre></div>

<p>In case you want to have the split character to end up in right hand side, use
positive lookahead by prefixing <code>?=</code> group on the pattern.</p>
<div class="code"><pre class="code literal-block">String string = "004-034556";
String[] parts = string.split("(?=-)");
String part1 = parts[0]; // 004
String part2 = parts[1]; // -034556
</pre></div>

<p>If you'd like to limit the number of resulting parts, then you can supply the
desired number as 2nd argument of <code>split()</code> method.</p>
<div class="code"><pre class="code literal-block">String string = "004-034556-42";
String[] parts = string.split("-", 2);
String part1 = parts[0]; // 004
String part2 = parts[1]; // 034556-42
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>An alternative to processing the string directly would be to use a regular
expression with capturing groups. This has the advantage that it makes it
straightforward to imply more sophisticated constraints on the input. For
example, the following splits the string into two parts, and ensures that both
consist only of digits:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">java.util.regex.Pattern</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.util.regex.Matcher</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SplitExample</span>
<span class="p">{</span>
    <span class="n">private</span> <span class="n">static</span> <span class="n">Pattern</span> <span class="n">twopart</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">"(</span><span class="se">\\</span><span class="s2">d+)-(</span><span class="se">\\</span><span class="s2">d+)"</span><span class="p">);</span>

    <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">checkString</span><span class="p">(</span><span class="n">String</span> <span class="n">s</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Matcher</span> <span class="n">m</span> <span class="o">=</span> <span class="n">twopart</span><span class="o">.</span><span class="n">matcher</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">matches</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">s</span> <span class="o">+</span> <span class="s2">" matches; first part is "</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span>
                               <span class="s2">", second part is "</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"."</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">s</span> <span class="o">+</span> <span class="s2">" does not match."</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">checkString</span><span class="p">(</span><span class="s2">"123-4567"</span><span class="p">);</span>
        <span class="n">checkString</span><span class="p">(</span><span class="s2">"foo-bar"</span><span class="p">);</span>
        <span class="n">checkString</span><span class="p">(</span><span class="s2">"123-"</span><span class="p">);</span>
        <span class="n">checkString</span><span class="p">(</span><span class="s2">"-4567"</span><span class="p">);</span>
        <span class="n">checkString</span><span class="p">(</span><span class="s2">"123-4567-890"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>As the pattern is fixed in this instance, it can be compiled in advance and
stored as a static member (initialised at class load time in the example). The
regular expression is:</p>
<div class="code"><pre class="code literal-block">(\d+)-(\d+)
</pre></div>

<p>The parentheses denote the capturing groups; the string that matched that part
of the regexp can be accessed by the Match.group() method, as shown. The \d
matches and single decimal digit, and the + means "match one or more of the
previous expression). The - has no special meaning, so just matches that
character in the input. Note that you need to double-escape the backslashes
when writing this as a Java string. Some other examples:</p>
<div class="code"><pre class="code literal-block">([A-Z]+)-([A-Z]+)          // Each part consists of only capital letters 
([^-]+)-([^-]+)            // Each part consists of characters other than -
([A-Z]{2})-(\d+)           // The first part is exactly two capital letters,
                           // the second consists of digits
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-check-if-a-string-represents-a-number-float-or-int/" class="u-url">How do I check if a string represents a number (float or int)?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-check-if-a-string-represents-a-number-float-or-int/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T23:36:38+08:00" itemprop="datePublished" title="2023-02-16 23:36">2023-02-16 23:36</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How do I check if a string represents a numeric value in Python?</p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">is_number</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">try</span>:
<span class="w">        </span><span class="nv">float</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">True</span>
<span class="w">    </span><span class="nv">except</span><span class="w"> </span><span class="nv">ValueError</span>:
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nv">False</span>
</pre></div>

<p>The above works, but it seems clunky.</p>
<hr>
<p>If what you are testing comes from user input, it is <em>still</em> a string <em>even if
it represents</em> an <code>int</code> or a <code>float</code>. See How can I read inputs as numbers?
for converting the input, and Asking the user for input until they give a
valid response for ensuring that the input represents an <code>int</code> or <code>float</code> (or
other requirements) before proceeding.</p>
<p><br><br></p>
<h2>Answer</h2>
<blockquote>
<p>Which, not only is ugly and slow</p>
</blockquote>
<p>I'd dispute both.</p>
<p>A regex or other string parsing method would be uglier and slower.</p>
<p>I'm not sure that anything much could be faster than the above. It calls the
function and returns. Try/Catch doesn't introduce much overhead because the
most common exception is caught without an extensive search of stack frames.</p>
<p>The issue is that any numeric conversion function has two kinds of results</p>
<ul>
<li>A number, if the number is valid</li>
<li>A status code (e.g., via errno) or exception to show that no valid number could be parsed.</li>
</ul>
<p>C (as an example) hacks around this a number of ways. Python lays it out
clearly and explicitly.</p>
<p>I think your code for doing this is perfect.</p>
<p><br></p>
<h3>Suggest</h3>
<blockquote>
<p>Which, not only is ugly and slow</p>
</blockquote>
<p>I'd dispute both.</p>
<p>A regex or other string parsing method would be uglier and slower.</p>
<p>I'm not sure that anything much could be faster than the above. It calls the
function and returns. Try/Catch doesn't introduce much overhead because the
most common exception is caught without an extensive search of stack frames.</p>
<p>The issue is that any numeric conversion function has two kinds of results</p>
<ul>
<li>A number, if the number is valid</li>
<li>A status code (e.g., via errno) or exception to show that no valid number could be parsed.</li>
</ul>
<p>C (as an example) hacks around this a number of ways. Python lays it out
clearly and explicitly.</p>
<p>I think your code for doing this is perfect.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-168.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-166.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
