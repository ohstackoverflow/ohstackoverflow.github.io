<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 524) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-524.html">
<link rel="prev" href="index-525.html" type="text/html">
<link rel="next" href="index-523.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/add-a-new-element-to-an-array-without-specifying-the-index-in-bash/" class="u-url">Add a new element to an array without specifying the index in Bash</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/add-a-new-element-to-an-array-without-specifying-the-index-in-bash/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:04:44+08:00" itemprop="datePublished" title="2023-02-17 09:04">2023-02-17 09:04</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a way to do something like PHPs <code>$array[] = 'foo';</code> in bash vs doing:</p>
<div class="code"><pre class="code literal-block">array[0]='foo'
array[1]='bar'
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Yes there is:</p>
<div class="code"><pre class="code literal-block">ARRAY=()
ARRAY+=('foo')
ARRAY+=('bar')
</pre></div>

<p>Bash Reference Manual:</p>
<blockquote>
<p>In the context where an assignment statement is assigning a value to a shell
variable or array index (see Arrays), the ‘+=’ operator can be used to
append to or add to the variable's previous value.</p>
</blockquote>
<p>Also:</p>
<blockquote>
<p>When += is applied to an array variable using compound assignment (see
Arrays below), the variable's value is not unset (as it is when using =),
and new values are appended to the array beginning at one greater than the
array's maximum index (for indexed arrays)</p>
</blockquote>
<p><br></p>
<h3>Suggest</h3>
<p>As <strong>Dumb Guy</strong> points out, it's important to note whether the array starts at
zero and is sequential. Since you can make assignments to and unset non-
contiguous indices <code>${#array[@]}</code> is not always the next item at the end of
the array.</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nv">array</span><span class="o">=(</span>a<span class="w"> </span>b<span class="w"> </span>c<span class="w"> </span>d<span class="w"> </span>e<span class="w"> </span>f<span class="w"> </span>g<span class="w"> </span>h<span class="o">)</span>
$<span class="w"> </span>array<span class="o">[</span><span class="m">42</span><span class="o">]=</span><span class="s2">"i"</span>
$<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>array<span class="o">[</span><span class="m">2</span><span class="o">]</span>
$<span class="w"> </span><span class="nb">unset</span><span class="w"> </span>array<span class="o">[</span><span class="m">3</span><span class="o">]</span>
$<span class="w"> </span><span class="nb">declare</span><span class="w"> </span>-p<span class="w"> </span>array<span class="w">     </span><span class="c1"># dump the array so we can see what it contains</span>
<span class="nb">declare</span><span class="w"> </span>-a<span class="w"> </span><span class="nv">array</span><span class="o">=</span><span class="s1">'([0]="a" [1]="b" [4]="e" [5]="f" [6]="g" [7]="h" [42]="i")'</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${#</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span>
<span class="m">7</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">array</span><span class="p">[</span><span class="si">${#</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="p">]</span><span class="si">}</span>
h
</pre></div>

<p>Here's how to get the last index:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nv">end</span><span class="o">=(</span><span class="si">${</span><span class="p">!array[@]</span><span class="si">}</span><span class="o">)</span><span class="w">   </span><span class="c1"># put all the indices in an array</span>
$<span class="w"> </span><span class="nv">end</span><span class="o">=</span><span class="si">${</span><span class="nv">end</span><span class="p">[@]: -1</span><span class="si">}</span><span class="w">    </span><span class="c1"># get the last one</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$end</span>
<span class="m">42</span>
</pre></div>

<p>That illustrates how to get the last element of an array. You'll often see
this:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">array</span><span class="p">[</span><span class="si">${#</span><span class="nv">array</span><span class="p">[@]</span><span class="si">}</span><span class="p"> - 1]</span><span class="si">}</span>
g
</pre></div>

<p>As you can see, because we're dealing with a sparse array, this isn't the last
element. This works on both sparse and contiguous arrays, though:</p>
<div class="code"><pre class="code literal-block">$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">array</span><span class="p">[@]: -1</span><span class="si">}</span>
i
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/remove-blue-border-from-css-custom-styled-button-in-chrome/" class="u-url">Remove blue border from css custom-styled button in Chrome</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/remove-blue-border-from-css-custom-styled-button-in-chrome/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:04:16+08:00" itemprop="datePublished" title="2023-02-17 09:04">2023-02-17 09:04</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm working on a web page, and I want custom-styled <code>&lt;button&gt;</code> tags. So with
CSS, I said: <code>border: none</code>. Now it works perfectly in safari, but in chrome,
when I click one of the buttons, it puts an annoying blue border around it. I
thought <code>button:active { outline: none }</code> or <code>button:focus { outline:none }</code>
would work, but neither do. Any ideas?</p>
<p>This is what it looks like before being clicked (and how I want it to still
look after being clicked):</p>
<p><img alt="" src="images/WVZZe.png"></p>
<p>And this is the border I'm talking about:</p>
<p><img alt="enter image description here" src="images/XwWNF.png"></p>
<p>Here is my CSS:</p>
<div class="code"><pre class="code literal-block"><span class="nt">button</span><span class="p">.</span><span class="nc">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#F9A300</span><span class="p">;</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#ffffff</span><span class="p">;</span>
<span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">;</span>
<span class="w">    </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">margin-right</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">button</span><span class="p">.</span><span class="nc">launch</span><span class="p">:</span><span class="nd">hover</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">pointer</span><span class="p">;</span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#FABD44</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">button</span><span class="p">.</span><span class="nc">change</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#F88F00</span><span class="p">;</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="kt">px</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#ffffff</span><span class="p">;</span>
<span class="w">    </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">;</span>
<span class="w">    </span><span class="k">margin-top</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="w">    </span><span class="k">margin-right</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">button</span><span class="p">.</span><span class="nc">change</span><span class="p">:</span><span class="nd">hover</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">cursor</span><span class="p">:</span><span class="w"> </span><span class="kc">pointer</span><span class="p">;</span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#F89900</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">button</span><span class="p">:</span><span class="nd">active</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">outline</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>Doing this is <strong>not recommended</strong> as it regresses the accessibility of your
site; for more info, see this post.</p>
<p>That said, if you insist, this CSS should work:</p>
<div class="code"><pre class="code literal-block"><span class="n">button</span><span class="o">:</span><span class="n">focus</span><span class="w"> </span><span class="o">{</span><span class="n">outline</span><span class="o">:</span><span class="mi">0</span><span class="o">;}</span>
</pre></div>

<p>Check it out or JSFiddle: http://jsfiddle.net/u4pXu/</p>
<p>Or in this snippet:</p>
<div class="code"><pre class="code literal-block">button.launch<span class="w"> </span>{
background-color:<span class="w"> </span>#F9A300;
border:<span class="w"> </span>none;
height:<span class="w"> </span>40px;
padding:<span class="w"> </span>5px<span class="w"> </span>15px;
color:<span class="w"> </span>#ffffff;
font-size:<span class="w"> </span>16px;
font-weight:<span class="w"> </span>300;
margin-top:<span class="w"> </span>10px;
margin-right:<span class="w"> </span>10px;
}

button.launch:hover<span class="w"> </span>{
cursor:<span class="w"> </span>pointer;
background-color:<span class="w"> </span>#FABD44;
}

button.launch<span class="w"> </span>{
background-color:<span class="w"> </span>#F9A300;
border:<span class="w"> </span>none;
height:<span class="w"> </span>40px;
padding:<span class="w"> </span>5px<span class="w"> </span>15px;
color:<span class="w"> </span>#ffffff;
font-size:<span class="w"> </span>16px;
font-weight:<span class="w"> </span>300;
margin-top:<span class="w"> </span>10px;
margin-right:<span class="w"> </span>10px;
}

button.launch:hover<span class="w"> </span>{
cursor:<span class="w"> </span>pointer;
background-color:<span class="w"> </span>#FABD44;
}

button.change<span class="w"> </span>{
background-color:<span class="w"> </span>#F88F00;
border:<span class="w"> </span>none;
height:<span class="w"> </span>40px;
padding:<span class="w"> </span>5px<span class="w"> </span>15px;
color:<span class="w"> </span>#ffffff;
font-size:<span class="w"> </span>16px;
font-weight:<span class="w"> </span>300;
margin-top:<span class="w"> </span>10px;
margin-right:<span class="w"> </span>10px;
}

button.change:hover<span class="w"> </span>{
cursor:<span class="w"> </span>pointer;
background-color:<span class="w"> </span>#F89900;
}

button:active<span class="w"> </span>{
outline:<span class="w"> </span>none;
border:<span class="w"> </span>none;
}

button:focus<span class="w"> </span>{outline:0;}


<span class="nt">&lt;button</span><span class="w"> </span><span class="na">class=</span><span class="s">"launch"</span><span class="nt">&gt;</span>Launch<span class="w"> </span>with<span class="w"> </span>these<span class="w"> </span>ads<span class="nt">&lt;/button&gt;</span><span class="w"> </span>
<span class="nt">&lt;button</span><span class="w"> </span><span class="na">class=</span><span class="s">"change"</span><span class="nt">&gt;</span>Change<span class="nt">&lt;/button&gt;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p><strong>Wait! There's a reason for that ugly outline!</strong></p>
<p>Before removing that ugly blue outline, you may want to take <strong>accessibility</strong>
into consideration. By default, that blue outline is placed on focusable
elements. This is so that users with accessibility issues are able to focus
that button by tabbing to it. Some users do not have the motor skills to use a
mouse and must use only the keyboard (or some other input device) for computer
interaction. When you remove the blue outline, there is no longer a visual
indicator on what element is focused. If you are going to remove the blue
outline, you <em>should</em> replace it with another type of visual indication that
the button is focused.</p>
<p><strong>Possible Solution: Darken Buttons when focused</strong></p>
<p>For the examples below, Chrome's blue outline was first removed by using
<code>button:focus { outline:0 !important; }</code></p>
<p>Here are your basic Bootstrap buttons as they appear normally: <img alt="Bootstrap
Buttons in Normal State" src="images/Rj3Pu.png"></p>
<p>Here are the buttons when they receive focus: <img alt="Bootstrap Buttons in Focused
State" src="images/wb0vw.png"></p>
<p>Here the buttons when they are pressed: <img alt="enter image description
here" src="images/jInZM.png"></p>
<p>As you can see, the buttons are a little darker when they receive focus.
Personally, I would recommend making the focused buttons even darker so that
there is a very noticeable difference between the focused state and the normal
state of the button.</p>
<p><strong>It's not just for disabled users</strong></p>
<p>Making your site more accessible is something that is often overlooked but can
help create a more productive experience in your website. There are many
normal users that use keyboard commands to navigate through websites in order
to keep hands on the keyboard.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/update-a-table-using-join-in-sql-server/" class="u-url">Update a table using JOIN in SQL Server?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/update-a-table-using-join-in-sql-server/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:03:46+08:00" itemprop="datePublished" title="2023-02-17 09:03">2023-02-17 09:03</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to update a column in a table making a join on other table e.g.:</p>
<div class="code"><pre class="code literal-block"><span class="n">UPDATE</span><span class="w"> </span><span class="n">table1</span><span class="w"> </span><span class="n">a</span><span class="w"> </span>
<span class="n">INNER</span><span class="w"> </span><span class="n">JOIN</span><span class="w"> </span><span class="n">table2</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">ON</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">commonfield</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.[</span><span class="n">common</span><span class="w"> </span><span class="n">field</span><span class="p">]</span><span class="w"> </span>
<span class="n">SET</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">CalculatedColumn</span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.[</span><span class="n">Calculated</span><span class="w"> </span><span class="n">Column</span><span class="p">]</span>
<span class="n">WHERE</span><span class="w"> </span>
<span class="w">    </span><span class="n">b</span><span class="p">.[</span><span class="n">common</span><span class="w"> </span><span class="n">field</span><span class="p">]</span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">commonfield</span>
<span class="n">AND</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">BatchNO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">'</span><span class="mi">110</span><span class="err">'</span>
</pre></div>

<p>But it is complaining :</p>
<blockquote>
<p>Msg 170, Level 15, State 1, Line 2<br>
 Line 2: Incorrect syntax near 'a'.</p>
</blockquote>
<p>What is wrong here?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You don't quite have SQL Server's proprietary <code>UPDATE FROM</code> syntax down. Also
not sure why you needed to join on the <code>CommonField</code> and also filter on it
afterward. Try this:</p>
<div class="code"><pre class="code literal-block"><span class="n">UPDATE</span><span class="w"> </span><span class="n">t1</span>
<span class="w">  </span><span class="n">SET</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">CalculatedColumn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.[</span><span class="n">Calculated</span><span class="w"> </span><span class="n">Column</span><span class="p">]</span>
<span class="w">  </span><span class="n">FROM</span><span class="w"> </span><span class="n">dbo</span><span class="p">.</span><span class="n">Table1</span><span class="w"> </span><span class="n">AS</span><span class="w"> </span><span class="n">t1</span>
<span class="w">  </span><span class="n">INNER</span><span class="w"> </span><span class="n">JOIN</span><span class="w"> </span><span class="n">dbo</span><span class="p">.</span><span class="n">Table2</span><span class="w"> </span><span class="n">AS</span><span class="w"> </span><span class="n">t2</span>
<span class="w">  </span><span class="n">ON</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">CommonField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.[</span><span class="n">Common</span><span class="w"> </span><span class="n">Field</span><span class="p">]</span>
<span class="w">  </span><span class="n">WHERE</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">BatchNo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">'</span><span class="mi">110</span><span class="err">'</span><span class="p">;</span>
</pre></div>

<p>If you're doing something silly - like constantly trying to set the value of
one column to the aggregate of another column (which violates the principle of
avoiding storing redundant data), you can use a CTE (common table expression)
- see here and here for more details:</p>
<div class="code"><pre class="code literal-block"><span class="p">;</span><span class="k">WITH</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="k">AS</span>
<span class="p">(</span>
<span class="w">  </span><span class="k">SELECT</span><span class="w"> </span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">CalculatedColumn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">SUM</span><span class="p">(</span><span class="n">some_column</span><span class="p">)</span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">dbo</span><span class="p">.</span><span class="n">table2</span>
<span class="w">    </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="o">[</span><span class="n">key</span><span class="o">]</span>
<span class="p">)</span>
<span class="k">UPDATE</span><span class="w"> </span><span class="n">t1</span>
<span class="w">  </span><span class="k">SET</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">CalculatedColumn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="n">CalculatedColumn</span>
<span class="w">  </span><span class="k">FROM</span><span class="w"> </span><span class="n">dbo</span><span class="p">.</span><span class="n">table1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">t1</span>
<span class="w">  </span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">t2</span>
<span class="w">  </span><span class="k">ON</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="o">[</span><span class="n">key</span><span class="o">]</span><span class="p">;</span>
</pre></div>

<p>The reason this is silly, is that you're going to have to re-run this entire
update every single time any row in <code>table2</code> changes. A <code>SUM</code> is something you
can always calculate at runtime and, in doing so, never have to worry that the
result is stale.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Try it like this:</p>
<div class="code"><pre class="code literal-block"><span class="w">    </span><span class="n">UPDATE</span><span class="w"> </span><span class="n">a</span><span class="w"> </span>
<span class="w">    </span><span class="n">SET</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">CalculatedColumn</span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.[</span><span class="n">Calculated</span><span class="w"> </span><span class="n">Column</span><span class="p">]</span>
<span class="w">    </span><span class="n">FROM</span><span class="w"> </span><span class="n">table1</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">INNER</span><span class="w"> </span><span class="n">JOIN</span><span class="w"> </span><span class="n">table2</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">ON</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">commonfield</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.[</span><span class="n">common</span><span class="w"> </span><span class="n">field</span><span class="p">]</span><span class="w"> </span>
<span class="w">    </span><span class="n">WHERE</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">BatchNO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">'</span><span class="mi">110</span><span class="err">'</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-525.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-523.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
