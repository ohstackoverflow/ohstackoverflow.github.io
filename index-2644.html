<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2644) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2644.html">
<link rel="prev" href="index-2645.html" type="text/html">
<link rel="next" href="index-2643.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/can-i-use-git-diff-on-untracked-files/" class="u-url">Can I use git diff on untracked files?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/can-i-use-git-diff-on-untracked-files/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T07:15:55+08:00" itemprop="datePublished" title="2023-03-05 07:15">2023-03-05 07:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is it possible to ask <code>git diff</code> to include untracked files in its diff
output, or is my best bet to use <code>git add</code> on the newly created files and the
existing files I have edited, then use:</p>
<div class="code"><pre class="code literal-block">git diff --cached
</pre></div>

<p>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>With recent git versions you can <code>git add -N</code> the file (or <code>--intent-to-add</code>),
which adds a zero-length blob to the index at that location. The upshot is
that your "untracked" file now becomes a modification to add all the content
to this zero-length file, and that shows up in the "git diff" output.</p>
<div class="code"><pre class="code literal-block">git diff

echo "this is a new file" &gt; new.txt
git diff

git add -N new.txt
git diff
diff --git a/new.txt b/new.txt
index e69de29..3b2aed8 100644
--- a/new.txt
+++ b/new.txt
@@ -0,0 +1 @@
+this is a new file
</pre></div>

<p>Sadly, as pointed out, you can't <code>git stash</code> while you have an <code>--intent-to-
add</code> file pending like this. Although if you need to stash, you just add the
new files and then stash them. Or you can use the emulation workaround:</p>
<div class="code"><pre class="code literal-block">git update-index --add --cacheinfo \
100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 new.txt
</pre></div>

<p>(setting up an alias is your friend here).</p>
<p><br></p>
<h3>Suggest</h3>
<p>I believe you can diff against files in your index and untracked files by
simply supplying the path to both files.</p>
<div class="code"><pre class="code literal-block">git diff --no-index tracked_file untracked_file
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-prevent-less-from-trying-to-compile-css-calc-properties/" class="u-url">How to prevent Less from trying to compile CSS calc() properties?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-prevent-less-from-trying-to-compile-css-calc-properties/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T07:14:34+08:00" itemprop="datePublished" title="2023-03-05 07:14">2023-03-05 07:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>The Less compilers that I'm using (OrangeBits and dotless 1.3.0.5) are
aggressively translating</p>
<div class="code"><pre class="code literal-block"><span class="nt">body</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="nb">calc</span><span class="p">(</span><span class="mi">100</span><span class="kt">%</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">250</span><span class="kt">px</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.5</span><span class="kt">em</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>into</p>
<div class="code"><pre class="code literal-block"><span class="nt">body</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="nb">calc</span><span class="p">(</span><span class="nv">-151</span><span class="mf">.5</span><span class="kt">%</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>Which is obviously not desired. I'm wondering if there is a way to signal to
the Less compiler to essentially ignore the attribute during compilation. I've
searched through the Less documentation and both compilers' documentation, and
I could not find anything.</p>
<p>Does Less or a Less compiler support this?</p>
<p>If not, is there a CSS extender that does?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Less no longer evaluates expression inside <code>calc</code> by default since <code>v3.00</code>.</p>
<hr>
<p><strong><em>Original answer (<code>Less v1.x...2.x</code>):</em></strong></p>
<p>Do this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">body</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="nb">calc</span><span class="p">(</span><span class="err">~</span><span class="s2">"100% - 250px - 1.5em"</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>In Less 1.4.0 we will have a <code>strictMaths</code> option which requires all Less
calculations to be within brackets, so the <code>calc</code> will work "out-of-the-box".
This is an option since it is a major breaking change. Early betas of 1.4.0
had this option on by default. The release version has it off by default.</p>
<p><br></p>
<h3>Suggest</h3>
<p>A very common usecase of calc is take 100% width and adding some margin around
the element.</p>
<p>One can do so with:</p>
<div class="code"><pre class="code literal-block"><span class="nv">@someMarginVariable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="n">px</span><span class="p">;</span>

<span class="nl">margin</span><span class="p">:</span><span class="w"> </span><span class="nv">@someMarginVariable</span><span class="p">;</span>
<span class="nl">width</span><span class="p">:</span><span class="w"> </span><span class="n">calc</span><span class="p">(</span><span class="o">~</span><span class="ss">"100% - "</span><span class="nv">@someMarginVariable</span><span class="o">*</span><span class="mi">2</span><span class="p">);</span>
<span class="nl">width</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="n">calc</span><span class="p">(</span><span class="o">~</span><span class="ss">"100% - "</span><span class="nv">@someMarginVariable</span><span class="o">*</span><span class="mi">2</span><span class="p">);</span>
<span class="nl">width</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">calc</span><span class="p">(</span><span class="o">~</span><span class="ss">"100% - "</span><span class="nv">@someMarginVariable</span><span class="o">*</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-throw-checked-exceptions-from-inside-java-8-lambdas-streams/" class="u-url">How can I throw CHECKED exceptions from inside Java 8 lambdas/streams?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-throw-checked-exceptions-from-inside-java-8-lambdas-streams/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T07:12:57+08:00" itemprop="datePublished" title="2023-03-05 07:12">2023-03-05 07:12</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I throw CHECKED exceptions from inside Java 8 lambda, used in a stream
for example?</p>
<p>In other words, I want to make code like this compile:</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&gt;</span><span class="w"> </span><span class="n">getClasses</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&gt;</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">        </span><span class="n">Stream</span><span class="p">.</span><span class="kr">of</span><span class="p">(</span><span class="s">"java.lang.Object"</span><span class="p">,</span><span class="w"> </span><span class="s">"java.lang.Integer"</span><span class="p">,</span><span class="w"> </span><span class="s">"java.lang.String"</span><span class="p">)</span>
<span class="w">              </span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="n">className</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="n">forName</span><span class="p">(</span><span class="n">className</span><span class="p">))</span>
<span class="w">              </span><span class="p">.</span><span class="n">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="n">toList</span><span class="p">());</span><span class="w">                  </span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="n">classes</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>

<p>This code does not compile, since the <code>Class.forName()</code> method above throws
<code>ClassNotFoundException</code>, which is checked.</p>
<p>Please note I do NOT want to wrap the checked exception inside a runtime
exception and throw the wrapped unchecked exception instead. <strong>I want to throw
the checked exception itself</strong> , and without adding ugly <code>try</code>/<code>catches</code> to
the stream.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>This <code>LambdaExceptionUtil</code> helper class lets you use any checked exceptions in
Java streams, like this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">Stream</span><span class="p">.</span><span class="nc">of</span><span class="o">(</span><span class="s2">"java.lang.Object"</span><span class="o">,</span><span class="w"> </span><span class="s2">"java.lang.Integer"</span><span class="o">,</span><span class="w"> </span><span class="s2">"java.lang.String"</span><span class="o">)</span>
<span class="w">      </span><span class="p">.</span><span class="nc">map</span><span class="o">(</span><span class="nt">rethrowFunction</span><span class="o">(</span><span class="nt">Class</span><span class="p">::</span><span class="nd">forName</span><span class="o">))</span>
<span class="w">      </span><span class="p">.</span><span class="nc">collect</span><span class="o">(</span><span class="nt">Collectors</span><span class="p">.</span><span class="nc">toList</span><span class="o">());</span>
</pre></div>

<p>Note <code>Class::forName</code> throws <code>ClassNotFoundException</code>, which is <strong>checked</strong>.
The stream itself also throws <code>ClassNotFoundException</code>, and NOT some wrapping
unchecked exception.</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">LambdaExceptionUtil</span><span class="w"> </span><span class="p">{</span>

<span class="err">@</span><span class="n">FunctionalInterface</span>
<span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">Consumer_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">accept</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="err">@</span><span class="n">FunctionalInterface</span>
<span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">BiConsumer_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">accept</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">u</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="err">@</span><span class="n">FunctionalInterface</span>
<span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">Function_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">R</span><span class="w"> </span><span class="n">apply</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="err">@</span><span class="n">FunctionalInterface</span>
<span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">Supplier_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">T</span><span class="w"> </span><span class="n">get</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="err">@</span><span class="n">FunctionalInterface</span>
<span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">Runnable_WithExceptions</span><span class="o">&lt;</span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">run</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">rethrowConsumer</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">Class</span><span class="o">.</span><span class="n">forName</span><span class="p">(</span><span class="n">name</span><span class="p">))));</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">rethrowConsumer</span><span class="p">(</span><span class="n">ClassNameUtil</span><span class="p">::</span><span class="n">println</span><span class="p">));</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rethrowConsumer</span><span class="p">(</span><span class="n">Consumer_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">consumer</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">consumer</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="n">t</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="n">BiConsumer</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rethrowBiConsumer</span><span class="p">(</span><span class="n">BiConsumer_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">biConsumer</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="n">u</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">biConsumer</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="n">u</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">rethrowFunction</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Class</span><span class="o">.</span><span class="n">forName</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">rethrowFunction</span><span class="p">(</span><span class="n">Class</span><span class="p">::</span><span class="n">forName</span><span class="p">))</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Function</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rethrowFunction</span><span class="p">(</span><span class="n">Function_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">function</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">t</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="n">rethrowSupplier</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">StringJoiner</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">byte</span><span class="p">[]{</span><span class="mi">77</span><span class="p">,</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w"> </span><span class="mi">114</span><span class="p">,</span><span class="w"> </span><span class="mi">107</span><span class="p">},</span><span class="w"> </span><span class="s2">"UTF-8"</span><span class="p">))),</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Supplier</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rethrowSupplier</span><span class="p">(</span><span class="n">Supplier_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">function</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="o">.</span><span class="n">get</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Class</span><span class="o">.</span><span class="n">forName</span><span class="p">(</span><span class="s2">"xxx"</span><span class="p">));</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(</span><span class="n">Runnable_WithExceptions</span><span class="w"> </span><span class="n">t</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">t</span><span class="o">.</span><span class="n">run</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Class</span><span class="o">.</span><span class="n">forName</span><span class="p">(</span><span class="s2">"xxx"</span><span class="p">));</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(</span><span class="n">Supplier_WithExceptions</span><span class="o">&lt;</span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">supplier</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">supplier</span><span class="o">.</span><span class="n">get</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(</span><span class="n">Class</span><span class="p">::</span><span class="n">forName</span><span class="p">,</span><span class="w"> </span><span class="s2">"xxx"</span><span class="p">);</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(</span><span class="n">Function_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">function</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">t</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="err">@</span><span class="n">SuppressWarnings</span><span class="w"> </span><span class="p">(</span><span class="s2">"unchecked"</span><span class="p">)</span>
<span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Throwable</span><span class="o">&gt;</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="p">(</span><span class="n">E</span><span class="p">)</span><span class="n">exception</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="p">}</span>
</pre></div>

<p>Many other examples on how to use it (after statically importing
<code>LambdaExceptionUtil</code>):</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Test</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">test_Consumer_with_checked_exceptions</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">IllegalAccessException</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">Stream</span><span class="p">.</span><span class="k">of</span><span class="p">(</span><span class="ss">"java.lang.Object"</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.Integer"</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.String"</span><span class="p">)</span>
<span class="w">          </span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">rethrowConsumer</span><span class="p">(</span><span class="n">className</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="k">Class</span><span class="p">.</span><span class="n">forName</span><span class="p">(</span><span class="n">className</span><span class="p">))));</span>

<span class="w">    </span><span class="n">Stream</span><span class="p">.</span><span class="k">of</span><span class="p">(</span><span class="ss">"java.lang.Object"</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.Integer"</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.String"</span><span class="p">)</span>
<span class="w">          </span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">rethrowConsumer</span><span class="p">(</span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="o">::</span><span class="n">println</span><span class="p">));</span>
<span class="w">    </span><span class="err">}</span>

<span class="nv">@Test</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">test_Function_with_checked_exceptions</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="k">Class</span><span class="o">&gt;</span><span class="w"> </span><span class="n">classes1</span>
<span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="n">Stream</span><span class="p">.</span><span class="k">of</span><span class="p">(</span><span class="ss">"Object"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Integer"</span><span class="p">,</span><span class="w"> </span><span class="ss">"String"</span><span class="p">)</span>
<span class="w">                  </span><span class="p">.</span><span class="k">map</span><span class="p">(</span><span class="n">rethrowFunction</span><span class="p">(</span><span class="n">className</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">Class</span><span class="p">.</span><span class="n">forName</span><span class="p">(</span><span class="ss">"java.lang."</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">className</span><span class="p">)))</span>
<span class="w">                  </span><span class="p">.</span><span class="k">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="n">toList</span><span class="p">());</span>

<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="k">Class</span><span class="o">&gt;</span><span class="w"> </span><span class="n">classes2</span>
<span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="n">Stream</span><span class="p">.</span><span class="k">of</span><span class="p">(</span><span class="ss">"java.lang.Object"</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.Integer"</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.String"</span><span class="p">)</span>
<span class="w">                  </span><span class="p">.</span><span class="k">map</span><span class="p">(</span><span class="n">rethrowFunction</span><span class="p">(</span><span class="k">Class</span><span class="o">::</span><span class="n">forName</span><span class="p">))</span>
<span class="w">                  </span><span class="p">.</span><span class="k">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="n">toList</span><span class="p">());</span>
<span class="w">    </span><span class="err">}</span>

<span class="nv">@Test</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">test_Supplier_with_checked_exceptions</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">Collector</span><span class="p">.</span><span class="k">of</span><span class="p">(</span>
<span class="w">          </span><span class="n">rethrowSupplier</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringJoiner</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">byte</span><span class="err">[]{</span><span class="mi">77</span><span class="p">,</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w"> </span><span class="mi">114</span><span class="p">,</span><span class="w"> </span><span class="mi">107</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="ss">"UTF-8"</span><span class="p">))),</span>
<span class="w">          </span><span class="nl">StringJoiner</span><span class="p">:</span><span class="err">:</span><span class="k">add</span><span class="p">,</span><span class="w"> </span><span class="nl">StringJoiner</span><span class="p">:</span><span class="err">:</span><span class="k">merge</span><span class="p">,</span><span class="w"> </span><span class="nl">StringJoiner</span><span class="p">:</span><span class="err">:</span><span class="n">toString</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>

<span class="nv">@Test</span><span class="w">    </span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">test_uncheck_exception_thrown_by_method</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">Class</span><span class="w"> </span><span class="n">clazz1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">Class</span><span class="p">.</span><span class="n">forName</span><span class="p">(</span><span class="ss">"java.lang.String"</span><span class="p">));</span>

<span class="w">    </span><span class="k">Class</span><span class="w"> </span><span class="n">clazz2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(</span><span class="k">Class</span><span class="o">::</span><span class="n">forName</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.String"</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>

<span class="nv">@Test</span><span class="w"> </span><span class="p">(</span><span class="n">expected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="p">.</span><span class="k">class</span><span class="p">)</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">test_if_correct_exception_is_still_thrown_by_method</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">Class</span><span class="w"> </span><span class="n">clazz3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(</span><span class="k">Class</span><span class="o">::</span><span class="n">forName</span><span class="p">,</span><span class="w"> </span><span class="ss">"INVALID"</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
</pre></div>

<p><strong>UPDATE as of Nov 2015</strong> The code has been improved with the help of @PaoloC,
please check his answer below and upvote it. He helped solve the last problem:
now the compiler will ask you to add throw clauses and everything is as if you
could throw checked exceptions natively on Java 8 streams.</p>
<h5>Note 1</h5>
<p>The <code>rethrow</code> methods of the <code>LambdaExceptionUtil</code> class above may be used
without fear, and are <strong>OK to use in any situation</strong>.</p>
<h5>Note 2</h5>
<p>The <code>uncheck</code> methods of the <code>LambdaExceptionUtil</code> class above are bonus
methods, and may be safely removed them from the class if you don't want to
use them. If you do used them, do it with care, and not before understanding
the following use cases, advantages/disadvantages and limitations:</p>
<ul>
<li>
<p>You may use the <code>uncheck</code> methods if you are calling a method which literally can never throw the exception that it declares. For example: new String(byteArr, "UTF-8") throws UnsupportedEncodingException, but UTF-8 is guaranteed by the Java spec to always be present. Here, the throws declaration is a nuisance and any solution to silence it with minimal boilerplate is welcome:</p>
<div class="code"><pre class="code literal-block"><span class="kt">String</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">byteArr</span><span class="p">,</span><span class="w"> </span><span class="s">"UTF-8"</span><span class="p">));</span>
</pre></div>

</li>
<li>
<p>You may use the <code>uncheck</code> methods if you are implementing a strict interface where you don't have the option for adding a throws declaration, and yet throwing an exception is entirely appropriate. Wrapping an exception just to gain the privilege of throwing it results in a stacktrace with spurious exceptions which contribute no information about what actually went wrong. A good example is <code>Runnable.run()</code>, which does not throw any checked exceptions.</p>
</li>
<li>
<p>In any case, if you decide to use the <code>uncheck</code> methods, be aware of these two consequences of throwing CHECKED exceptions without a throws clause:</p>
<ol>
<li>The calling-code won't be able to catch it by name (if you try, the compiler will say: "Exception is never thrown in body of corresponding try statement"). It will bubble and probably be caught in the main program loop by some <code>catch</code> <code>Exception</code> or <code>catch</code> <code>Throwable</code>, which may be what you want anyway.</li>
<li>It violates the principle of least surprise: it will no longer be enough to catch <code>RuntimeException</code> to be able to guarantee catching all possible exceptions. For this reason, I believe this should not be done in framework code, but only in business code that you completely control.</li>
</ol>
</li>
</ul>
<h4>References</h4>
<ul>
<li>http://www.philandstuff.com/2012/04/28/sneakily-throwing-checked-exceptions.html</li>
<li>http://www.mail-archive.com/javaposse@googlegroups.com/msg05984.html</li>
<li>Project Lombok annotation: @SneakyThrows</li>
<li>Brian Goetz opinion (against) here: How can I throw CHECKED exceptions from inside Java 8 lambdas/streams?</li>
<li>https://softwareengineering.stackexchange.com/questions/225931/workaround-for-java-checked-exceptions?newreg=ddf0dd15e8174af8ba52e091cf85688e *</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>This <code>LambdaExceptionUtil</code> helper class lets you use any checked exceptions in
Java streams, like this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">Stream</span><span class="p">.</span><span class="nc">of</span><span class="o">(</span><span class="s2">"java.lang.Object"</span><span class="o">,</span><span class="w"> </span><span class="s2">"java.lang.Integer"</span><span class="o">,</span><span class="w"> </span><span class="s2">"java.lang.String"</span><span class="o">)</span>
<span class="w">      </span><span class="p">.</span><span class="nc">map</span><span class="o">(</span><span class="nt">rethrowFunction</span><span class="o">(</span><span class="nt">Class</span><span class="p">::</span><span class="nd">forName</span><span class="o">))</span>
<span class="w">      </span><span class="p">.</span><span class="nc">collect</span><span class="o">(</span><span class="nt">Collectors</span><span class="p">.</span><span class="nc">toList</span><span class="o">());</span>
</pre></div>

<p>Note <code>Class::forName</code> throws <code>ClassNotFoundException</code>, which is <strong>checked</strong>.
The stream itself also throws <code>ClassNotFoundException</code>, and NOT some wrapping
unchecked exception.</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="n">final</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">LambdaExceptionUtil</span><span class="w"> </span><span class="p">{</span>

<span class="err">@</span><span class="n">FunctionalInterface</span>
<span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">Consumer_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">accept</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="err">@</span><span class="n">FunctionalInterface</span>
<span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">BiConsumer_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">accept</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">u</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="err">@</span><span class="n">FunctionalInterface</span>
<span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">Function_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">R</span><span class="w"> </span><span class="n">apply</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="err">@</span><span class="n">FunctionalInterface</span>
<span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">Supplier_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">T</span><span class="w"> </span><span class="n">get</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="err">@</span><span class="n">FunctionalInterface</span>
<span class="n">public</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">Runnable_WithExceptions</span><span class="o">&lt;</span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">run</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">rethrowConsumer</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">System</span><span class="o">.</span><span class="n">out</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">Class</span><span class="o">.</span><span class="n">forName</span><span class="p">(</span><span class="n">name</span><span class="p">))));</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">rethrowConsumer</span><span class="p">(</span><span class="n">ClassNameUtil</span><span class="p">::</span><span class="n">println</span><span class="p">));</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Consumer</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rethrowConsumer</span><span class="p">(</span><span class="n">Consumer_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">consumer</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">consumer</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="n">t</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="n">BiConsumer</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rethrowBiConsumer</span><span class="p">(</span><span class="n">BiConsumer_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">biConsumer</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="n">u</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">biConsumer</span><span class="o">.</span><span class="n">accept</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="n">u</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">rethrowFunction</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Class</span><span class="o">.</span><span class="n">forName</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">rethrowFunction</span><span class="p">(</span><span class="n">Class</span><span class="p">::</span><span class="n">forName</span><span class="p">))</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Function</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rethrowFunction</span><span class="p">(</span><span class="n">Function_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">function</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">t</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="n">rethrowSupplier</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">StringJoiner</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">String</span><span class="p">(</span><span class="n">new</span><span class="w"> </span><span class="n">byte</span><span class="p">[]{</span><span class="mi">77</span><span class="p">,</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w"> </span><span class="mi">114</span><span class="p">,</span><span class="w"> </span><span class="mi">107</span><span class="p">},</span><span class="w"> </span><span class="s2">"UTF-8"</span><span class="p">))),</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Supplier</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">rethrowSupplier</span><span class="p">(</span><span class="n">Supplier_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">function</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="o">.</span><span class="n">get</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">        </span><span class="p">};</span>
<span class="w">    </span><span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Class</span><span class="o">.</span><span class="n">forName</span><span class="p">(</span><span class="s2">"xxx"</span><span class="p">));</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(</span><span class="n">Runnable_WithExceptions</span><span class="w"> </span><span class="n">t</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">t</span><span class="o">.</span><span class="n">run</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Class</span><span class="o">.</span><span class="n">forName</span><span class="p">(</span><span class="s2">"xxx"</span><span class="p">));</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(</span><span class="n">Supplier_WithExceptions</span><span class="o">&lt;</span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">supplier</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">supplier</span><span class="o">.</span><span class="n">get</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="o">/**</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(</span><span class="n">Class</span><span class="p">::</span><span class="n">forName</span><span class="p">,</span><span class="w"> </span><span class="s2">"xxx"</span><span class="p">);</span><span class="w"> </span><span class="o">*/</span>
<span class="n">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Exception</span><span class="o">&gt;</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(</span><span class="n">Function_WithExceptions</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">function</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">function</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">t</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="n">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">exception</span><span class="p">);</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="err">@</span><span class="n">SuppressWarnings</span><span class="w"> </span><span class="p">(</span><span class="s2">"unchecked"</span><span class="p">)</span>
<span class="n">private</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">E</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">Throwable</span><span class="o">&gt;</span><span class="w"> </span><span class="nb nb-Type">void</span><span class="w"> </span><span class="n">throwAsUnchecked</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="p">(</span><span class="n">E</span><span class="p">)</span><span class="n">exception</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="p">}</span>
</pre></div>

<p>Many other examples on how to use it (after statically importing
<code>LambdaExceptionUtil</code>):</p>
<div class="code"><pre class="code literal-block"><span class="nv">@Test</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">test_Consumer_with_checked_exceptions</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">IllegalAccessException</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">Stream</span><span class="p">.</span><span class="k">of</span><span class="p">(</span><span class="ss">"java.lang.Object"</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.Integer"</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.String"</span><span class="p">)</span>
<span class="w">          </span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">rethrowConsumer</span><span class="p">(</span><span class="n">className</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="k">Class</span><span class="p">.</span><span class="n">forName</span><span class="p">(</span><span class="n">className</span><span class="p">))));</span>

<span class="w">    </span><span class="n">Stream</span><span class="p">.</span><span class="k">of</span><span class="p">(</span><span class="ss">"java.lang.Object"</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.Integer"</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.String"</span><span class="p">)</span>
<span class="w">          </span><span class="p">.</span><span class="n">forEach</span><span class="p">(</span><span class="n">rethrowConsumer</span><span class="p">(</span><span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="o">::</span><span class="n">println</span><span class="p">));</span>
<span class="w">    </span><span class="err">}</span>

<span class="nv">@Test</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">test_Function_with_checked_exceptions</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="k">Class</span><span class="o">&gt;</span><span class="w"> </span><span class="n">classes1</span>
<span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="n">Stream</span><span class="p">.</span><span class="k">of</span><span class="p">(</span><span class="ss">"Object"</span><span class="p">,</span><span class="w"> </span><span class="ss">"Integer"</span><span class="p">,</span><span class="w"> </span><span class="ss">"String"</span><span class="p">)</span>
<span class="w">                  </span><span class="p">.</span><span class="k">map</span><span class="p">(</span><span class="n">rethrowFunction</span><span class="p">(</span><span class="n">className</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">Class</span><span class="p">.</span><span class="n">forName</span><span class="p">(</span><span class="ss">"java.lang."</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">className</span><span class="p">)))</span>
<span class="w">                  </span><span class="p">.</span><span class="k">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="n">toList</span><span class="p">());</span>

<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="k">Class</span><span class="o">&gt;</span><span class="w"> </span><span class="n">classes2</span>
<span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="n">Stream</span><span class="p">.</span><span class="k">of</span><span class="p">(</span><span class="ss">"java.lang.Object"</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.Integer"</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.String"</span><span class="p">)</span>
<span class="w">                  </span><span class="p">.</span><span class="k">map</span><span class="p">(</span><span class="n">rethrowFunction</span><span class="p">(</span><span class="k">Class</span><span class="o">::</span><span class="n">forName</span><span class="p">))</span>
<span class="w">                  </span><span class="p">.</span><span class="k">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="n">toList</span><span class="p">());</span>
<span class="w">    </span><span class="err">}</span>

<span class="nv">@Test</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">test_Supplier_with_checked_exceptions</span><span class="p">()</span><span class="w"> </span><span class="n">throws</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="n">Collector</span><span class="p">.</span><span class="k">of</span><span class="p">(</span>
<span class="w">          </span><span class="n">rethrowSupplier</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">StringJoiner</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">byte</span><span class="err">[]{</span><span class="mi">77</span><span class="p">,</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w"> </span><span class="mi">114</span><span class="p">,</span><span class="w"> </span><span class="mi">107</span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="ss">"UTF-8"</span><span class="p">))),</span>
<span class="w">          </span><span class="nl">StringJoiner</span><span class="p">:</span><span class="err">:</span><span class="k">add</span><span class="p">,</span><span class="w"> </span><span class="nl">StringJoiner</span><span class="p">:</span><span class="err">:</span><span class="k">merge</span><span class="p">,</span><span class="w"> </span><span class="nl">StringJoiner</span><span class="p">:</span><span class="err">:</span><span class="n">toString</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>

<span class="nv">@Test</span><span class="w">    </span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">test_uncheck_exception_thrown_by_method</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">Class</span><span class="w"> </span><span class="n">clazz1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">Class</span><span class="p">.</span><span class="n">forName</span><span class="p">(</span><span class="ss">"java.lang.String"</span><span class="p">));</span>

<span class="w">    </span><span class="k">Class</span><span class="w"> </span><span class="n">clazz2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(</span><span class="k">Class</span><span class="o">::</span><span class="n">forName</span><span class="p">,</span><span class="w"> </span><span class="ss">"java.lang.String"</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>

<span class="nv">@Test</span><span class="w"> </span><span class="p">(</span><span class="n">expected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="p">.</span><span class="k">class</span><span class="p">)</span>
<span class="k">public</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">test_if_correct_exception_is_still_thrown_by_method</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">Class</span><span class="w"> </span><span class="n">clazz3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(</span><span class="k">Class</span><span class="o">::</span><span class="n">forName</span><span class="p">,</span><span class="w"> </span><span class="ss">"INVALID"</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
</pre></div>

<p><strong>UPDATE as of Nov 2015</strong> The code has been improved with the help of @PaoloC,
please check his answer below and upvote it. He helped solve the last problem:
now the compiler will ask you to add throw clauses and everything is as if you
could throw checked exceptions natively on Java 8 streams.</p>
<h5>Note 1</h5>
<p>The <code>rethrow</code> methods of the <code>LambdaExceptionUtil</code> class above may be used
without fear, and are <strong>OK to use in any situation</strong>.</p>
<h5>Note 2</h5>
<p>The <code>uncheck</code> methods of the <code>LambdaExceptionUtil</code> class above are bonus
methods, and may be safely removed them from the class if you don't want to
use them. If you do used them, do it with care, and not before understanding
the following use cases, advantages/disadvantages and limitations:</p>
<ul>
<li>
<p>You may use the <code>uncheck</code> methods if you are calling a method which literally can never throw the exception that it declares. For example: new String(byteArr, "UTF-8") throws UnsupportedEncodingException, but UTF-8 is guaranteed by the Java spec to always be present. Here, the throws declaration is a nuisance and any solution to silence it with minimal boilerplate is welcome:</p>
<div class="code"><pre class="code literal-block"><span class="kt">String</span><span class="w"> </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uncheck</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">byteArr</span><span class="p">,</span><span class="w"> </span><span class="s">"UTF-8"</span><span class="p">));</span>
</pre></div>

</li>
<li>
<p>You may use the <code>uncheck</code> methods if you are implementing a strict interface where you don't have the option for adding a throws declaration, and yet throwing an exception is entirely appropriate. Wrapping an exception just to gain the privilege of throwing it results in a stacktrace with spurious exceptions which contribute no information about what actually went wrong. A good example is <code>Runnable.run()</code>, which does not throw any checked exceptions.</p>
</li>
<li>
<p>In any case, if you decide to use the <code>uncheck</code> methods, be aware of these two consequences of throwing CHECKED exceptions without a throws clause:</p>
<ol>
<li>The calling-code won't be able to catch it by name (if you try, the compiler will say: "Exception is never thrown in body of corresponding try statement"). It will bubble and probably be caught in the main program loop by some <code>catch</code> <code>Exception</code> or <code>catch</code> <code>Throwable</code>, which may be what you want anyway.</li>
<li>It violates the principle of least surprise: it will no longer be enough to catch <code>RuntimeException</code> to be able to guarantee catching all possible exceptions. For this reason, I believe this should not be done in framework code, but only in business code that you completely control.</li>
</ol>
</li>
</ul>
<h4>References</h4>
<ul>
<li>http://www.philandstuff.com/2012/04/28/sneakily-throwing-checked-exceptions.html</li>
<li>http://www.mail-archive.com/javaposse@googlegroups.com/msg05984.html</li>
<li>Project Lombok annotation: @SneakyThrows</li>
<li>Brian Goetz opinion (against) here: How can I throw CHECKED exceptions from inside Java 8 lambdas/streams?</li>
<li>https://softwareengineering.stackexchange.com/questions/225931/workaround-for-java-checked-exceptions?newreg=ddf0dd15e8174af8ba52e091cf85688e *</li>
</ul>
</div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2645.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2643.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
