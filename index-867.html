<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 867) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-867.html">
<link rel="prev" href="index-868.html" type="text/html">
<link rel="next" href="index-866.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-replace-all-line-breaks-in-a-string-with-br-elements/" class="u-url">How do I replace all line breaks in a string with &lt;br /&gt; elements?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-replace-all-line-breaks-in-a-string-with-br-elements/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:07:27+08:00" itemprop="datePublished" title="2023-02-17 18:07">2023-02-17 18:07</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I read the line break from a value with JavaScript and replace all the
line breaks with <code>&lt;br /&gt;</code> elements?</p>
<p>Example:</p>
<p>A variable passed from PHP as below:</p>
<div class="code"><pre class="code literal-block">  "This is man.

     Man like dog.
     Man like to drink.

     Man is the king."
</pre></div>

<p>I would like my result to look something like this after the JavaScript
converts it:</p>
<div class="code"><pre class="code literal-block">  "This is man&lt;br /&gt;&lt;br /&gt;Man like dog.&lt;br /&gt;Man like to drink.&lt;br /&gt;&lt;br /&gt;Man is the king."
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>This will turn all returns into HTML</p>
<div class="code"><pre class="code literal-block">str = str.replace(/(?:\r\n|\r|\n)/g, '&lt;br&gt;');
</pre></div>

<p>In case you wonder what ?: means. It is called a non-capturing group. It means
that group of regex within the parentheses won't be saved in memory to be
referenced later. You can check out these threads for more information:<br>
https://stackoverflow.com/a/11530881/5042169
https://stackoverflow.com/a/36524555/5042169</p>
<p><br></p>
<h3>Suggest</h3>
<p>If your concern is just displaying linebreaks, you could do this with CSS.</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">style=</span><span class="s">"white-space: pre-line"</span><span class="nt">&gt;</span>Some<span class="w"> </span>test
with<span class="w"> </span>linebreaks<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>Jsfiddle: https://jsfiddle.net/5bvtL6do/2/</p>
<p><strong>Note</strong> : Pay attention to code formatting and indenting, since <code>white-space:
pre-line</code> will display <strong>all</strong> newlines (except for the last newline after the
text, see fiddle).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-prevent-conda-from-activating-the-base-environment-by-default/" class="u-url">How do I prevent Conda from activating the base environment by default?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-prevent-conda-from-activating-the-base-environment-by-default/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:06:59+08:00" itemprop="datePublished" title="2023-02-17 18:06">2023-02-17 18:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I recently installed anaconda2 on my Mac. By default Conda is configured to
activate the base environment when I open a fresh terminal session.</p>
<p>I want access to the Conda commands (i.e. I want the path to Conda added to my
<code>$PATH</code> which Conda does when initialised so that's fine).</p>
<p>However I don't ordinarily program in python, and I don't want Conda to
activate the base environment by default.</p>
<p>When first executing <code>conda init</code> from the prompt, Conda adds the following to
my <code>.bash_profile</code>:</p>
<div class="code"><pre class="code literal-block"><span class="c1"># &gt;&gt;&gt; conda initialize &gt;&gt;&gt;</span>
<span class="c1"># !! Contents within this block are managed by 'conda init' !!</span>
<span class="n">__conda_setup</span><span class="o">=</span><span class="s2">"$('/Users/geoff/anaconda2/bin/conda' 'shell.bash' 'hook' 2&gt; /dev/null)"</span>
<span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">$</span><span class="err">?</span><span class="w"> </span><span class="o">-</span><span class="n">eq</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">    </span><span class="n">eval</span><span class="w"> </span><span class="s2">"$__conda_setup"</span>
<span class="k">else</span>
<span class="k">if</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="s2">"/Users/geoff/anaconda2/etc/profile.d/conda.sh"</span><span class="w"> </span><span class="p">];</span><span class="w"> </span><span class="n">then</span>
<span class="w">    </span><span class="o">.</span><span class="w"> </span><span class="s2">"/Users/geoff/anaconda2/etc/profile.d/conda.sh"</span>
<span class="k">else</span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="n">PATH</span><span class="o">=</span><span class="s2">"/Users/geoff/anaconda2/bin:$PATH"</span>
<span class="n">fi</span>
<span class="c1"># fi</span>
<span class="n">unset</span><span class="w"> </span><span class="n">__conda_setup</span>
<span class="c1"># &lt;&lt;&lt; conda initialize &lt;&lt;&lt;</span>
</pre></div>

<p>If I comment out the whole block, then I can't activate any Conda
environments.</p>
<p>I tried to comment out the whole block except for</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">PATH</span><span class="o">=</span><span class="s2">"/Users/geoff/anaconda2/bin:$PATH"</span>
</pre></div>

<p>But then when I started a new session and tried to activate an environment, I
got this error message:</p>
<div class="code"><pre class="code literal-block"><span class="n">CommandNotFoundError</span><span class="o">:</span><span class="w"> </span><span class="n">Your</span><span class="w"> </span><span class="n">shell</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">properly</span><span class="w"> </span><span class="n">configured</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="s1">'conda activate'</span><span class="o">.</span>
</pre></div>

<p>This question (and others like it) are helpful, but doesn't ultimately answer
my question and is more suited for linux users.</p>
<p>To be clear, I'm not asking to remove the <code>(base)</code> from my <code>$PS1</code> I'm asking
for Conda not to activate base when I open a terminal session.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I have conda 4.6 with a similar block of code that was added by conda. In my
case, there's a conda configuration setting to disable the automatic base
activation:</p>
<div class="code"><pre class="code literal-block">conda config --set auto_activate_base false
</pre></div>

<p>The first time you run it, it'll create a <code>.condarc</code> in your home directory
with that setting to override the default.</p>
<p>This wouldn't de-clutter your <code>.bash_profile</code> but it's a cleaner solution
without manual editing that section that conda manages.</p>
<p><br></p>
<h3>Suggest</h3>
<p>There're 3 ways to achieve this after <code>conda</code> 4.6. (The last method has the
highest priority.)</p>
<ol>
<li>
<p>Use sub-command <code>conda config</code> to change the setting.</p>
<div class="code"><pre class="code literal-block">conda config --set auto_activate_base false
</pre></div>

</li>
<li>
<p>In fact, the former <code>conda config</code> sub-command is changing configuration file <code>.condarc</code>. We can modify <code>.condarc</code> directly. Add following content into <code>.condarc</code> under your home directory,</p>
<div class="code"><pre class="code literal-block"># auto_activate_base (bool)
</pre></div>

<h2>Automatically activate the base environment during shell</h2>
<h2>initialization. for <code>conda init</code>
</h2>
<p>auto_activate_base: false</p>
</li>
<li>
<p>Set environment variable <code>CONDA_AUTO_ACTIVATE_BASE</code> in the shell's init file. (<code>.bashrc</code> for bash, <code>.zshrc</code> for zsh)</p>
<div class="code"><pre class="code literal-block"><span class="k">export</span><span class="w"> </span><span class="n">CONDA_AUTO_ACTIVATE_BASE</span><span class="o">=</span><span class="bp">false</span>
</pre></div>

</li>
</ol>
<blockquote>
<p>To convert from the <code>condarc</code> file-based configuration parameter name to the
environment variable parameter name, make the name all <strong>uppercase</strong> and
<strong>prepend</strong> <code>CONDA_</code>. For example, conda’s <code>always_yes</code> configuration
parameter can be specified using a <code>CONDA_ALWAYS_YES</code> environment variable.</p>
</blockquote>
<p>The environment settings <strong>take precedence</strong> over corresponding settings in
<code>.condarc</code> file.</p>
<h4>References</h4>
<ul>
<li>The Conda Configuration Engine for Power Users</li>
<li>Using the .condarc conda configuration file</li>
<li><code>conda config --describe</code></li>
<li>Conda 4.6 Release</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-utf-8-and-unicode/" class="u-url">What is the difference between UTF-8 and Unicode?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-utf-8-and-unicode/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T18:06:31+08:00" itemprop="datePublished" title="2023-02-17 18:06">2023-02-17 18:06</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have heard conflicting opinions from people - according to the Wikipedia
UTF-8 page.</p>
<p>They are the same thing, aren't they? Can someone clarify?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To expand on the answers others have given:</p>
<p>We've got lots of languages with lots of characters that computers should
ideally display. Unicode assigns each character a unique number, or code
point.</p>
<p>Computers deal with such numbers as bytes... skipping a bit of history here
and ignoring memory addressing issues, 8-bit computers would treat an 8-bit
byte as the largest numerical unit easily represented on the hardware, 16-bit
computers would expand that to two bytes, and so forth.</p>
<p>Old character encodings such as ASCII are from the (pre-) 8-bit era, and try
to cram the dominant language in computing at the time, i.e. English, into
numbers ranging from 0 to 127 (7 bits). With 26 letters in the alphabet, both
in capital and non-capital form, numbers and punctuation signs, that worked
pretty well. ASCII got extended by an 8th bit for other, non-English
languages, but the additional 128 numbers/code points made available by this
expansion would be mapped to different characters depending on the language
being displayed. The ISO-8859 standards are the most common forms of this
mapping; ISO-8859-1 and ISO-8859-15 (also known as ISO-Latin-1, latin1, and
yes there are two different versions of the 8859 ISO standard as well).</p>
<p>But that's not enough when you want to represent characters from more than one
language, so cramming all available characters into a single byte just won't
work.</p>
<p>There are essentially two different types of encodings: one expands the value
range by adding more bits. Examples of these encodings would be UCS2 (2 bytes
= 16 bits) and UCS4 (4 bytes = 32 bits). They suffer from inherently the same
problem as the ASCII and ISO-8859 standards, as their value range is still
limited, even if the limit is vastly higher.</p>
<p>The other type of encoding uses a variable number of bytes per character, and
the most commonly known encodings for this are the UTF encodings. All UTF
encodings work in roughly the same manner: you choose a unit size, which for
UTF-8 is 8 bits, for UTF-16 is 16 bits, and for UTF-32 is 32 bits. The
standard then defines a few of these bits as flags: if they're set, then the
next unit in a sequence of units is to be considered part of the same
character. If they're not set, this unit represents one character fully. Thus
the most common (English) characters only occupy one byte in UTF-8 (two in
UTF-16, 4 in UTF-32), but other language characters can occupy six bytes or
more.</p>
<p>Multi-byte encodings (I should say multi-unit after the above explanation)
have the advantage that they are relatively space-efficient, but the downside
that operations such as finding substrings, comparisons, etc. all have to
decode the characters to unicode code points before such operations can be
performed (there are some shortcuts, though).</p>
<p>Both the UCS standards and the UTF standards encode the code points as defined
in Unicode. In theory, those encodings could be used to encode any number
(within the range the encoding supports) - but of course these encodings were
made to encode Unicode code points. And that's your relationship between them.</p>
<p>Windows handles so-called "Unicode" strings as UTF-16 strings, while most
UNIXes default to UTF-8 these days. Communications protocols such as HTTP tend
to work best with UTF-8, as the unit size in UTF-8 is the same as in ASCII,
and most such protocols were designed in the ASCII era. On the other hand,
UTF-16 gives the best <em>average</em> space/processing performance when representing
all living languages.</p>
<p>The Unicode standard defines fewer code points than can be represented in 32
bits. Thus for all practical purposes, UTF-32 and UCS4 became the same
encoding, as you're unlikely to have to deal with multi-unit characters in
UTF-32.</p>
<p>Hope that fills in some details.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Let me use an example to illustrate this topic:</p>
<div class="code"><pre class="code literal-block">A Chinese character:      汉
its Unicode value:        U+6C49
convert 6C49 to binary:   01101100 01001001
</pre></div>

<p>Nothing magical so far, it's very simple. Now, let's say we decide to store
this character on our hard drive. To do that, we need to store the character
in binary format. We can simply store it as is '01101100 01001001'. Done!</p>
<p>But wait a minute, is '01101100 01001001' one character or two characters? You
knew this is one character because I told you, but when a computer reads it,
it has no idea. So we need some sort of encoding to tell the computer to treat
it as one.</p>
<p>This is where the rules of UTF-8 come in:
https://www.fileformat.info/info/unicode/utf8.htm</p>
<div class="code"><pre class="code literal-block">Binary format of bytes in sequence

1st Byte    2nd Byte    3rd Byte    4th Byte    Number of Free Bits   Maximum Expressible Unicode Value
0xxxxxxx                                                7             007F hex (127)
110xxxxx    10xxxxxx                                (5+6)=11          07FF hex (2047)
1110xxxx    10xxxxxx    10xxxxxx                  (4+6+6)=16          FFFF hex (65535)
11110xxx    10xxxxxx    10xxxxxx    10xxxxxx    (3+6+6+6)=21          10FFFF hex (1,114,111)
</pre></div>

<p>According to the table above, if we want to store this character using the
UTF-8 format, we need to prefix our character with some 'headers'. Our Chinese
character is 16 bits long (count the binary value yourself), so we will use
the format on row 3 as it provides enough space:</p>
<div class="code"><pre class="code literal-block">Header  Place holder    Fill in our Binary   Result         
1110    xxxx            0110                 11100110
10      xxxxxx          110001               10110001
10      xxxxxx          001001               10001001
</pre></div>

<p>Writing out the result in one line:</p>
<div class="code"><pre class="code literal-block"><span class="mf">11100110</span><span class="w"> </span><span class="mf">10110001</span><span class="w"> </span><span class="mf">10001001</span>
</pre></div>

<p>This is the UTF-8 binary value of the Chinese character! See for yourself:
https://www.fileformat.info/info/unicode/char/6c49/index.htm</p>
<h3>Summary</h3>
<div class="code"><pre class="code literal-block">A Chinese character:      汉
its Unicode value:        U+6C49
convert 6C49 to binary:   01101100 01001001
encode 6C49 as UTF-8:     11100110 10110001 10001001
</pre></div>

<p>P.S. If you want to learn this topic in Python, click here.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-868.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-866.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
