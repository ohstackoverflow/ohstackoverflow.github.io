<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 240) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-240.html">
<link rel="prev" href="index-241.html" type="text/html">
<link rel="next" href="index-239.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ru-he-jiang-tu-li-zhi-yu-qing-jie-zhi-wai/" class="u-url">如何将图例置于情节之外</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ru-he-jiang-tu-li-zhi-yu-qing-jie-zhi-wai/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:51:57+08:00" itemprop="datePublished" title="2023-02-17 01:51">2023-02-17 01:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我有一系列 20 个图（不是子图）要在一个图中制作。我希望图例跳出框框。同时，我不想改变坐标轴，因为图形的尺寸变小了。</p>
<ol>
<li>我想将图例框保留在绘图区域之外（我希望图例位于绘图区域右侧的外面）。</li>
<li>有没有办法把图例框里面的文字的字号调小，这样图例框的字号就会变小？</li>
</ol>
<p><br><br></p>
<h2>解答</h2>
<ul>
<li>You can make the legend text smaller by specifying <code>set_size</code> of <code>FontProperties</code>.</li>
<li>
<p>Resources: </p>
<ul>
<li>Legend guide</li>
<li><code>matplotlib.legend</code></li>
<li><code>matplotlib.pyplot.legend</code></li>
<li><code>matplotlib.font_manager</code></li>
<li><code>set_size(self, size)</code></li>
<li>Valid font size are <em>xx-small</em> , <em>x-small</em> , <em>small</em> , <em>medium</em> , <em>large</em> , <em>x-large</em> , <em>xx-large</em> , <em>larger</em> , <em>smaller</em> , and <em>None</em>.</li>
<li>Real Python: Python Plotting With Matplotlib (Guide)</li>
</ul>
<p>import matplotlib.pyplot as plt
from matplotlib.font_manager import FontProperties</p>
<p>fontP = FontProperties()
fontP.set_size('xx-small')</p>
<p>p1, = plt.plot([1, 2, 3], label='Line 1')
p2, = plt.plot([3, 2, 1], label='Line 2')
plt.legend(handles=[p1, p2], title='title', bbox_to_anchor=(1.05, 1), loc='upper left', prop=fontP)</p>
</li>
</ul>
<p><img alt="Enter image description here" src="images/OMgiC.png"></p>
<ul>
<li>
<p><code>fontsize='xx-small'</code> also works, without importing <code>FontProperties</code>.</p>
<p>plt.legend(handles=[p1, p2], title='title', bbox_to_anchor=(1.05, 1), loc='upper left', fontsize='xx-small')</p>
</li>
</ul>
<p><br></p>
<h3>更多建议</h3>
<h3>放置图例 ( <code>bbox_to_anchor</code>)</h3>
<p><code>loc</code>使用 的参数将图例定位在轴的边界框内<code>plt.legend</code>。<br>
例如，<code>loc="upper right"</code>将图例放置在边界框的右上角，默认情况下，坐标轴坐标（或边界框符号）的范围从<code>(0, 0)</code>到。<code>(1,
1)``(x0, y0, width, height) = (0, 0, 1, 1)</code></p>
<p>要将图例放置在轴边界框之外，可以指定<code>(x0, y0)</code>图例左下角的轴坐标元组。</p>
<div class="code"><pre class="code literal-block">plt.legend(loc=(1.04, 0))
</pre></div>

<p>一种更通用的方法是使用参数手动指定应该放置图例的边界框 <strong><code>bbox_to_anchor</code></strong> 。可以限制自己只提供<code>(x0, y0)</code>bbox
的一部分。这将创建一个零跨度框，图例将从该框向参数指定的方向扩展<code>loc</code>。例如，</p>
<hr>
<div class="code"><pre class="code literal-block">**plt.legend(bbox_to_anchor=(1.04, 1), loc="左上角")**
</pre></div>

<p>将图例放在坐标区外，这样图例的左上角就位于<code>(1.04, 1)</code>坐标区坐标中的位置。</p>
<p>下面给出了更多示例，其中还显示了不同参数之间的相互作用，例如<code>mode</code>和。<code>ncols</code></p>
<p><img alt="在此处输入图像描述" src="images/OIMyM.png"></p>
<div class="code"><pre class="code literal-block">l1 = plt.legend(bbox_to_anchor=(1.04, 1), borderaxespad=0)
l2 = plt.legend(bbox_to_anchor=(1.04, 0), loc="lower left", borderaxespad=0)
l3 = plt.legend(bbox_to_anchor=(1.04, 0.5), loc="center left", borderaxespad=0)
l4 = plt.legend(bbox_to_anchor=(0, 1.02, 1, 0.2), loc="lower left",
                mode="expand", borderaxespad=0, ncol=3)
l5 = plt.legend(bbox_to_anchor=(1, 0), loc="lower right",
                bbox_transform=fig.transFigure, ncol=3)
l6 = plt.legend(bbox_to_anchor=(0.4, 0.8), loc="upper right")
</pre></div>

<p>有关如何解释 4 元组参数的详细信息<code>bbox_to_anchor</code>，如中所示，可以在这个问题<code>l4</code>中找到。在 4
元组给定的边界框内水平扩展图例。对于垂直展开的图例，请参阅此问题。<code>mode="expand"</code></p>
<p>有时在图形坐标而不是轴坐标中指定边界框可能很有用。<code>l5</code>这在上面的示例中显示，其中<code>bbox_transform</code>参数用于将图例放在图的左下角。</p>
<h4>后期处理</h4>
<p>将图例放置在坐标轴之外通常会导致出现完全或部分位于图形画布之外的不良情况。</p>
<p>这个问题的解决方案是：</p>
<ul>
<li>
<strong>调整子图参数</strong> <br>
可以调整子图参数，使轴在图中占用更少的空间（从而为图例留出更多空间），方法是使用<code>plt.subplots_adjust</code>. 例如，<div class="code"><pre class="code literal-block">plt.subplots_adjust(right=0.7)
</pre></div>

</li>
</ul>
<p>在图的右侧留出 30% 的空间，可以放置图例。</p>
<ul>
<li>
<p><strong>紧密布局</strong> <br>
使用<code>plt.tight_layout</code>允许自动调整子图参数，使图形中的元素紧靠图形边缘。不幸的是，在这种自动化中没有考虑到图例，但我们可以提供一个矩形框，整个子图区域（包括标签）都可以放入其中。</p>
<div class="code"><pre class="code literal-block">plt.tight_layout(rect=[0, 0, 0.75, 1])
</pre></div>

</li>
<li>
<p><strong><code>bbox_inches = "tight"</code></strong> <br>
使用参数 <strong>保存图形</strong><code>bbox_inches =
"tight"</code>可<code>plt.savefig</code>用于保存图形，以便画布上的所有艺术家（包括图例）都适合保存的区域。如果需要，图形大小会自动调整。</p>
<div class="code"><pre class="code literal-block">plt.savefig("output.png", bbox_inches="tight")
</pre></div>

</li>
<li>
<p><strong>自动调整子图参数</strong> 在这个答案中可以找到<br>
一种自动调整子图位置以使图例适合画布 <strong>而不改变图形大小的方法：</strong> <em>Creating figure with exact size and no
padding (and legend outside the axes)</em></p>
</li>
</ul>
<p>上述案例的比较：</p>
<p><img alt="在此处输入图像描述" src="images/zqKjY.png"></p>
<h3>备择方案</h3>
<p><strong>人物传奇</strong></p>
<p>人们可以使用图例代替轴，<code>matplotlib.figure.Figure.legend</code>。这对于不需要特殊参数的 Matplotlib 2.1
版或更高版本特别有用</p>
<div class="code"><pre class="code literal-block">fig.legend(loc=7)
</pre></div>

<p>为人物不同轴上的所有艺术家创造一个传奇。图例是使用<code>loc</code>参数放置的，类似于它放置在轴内的方式，但参考整个图形 -
因此它会自动位于轴外。剩下的就是调整子图，使图例和轴之间没有重叠。 <em>上面的“调整子图​​参数”</em> 这一点会有所帮助。一个例子：</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="kp">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"#7aa0c4"</span><span class="p">,</span> <span class="s2">"#ca82e1"</span><span class="p">,</span> <span class="s2">"#8bcd50"</span><span class="p">,</span> <span class="s2">"#e18882"</span><span class="p">]</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="o">//</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="kp">sin</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">i</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">"y=sin(x + </span><span class="si">{}</span><span class="s2">)"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="n">fig</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">right</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<p><img alt="在此处输入图像描述" src="images/v1AU6.png"></p>
<p><strong>专用子图轴内的图例</strong></p>
<p>另一种使用方法<code>bbox_to_anchor</code>是将图例放置在其专用的子图轴 ( <code>lax</code>)
中。由于图例子图应小于图，我们可以<code>gridspec_kw={"width_ratios":[4,
1]}</code>在创建轴时使用。我们可以隐藏轴<code>lax.axis("off")</code>，但我们仍然在其中放入图例。图例句柄和标签需要从真实图 via 中获取<code>h, l =
ax.get_legend_handles_labels()</code>，然后可以提供给子<code>lax</code>图中的图例，<code>lax.legend(h,
l)</code>。下面是一个完整的例子。</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">"figure.figsize"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span>

<span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">lax</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">gridspec_kw</span><span class="o">=</span><span class="p">{</span><span class="s2">"width_ratios"</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">"y=sin(x)"</span><span class="p">)</span>
<span class="o">....</span>

<span class="n">h</span><span class="p">,</span> <span class="n">l</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_legend_handles_labels</span><span class="p">()</span>
<span class="n">lax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">borderaxespad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">lax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">"off"</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<p>这会产生一个视觉上与上面的图非常相似的图：</p>
<p><img alt="在此处输入图像描述" src="images/4RrYb.png"></p>
<p>我们也可以使用第一个轴来放置图例，但是使用<code>bbox_transform</code>图例轴的，</p>
<div class="code"><pre class="code literal-block">ax.legend(bbox_to_anchor=(0, 0, 1, 1), bbox_transform=lax.transAxes)
lax.axis("off")
</pre></div>

<p>在这种方法中，我们不需要从外部获取图例句柄，但需要指定参数<code>bbox_to_anchor</code>。</p>
<h4>进一步阅读和注意事项：</h4>
<ul>
<li>Consider the Matplotlib legend guide with some examples of other stuff you want to do with legends.</li>
<li>Some example code for placing legends for pie charts may directly be found in answer to this question: Python - Legend overlaps with the pie chart</li>
<li>The <code>loc</code> argument can take numbers instead of strings, which make calls shorter, however, they are not very intuitively mapped to each other. Here is the mapping for reference:</li>
</ul>
<p><img alt="在此处输入图像描述" src="images/jxecX.png"></p>
<p><br><br><a href="posts/how-to-put-the-legend-outside-the-plot/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/wei-shi-yao-zi-guan-bi-jiao-ben-yuan-su-bu-qi-zuo-yong/" class="u-url">为什么自关闭脚本元素不起作用？</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/wei-shi-yao-zi-guan-bi-jiao-ben-yuan-su-bu-qi-zuo-yong/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:51:12+08:00" itemprop="datePublished" title="2023-02-17 01:51">2023-02-17 01:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>浏览器无法正确识别的原因是什么：</p>
<div class="code"><pre class="code literal-block"><span class="o">&lt;</span><span class="n">script</span><span class="w"> </span><span class="n">src</span><span class="o">=</span><span class="s">"foobar.js"</span><span class="w"> </span><span class="o">/&gt;</span><span class="w"> </span><span class="o">&lt;!--</span><span class="w"> </span><span class="kr">self</span><span class="o">-</span><span class="n">closing</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="o">--&gt;</span>
</pre></div>

<p>只有这个被认可：</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;script</span><span class="w"> </span><span class="na">src=</span><span class="s">"foobar.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>

<p>这是否打破了 XHTML 支持的概念？</p>
<p>注意：此声明至少对所有 IE (6-8 beta 2) 都是正确的。</p>
<p><br><br></p>
<h2>解答</h2>
<p>XHTML 1 规范的非规范性附录“HTML Compatibility Guidelines”说：</p>
<p>С.3。元素最小化和空元素内容</p>
<blockquote>
<p>给定一个内容模型不是的元素的空实例<code>EMPTY</code>（例如，一个空的标题或段落）不要使用最小化形式（例如 use<code>&lt;p&gt; &lt;/p&gt;</code>和 not <code>&lt;p
/&gt;</code>）。</p>
</blockquote>
<p>XHTML DTD将脚本元素指定为：</p>
<div class="code"><pre class="code literal-block"><span class="c">&lt;!-- script statements, which may include CDATA sections --&gt;</span>
<span class="k">&lt;!ELEMENT</span> <span class="nt">script</span> <span class="o">(</span><span class="kc">#PCDATA</span><span class="o">)</span><span class="k">&gt;</span>
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>补充一下 Brad 和 squadette 所说的，自闭合 XML 语法<code>&lt;script /&gt;</code>实际上 <strong>是</strong> 正确的
XML，但要使其在实践中起作用，您的 Web 服务器还需要将您的文档作为格式正确的 XML 发送，并带有 XML
mimetype，如<code>application/xhtml+xml</code>HTTP Content-Type 标头（而 <em>不是</em> as <code>text/html</code>）。</p>
<p>但是，发送 XML mimetype 将导致您的页面无法被 IE7 解析，IE7 只喜欢<code>text/html</code>.</p>
<p>来自w3：</p>
<blockquote>
<p>总之，“application/xhtml+xml”应该用于 XHTML Family 文档，而“text/html”的使用应该限于 HTML 兼容的
XHTML 1.0
文档。也可以使用“application/xml”和“text/xml”，但在适当的时候，应该使用“application/xhtml+xml”而不是那些通用的
XML 媒体类型。</p>
</blockquote>
<p>几个月前我对此感到困惑，唯一可行的（与 FF3+ 和 IE7
兼容）解决方案是将旧语法<code>&lt;script&gt;&lt;/script&gt;</code>与<code>text/html</code>（HTML 语法 + HTML mimetype）一起使用。</p>
<p>如果您的服务器<code>text/html</code>在其 HTTP 标头中发送类型，即使使用其他格式正确的 XHTML 文档，FF3+ 将使用其 HTML
呈现模式，这意味着这将<code>&lt;script /&gt;</code>不起作用（这是一个变化，Firefox 以前不那么严格）。</p>
<p>无论<code>http-equiv</code>元元素、文档中的 XML prolog 或 doctype 有任何摆弄，都会发生这种情况——Firefox
在获取标头后进行分支<code>text/html</code>，这决定了 HTML 或 XML 解析器是否在文档内部查找，而 HTML 解析器不理解<code>&lt;script /&gt;</code>。</p>
<p><br><br><a href="posts/why-don-t-self-closing-script-elements-work/">查看原文</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/mei-you-zhi-ding-fen-zhi-de-git-push-de-mo-ren-xing-wei/" class="u-url">没有指定分支的“git push”的默认行为</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/mei-you-zhi-ding-fen-zhi-de-git-push-de-mo-ren-xing-wei/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:50:45+08:00" itemprop="datePublished" title="2023-02-17 01:50">2023-02-17 01:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>我使用以下命令推送到我的远程分支：</p>
<div class="code"><pre class="code literal-block">git push origin sandbox
</pre></div>

<p>如果我说</p>
<div class="code"><pre class="code literal-block">git push origin
</pre></div>

<p>这是否也会推动我其他分支的更改，或者它是否只更新我当前的分支？我有三个分支：<code>master</code>,<code>production</code>和<code>sandbox</code>.</p>
<p>文档<code>git push</code>对此不是很清楚，所以我想彻底澄清一下。</p>
<p>以下<code>git push</code>命令准确更新了哪些分支和远程？</p>
<div class="code"><pre class="code literal-block">git push 
git push origin
</pre></div>

<p><code>origin</code>上面是遥控器。</p>
<p>我知道这<code>git push [remote] [branch]</code>只会将该分支推送到远程。</p>
<p><br><br></p>
<h2>解答</h2>
<p>您可以通过在 git 配置中设置 push.default 来控制默认行为。来自git-config(1) 文档：</p>
<div class="code"><pre class="code literal-block">push.default
</pre></div>

<p>定义 git push 在命令行上没有给出 refspec 时应该采取的操作，远程中没有配置 refspec，并且命令行上给出的任何选项都没有暗示
refspec。可能的值是：</p>
<ul>
<li>
<p><code>nothing</code>: 不要推任何东西</p>
</li>
<li>
<p><code>matching</code>: (Git 2.0 之前默认) 推送所有匹配的分支</p>
</li>
</ul>
<p>两端具有相同名称的所有分支都被认为是匹配的。</p>
<ul>
<li>
<p><code>upstream</code>：将当前分支推送到其上游分支（<code>tracking</code>是上游的已弃用同义词）</p>
</li>
<li>
<p><code>current</code>: 将当前分支推送到同名分支</p>
</li>
<li>
<p><code>simple</code>: (Git 1.7.11 中的新功能，Git 2.0 后的默认设置) 喜欢上游，但如果上游分支的名称与本地分支的名称不同，则拒绝推送</p>
</li>
</ul>
<p>这是最安全的选择，非常适合初学者。</p>
<blockquote>
<p>简单、当前和上游模式适用于那些希望在完成工作后推出单个分支的人，即使其他分支尚未准备好推出</p>
</blockquote>
<p>命令行示例：</p>
<p>查看当前配置：</p>
<div class="code"><pre class="code literal-block">git config push.default
</pre></div>

<p>要设置新配置：</p>
<div class="code"><pre class="code literal-block">git config push.default current
</pre></div>

<p><br></p>
<h3>更多建议</h3>
<p>你可以使用 push.default 为你的 git 设置默认行为</p>
<div class="code"><pre class="code literal-block">git config push.default current
</pre></div>

<p>或者如果你有很多存储库并且想要所有存储库都一样</p>
<div class="code"><pre class="code literal-block">git config --global push.default current
</pre></div>

<p>此设置中的current意味着默认情况下您只会在执行 <strong>git push</strong> <strong>时</strong> <strong>推送当前分支</strong> ****</p>
<p>其他选项是：</p>
<ul>
<li>nothing : 不要推任何东西</li>
<li>匹配：推送所有匹配的分支（默认）</li>
<li>tracking ：将当前分支推送到它正在跟踪的任何地方</li>
<li>current : 推送当前分支</li>
</ul>
<hr>
<p><strong>更新 - 执行此操作的新方法</strong></p>
<p>从 Git 1.7.11 开始，执行以下操作：</p>
<div class="code"><pre class="code literal-block">git config --global push.default simple
</pre></div>

<p>这是一个新引入的设置，其工作方式与当前相同，并且根据谣言将默认为 v 2.0 中的 git</p>
<p><br><br><a href="posts/default-behavior-of-git-push-without-a-branch-specified/">查看原文</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-241.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-239.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
