<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2797) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2797.html">
<link rel="prev" href="index-2798.html" type="text/html">
<link rel="next" href="index-2796.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/accurate-way-to-measure-execution-times-of-php-scripts/" class="u-url">Accurate way to measure execution times of php scripts</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/accurate-way-to-measure-execution-times-of-php-scripts/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T18:38:47+08:00" itemprop="datePublished" title="2023-03-05 18:38">2023-03-05 18:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I want to know how many milliseconds a PHP for-loop takes to execute.</p>
<p>I know the structure of a generic algorithm, but no idea how to implement it
in PHP:</p>
<div class="code"><pre class="code literal-block"><span class="nv">Begin</span>
<span class="nv">init1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">timer</span><span class="ss">()</span><span class="c1">; // where timer() is the amount of milliseconds from midnight</span>
<span class="nv">the</span><span class="w"> </span><span class="k">loop</span><span class="w"> </span><span class="nv">begin</span>
<span class="nv">some</span><span class="w"> </span><span class="nv">code</span>
<span class="nv">the</span><span class="w"> </span><span class="k">loop</span><span class="w"> </span><span class="k">end</span>
<span class="nv">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">timer</span><span class="ss">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">init1</span><span class="c1">;</span>
<span class="k">End</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>You can use the <code>microtime</code> function for this. From the documentation:</p>
<blockquote>
<p><code>microtime</code> — Return current Unix timestamp with microseconds</p>
<hr>
<p>If <code>get_as_float</code> is set to <code>TRUE</code>, then <code>microtime()</code> returns a float,
which represents the current time in seconds since the Unix epoch accurate
to the nearest microsecond.</p>
</blockquote>
<p>Example usage:</p>
<div class="code"><pre class="code literal-block">$<span class="nv">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">microtime</span><span class="ss">(</span><span class="nv">true</span><span class="ss">)</span><span class="c1">;</span>
<span class="k">while</span><span class="w"> </span><span class="ss">(</span>...<span class="ss">)</span><span class="w"> </span>{

}
$<span class="nv">time_elapsed_secs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">microtime</span><span class="ss">(</span><span class="nv">true</span><span class="ss">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span>$<span class="nv">start</span><span class="c1">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You can use <code>microtime(true)</code> with following manners:</p>
<p>Put this at the start of your php file:</p>
<div class="code"><pre class="code literal-block"><span class="c1">//place this before any script you want to calculate time</span>
<span class="no">$</span><span class="n">time_start</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">microtime</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
</pre></div>

<p>// your script code goes here</p>
<div class="code"><pre class="code literal-block"><span class="c1">// do something</span>
</pre></div>

<p>Put this at the end of your php file:</p>
<div class="code"><pre class="code literal-block">//<span class="w"> </span>Display<span class="w"> </span>Script<span class="w"> </span>End<span class="w"> </span>time
$time_end<span class="w"> </span>=<span class="w"> </span>microtime(true);

//dividing<span class="w"> </span>with<span class="w"> </span>60<span class="w"> </span>will<span class="w"> </span>give<span class="w"> </span>the<span class="w"> </span>execution<span class="w"> </span>time<span class="w"> </span>in<span class="w"> </span>minutes<span class="w"> </span>other<span class="w"> </span>wise<span class="w"> </span>seconds
$execution_time<span class="w"> </span>=<span class="w"> </span>($time_end<span class="w"> </span>-<span class="w"> </span>$time_start)/60;

//execution<span class="w"> </span>time<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>script
echo<span class="w"> </span>'<span class="nt">&lt;b&gt;</span>Total<span class="w"> </span>Execution<span class="w"> </span>Time:<span class="nt">&lt;/b&gt;</span><span class="w"> </span>'.$execution_time.'<span class="w"> </span>Mins';
</pre></div>

<p>It will output you result in <code>minutes</code>.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-detect-if-app-is-being-built-for-device-or-simulator-in-swift/" class="u-url">How to detect if app is being built for device or simulator in Swift</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-detect-if-app-is-being-built-for-device-or-simulator-in-swift/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T18:37:14+08:00" itemprop="datePublished" title="2023-03-05 18:37">2023-03-05 18:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Objective-C we can know if an app is being built for device or simulator
using macros:</p>
<div class="code"><pre class="code literal-block">#<span class="k">if</span><span class="w"> </span><span class="nv">TARGET_IPHONE_SIMULATOR</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">Simulator</span>
#<span class="k">else</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="nv">Device</span>
#<span class="k">endif</span>
</pre></div>

<p>These are compile time macros and not available at runtime.</p>
<p><strong>How can I achieve the same in Swift?</strong></p>
<p><br><br></p>
<h2>Answer</h2>
<h2>Update 30/01/19</h2>
<p>While this answer may work, the recommended solution for a static check (as
clarified by several Apple engineers) is to define a custom compiler flag
targeting iOS Simulators. For detailed instructions on how to do to it, see
@mbelsky's answer.</p>
<h4>Original answer</h4>
<p>If you need a static check (e.g. not a runtime if/else) you can't detect the
simulator directly, but you can detect iOS on a desktop architecture like
follows</p>
<div class="code"><pre class="code literal-block">#<span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">arch</span><span class="ss">(</span><span class="nv">i386</span><span class="ss">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">arch</span><span class="ss">(</span><span class="nv">x86_64</span><span class="ss">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">os</span><span class="ss">(</span><span class="nv">iOS</span><span class="ss">)</span>
<span class="w">    </span>...
#<span class="k">endif</span>
</pre></div>

<hr>
<p><em>After <strong>Swift 4.1</strong> version</em></p>
<blockquote>
<p><strong>Latest use, now directly for all in one condition for all types of
simulators need to apply only one condition -</strong></p>
</blockquote>
<div class="code"><pre class="code literal-block">#<span class="k">if</span><span class="w"> </span><span class="nv">targetEnvironment</span><span class="ss">(</span><span class="nv">simulator</span><span class="ss">)</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">simulator</span><span class="w"> </span><span class="nv">code</span>
#<span class="k">else</span>
<span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nv">your</span><span class="w"> </span><span class="nv">real</span><span class="w"> </span><span class="nv">device</span><span class="w"> </span><span class="nv">code</span>
#<span class="k">endif</span>
</pre></div>

<p><em>For more clarification, you can check <strong>Swift</strong> proposal SE-0190</em></p>
<hr>
<blockquote>
<p><strong>For older version</strong> -</p>
</blockquote>
<p>Clearly, this is false on a device, but it returns true for the iOS Simulator,
as specified in the documentation:</p>
<blockquote>
<p>The arch(i386) build configuration returns true when the code is compiled
for the 32–bit iOS simulator.</p>
</blockquote>
<p>If you are developing for a simulator other than iOS, you can simply vary the
<code>os</code> parameter: e.g.</p>
<p>Detect the <strong>watchOS</strong> simulator</p>
<div class="code"><pre class="code literal-block">#<span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">arch</span><span class="ss">(</span><span class="nv">i386</span><span class="ss">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">arch</span><span class="ss">(</span><span class="nv">x86_64</span><span class="ss">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">os</span><span class="ss">(</span><span class="nv">watchOS</span><span class="ss">)</span>
...
#<span class="k">endif</span>
</pre></div>

<p>Detect the <strong>tvOS</strong> simulator</p>
<div class="code"><pre class="code literal-block">#<span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">arch</span><span class="ss">(</span><span class="nv">i386</span><span class="ss">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">arch</span><span class="ss">(</span><span class="nv">x86_64</span><span class="ss">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">os</span><span class="ss">(</span><span class="nv">tvOS</span><span class="ss">)</span>
...
#<span class="k">endif</span>
</pre></div>

<p>Or, even, detect <strong>any</strong> simulator</p>
<div class="code"><pre class="code literal-block">#<span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">arch</span><span class="ss">(</span><span class="nv">i386</span><span class="ss">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">arch</span><span class="ss">(</span><span class="nv">x86_64</span><span class="ss">))</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="ss">(</span><span class="nv">os</span><span class="ss">(</span><span class="nv">iOS</span><span class="ss">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">os</span><span class="ss">(</span><span class="nv">watchOS</span><span class="ss">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">os</span><span class="ss">(</span><span class="nv">tvOS</span><span class="ss">))</span>
...
#<span class="k">endif</span>
</pre></div>

<hr>
<p>If you instead are ok with a runtime check, you can inspect the
<code>TARGET_OS_SIMULATOR</code> variable (or <code>TARGET_IPHONE_SIMULATOR</code> in iOS 8 and
below), which is truthy on a simulator.</p>
<p>Please notice that this is different and slightly more limited than using a
preprocessor flag. For instance you won't be able to use it in place where a
<code>if/else</code> is syntactically invalid (e.g. outside of functions scopes).</p>
<p>Say, for example, that you want to have different imports on the device and on
the simulator. This is impossible with a dynamic check, whereas it's trivial
with a static check.</p>
<div class="code"><pre class="code literal-block"><span class="c1">#if (arch(i386) || arch(x86_64)) &amp;&amp; os(iOS)</span>
  <span class="kn">import</span> <span class="nn">Foo</span>
<span class="c1">#else</span>
  <span class="kn">import</span> <span class="nn">Bar</span>
<span class="c1">#endif</span>
</pre></div>

<p>Also, since the flag is replaced with a <code>0</code> or a <code>1</code> by the swift
preprocessor, if you directly use it in a <code>if/else</code> expression the compiler
will raise a warning about unreachable code.</p>
<p>In order to work around this warning, see one of the other answers.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>OUTDATED FOR SWIFT 4.1.</strong> Use <code>#if targetEnvironment(simulator)</code> instead.
Source</p>
<p>To detect simulator in Swift you can use build configuration:</p>
<ul>
<li>Define this configuration <strong>-D IOS_SIMULATOR</strong> in <em>Swift Compiler - Custom Flags &gt; Other Swift Flags</em>
</li>
<li>Select <em>Any iOS Simulator SDK</em> in this drop down <img alt="Drop down list" src="images/0m8az.png">
</li>
</ul>
<p>Now you could use this statement to detect simulator:</p>
<div class="code"><pre class="code literal-block">#<span class="k">if</span><span class="w"> </span><span class="nv">IOS_SIMULATOR</span>
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"It's an iOS Simulator"</span><span class="ss">)</span>
#<span class="k">else</span>
<span class="w">    </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"It's a device"</span><span class="ss">)</span>
#<span class="k">endif</span>
</pre></div>

<p>Also you could extend UIDevice class:</p>
<div class="code"><pre class="code literal-block"><span class="n">extension</span><span class="w"> </span><span class="n">UIDevice</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">isSimulator</span><span class="p">:</span><span class="w"> </span><span class="n">Bool</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">#if IOS_SIMULATOR</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="bp">true</span>
<span class="w">        </span><span class="c1">#else</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="bp">false</span>
<span class="w">        </span><span class="c1">#endif</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="o">//</span><span class="w"> </span><span class="n">Example</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">usage</span><span class="p">:</span><span class="w"> </span><span class="n">UIDevice</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="n">isSimulator</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/pagination-in-a-rest-web-application/" class="u-url">Pagination in a REST web application</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/pagination-in-a-rest-web-application/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T18:35:47+08:00" itemprop="datePublished" title="2023-03-05 18:35">2023-03-05 18:35</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>This is a more generic reformulation of this question (with the elimination of
the Rails specific parts)</p>
<p>I am not sure how to implement pagination on a resource in a RESTful web
application. Assuming that I have a resource called <code>products</code>, which of the
following do you think is the best approach, and why:</p>
<h3>1. Using only query strings</h3>
<p>eg. <code>http://application/products?page=2&amp;sort_by=date&amp;sort_how=asc</code><br>
The problem here is that I can't use full page caching and also the URL is not
very clean and easy to remember.</p>
<h3>2. Using pages as resources and query strings for sorting</h3>
<p>eg. <code>http://application/products/page/2?sort_by=date&amp;sort_how=asc</code><br>
In this case, the problem that is see is that
<code>http://application/products/pages/1</code> is not a unique resource since using
<code>sort_by=price</code> can yield a totally different result <em>and</em> I still can't use
page caching.</p>
<h3>3. Using pages as resources and an URL segment for sorting</h3>
<p>eg. <code>http://application/products/by-date/page/2</code><br>
I personally see no problem in using this method, but someone warned me that
this is not a good way to go (he didn't give a reason, so if you know <em>why</em>
it's not recommended, please let me know)</p>
<p><em>Any</em> suggestions, opinions, critiques are more than welcome. Thanks.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I think the problem with version 3 is more a "point of view" problem - do you
see the page as the resource or the products on the page.</p>
<p>If you see the page as the resource it is a perfectly fine solution, since the
query for page 2 will always yield page 2.</p>
<p>But if you see the products on the page as the resource you have the problem
that the products on page 2 might change (old products deleted, or whatever),
in this case the URI is not always returning the same resource(s).</p>
<p>E.g. A customer stores a link to the product list page X, next time the link
is opened the product in question might no longer be on page X.</p>
<p><br></p>
<h3>Suggest</h3>
<p>I think the problem with version 3 is more a "point of view" problem - do you
see the page as the resource or the products on the page.</p>
<p>If you see the page as the resource it is a perfectly fine solution, since the
query for page 2 will always yield page 2.</p>
<p>But if you see the products on the page as the resource you have the problem
that the products on page 2 might change (old products deleted, or whatever),
in this case the URI is not always returning the same resource(s).</p>
<p>E.g. A customer stores a link to the product list page X, next time the link
is opened the product in question might no longer be on page X.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2798.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2796.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
