<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 121) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-121.html">
<link rel="prev" href="index-122.html" type="text/html">
<link rel="next" href="index-120.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-a-javabean-exactly/" class="u-url">What is a JavaBean exactly?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-a-javabean-exactly/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T21:59:09+08:00" itemprop="datePublished" title="2023-02-16 21:59">2023-02-16 21:59</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I understood, I think, that a "Bean" is a Java-class with properties and
getters/setters.<br>
As much as I understand, it is the equivalent of a C <code>struct</code>. Is that true?</p>
<p>Also, is there a real <em>syntactic</em> difference between a <code>JavaBean</code> and a
regular <code>class</code>?<br>
Is there any special definition or an <code>Interface</code>?</p>
<p>Basically, why is there a term for this?</p>
<p>Also what does the <code>Serializable</code> interface mean?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>A JavaBean is just a standard. It is a regular Java <code>class</code>, except it follows
certain conventions:</p>
<ol>
<li>All properties are private (use getters/setters)</li>
<li>A public no-argument constructor</li>
<li>Implements <code>Serializable</code>.</li>
</ol>
<p>That's it. It's just a convention. Lots of libraries depend on it though.</p>
<p>With respect to <code>Serializable</code>, from the API documentation:</p>
<blockquote>
<p>Serializability of a class is enabled by the class implementing the
java.io.Serializable interface. Classes that do not implement this interface
will not have any of their state serialized or deserialized. All subtypes of
a serializable class are themselves serializable. The serialization
interface has no methods or fields and serves only to identify the semantics
of being serializable.</p>
</blockquote>
<p>In other words, serializable objects can be written to streams, and hence
files, object databases, anything really.</p>
<p>Also, there is no syntactic difference between a JavaBean and another class --
a class is a JavaBean if it follows the standards.</p>
<p>There is a term for it, because the standard allows libraries to
programmatically do things with class instances you define in a predefined
way. For example, if a library wants to stream any object you pass into it, it
knows it can because your object is serializable (assuming the library
requires your objects be proper JavaBeans).</p>
<p><br></p>
<h3>Suggest</h3>
<p>There's a term for it to make it sound special. The reality is nowhere near so
mysterious.</p>
<p>Basically, a "Bean":</p>
<ul>
<li>is a serializable object (that is, it implements <code>java.io.Serializable</code>, and does so correctly), that</li>
<li>has "properties" whose getters and setters are just methods with certain names (like, say, <code>getFoo()</code> is the getter for the "Foo" property), and</li>
<li>has a public zero-argument constructor (so it can be created at will and configured by setting its properties).</li>
</ul>
<p>As for <code>Serializable</code>: That is nothing but a "marker interface" (an interface
that doesn't declare any functions) that tells Java that the implementing
class consents to (and implies that it is capable of) "serialization" -- a
process that converts an instance into a stream of bytes. Those bytes can be
stored in files, sent over a network connection, etc., and have enough
information to allow a JVM (at least, one that knows about the object's type)
to reconstruct the object later -- possibly in a different instance of the
application, or even on a whole other machine!</p>
<p>Of course, in order to do that, the class has to abide by certain limitations.
Chief among them is that all instance fields must be either primitive types
(int, bool, etc.), instances of some class that is also serializable, or
marked as <code>transient</code> so that Java won't try to include them. (This of course
means that <code>transient</code> fields will not survive the trip over a stream. A class
that has <code>transient</code> fields should be prepared to reinitialize them if
necessary.)</p>
<p>A class that can not abide by those limitations should not implement
<code>Serializable</code> (and, IIRC, the Java compiler won't even <em>let</em> it do so.)</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/why-doesn-t-gcc-optimize-a-a-a-a-a-a-to-a-a-a-a-a-a/" class="u-url">Why doesn't GCC optimize a*a*a*a*a*a to (a*a*a)*(a*a*a)?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/why-doesn-t-gcc-optimize-a-a-a-a-a-a-to-a-a-a-a-a-a/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T21:58:32+08:00" itemprop="datePublished" title="2023-02-16 21:58">2023-02-16 21:58</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am doing some numerical optimization on a scientific application. One thing
I noticed is that GCC will optimize the call <code>pow(a,2)</code> by compiling it into
<code>a*a</code>, but the call <code>pow(a,6)</code> is not optimized and will actually call the
library function <code>pow</code>, which greatly slows down the performance. (In
contrast, Intel C++ Compiler, executable <code>icc</code>, will eliminate the library
call for <code>pow(a,6)</code>.)</p>
<p>What I am curious about is that when I replaced <code>pow(a,6)</code> with <code>a*a*a*a*a*a</code>
using GCC 4.5.1 and options "<code>-O3 -lm -funroll-loops -msse4</code>", it uses 5
<code>mulsd</code> instructions:</p>
<div class="code"><pre class="code literal-block">movapd  %xmm14, %xmm13
mulsd   %xmm14, %xmm13
mulsd   %xmm14, %xmm13
mulsd   %xmm14, %xmm13
mulsd   %xmm14, %xmm13
mulsd   %xmm14, %xmm13
</pre></div>

<p>while if I write <code>(a*a*a)*(a*a*a)</code>, it will produce</p>
<div class="code"><pre class="code literal-block">movapd  %xmm14, %xmm13
mulsd   %xmm14, %xmm13
mulsd   %xmm14, %xmm13
mulsd   %xmm13, %xmm13
</pre></div>

<p>which reduces the number of multiply instructions to 3. <code>icc</code> has similar
behavior.</p>
<p>Why do compilers not recognize this optimization trick?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Because Floating Point Math is not Associative. The way you group the operands
in floating point multiplication has an effect on the numerical accuracy of
the answer.</p>
<p>As a result, most compilers are very conservative about reordering floating
point calculations unless they can be sure that the answer will stay the same,
or unless you tell them you don't care about numerical accuracy. For example:
the <code>-fassociative-math</code> option of gcc which allows gcc to reassociate
floating point operations, or even the <code>-ffast-math</code> option which allows even
more aggressive tradeoffs of accuracy against speed.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Lambdageek</strong> correctly points out that because associativity does not hold
for floating-point numbers, the "optimization" of <code>a*a*a*a*a*a</code> to
<code>(a*a*a)*(a*a*a)</code> may change the value. This is why it is disallowed by C99
(unless specifically allowed by the user, via compiler flag or pragma).
Generally, the assumption is that the programmer wrote what she did for a
reason, and the compiler should respect that. If you want <code>(a*a*a)*(a*a*a)</code>,
write that.</p>
<p>That can be a pain to write, though; why can't the compiler just do [what you
consider to be] the right thing when you use <code>pow(a,6)</code>? Because it would be
the <em>wrong</em> thing to do. On a platform with a good math library, <code>pow(a,6)</code> is
significantly more accurate than either <code>a*a*a*a*a*a</code> or <code>(a*a*a)*(a*a*a)</code>.
Just to provide some data, I ran a small experiment on my Mac Pro, measuring
the worst error in evaluating a^6 for all single-precision floating numbers
between [1,2):</p>
<div class="code"><pre class="code literal-block">worst relative error using    powf(a, 6.f): 5.96e-08
worst relative error using (a*a*a)*(a*a*a): 2.94e-07
worst relative error using     a*a*a*a*a*a: 2.58e-07
</pre></div>

<p>Using <code>pow</code> instead of a multiplication tree reduces the error bound by a
<em>factor of 4</em>. Compilers should not (and generally do not) make
"optimizations" that increase error unless licensed to do so by the user (e.g.
via <code>-ffast-math</code>).</p>
<p>Note that GCC provides <code>__builtin_powi(x,n)</code> as an alternative to <code>pow( )</code>,
which should generate an inline multiplication tree. Use that if you want to
trade off accuracy for performance, but do not want to enable fast-math.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/vim-clear-last-search-highlighting/" class="u-url">Vim clear last search highlighting</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/vim-clear-last-search-highlighting/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-16T21:57:57+08:00" itemprop="datePublished" title="2023-02-16 21:57">2023-02-16 21:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p><strong>Want to improve this post?</strong> Provide detailed answers to this question,
including citations and an explanation of why your answer is correct. Answers
without enough detail may be edited or deleted.</p>
<p>After doing a search in Vim, I get all the occurrences highlighted. How can I
disable that? I now do another search for something gibberish that can't be
found.</p>
<p>Is there a way to just temporarily disable the highlight and then re-enable it
when needed again?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>To turn off highlighting until the next search:</p>
<div class="code"><pre class="code literal-block">:noh
</pre></div>

<p>Or turn off highlighting completely:</p>
<div class="code"><pre class="code literal-block">set nohlsearch
</pre></div>

<p>Or, to toggle it:</p>
<div class="code"><pre class="code literal-block">set hlsearch!

nnoremap &lt;F3&gt; :set hlsearch!&lt;CR&gt;
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>From the VIM Documentation</p>
<p>To clear the last used search pattern:</p>
<div class="code"><pre class="code literal-block">:let @/ = ""
</pre></div>

<p>This will not set the pattern to an empty string, because that would match
everywhere. The pattern is really cleared, like when starting Vim.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-122.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-120.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
