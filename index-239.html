<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 239) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-239.html">
<link rel="prev" href="index-240.html" type="text/html">
<link rel="next" href="index-238.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-are-the-differences-between-type-and-isinstance/" class="u-url">What are the differences between type() and isinstance()?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-are-the-differences-between-type-and-isinstance/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:46:26+08:00" itemprop="datePublished" title="2023-02-17 01:46">2023-02-17 01:46</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What are the differences between these two code snippets?</p>
<p>Using <code>type</code>:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">types</span>

<span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="ow">is</span> <span class="n">types</span><span class="o">.</span><span class="n">DictType</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">()</span>
<span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="ow">in</span> <span class="n">types</span><span class="o">.</span><span class="n">StringTypes</span><span class="p">:</span>
    <span class="n">do_something_else</span><span class="p">()</span>
</pre></div>

<p>Using <code>isinstance</code>:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">isinstance</span><span class="ss">(</span><span class="nv">a</span>,<span class="w"> </span><span class="nv">dict</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">do_something</span><span class="ss">()</span>
<span class="k">if</span><span class="w"> </span><span class="nv">isinstance</span><span class="ss">(</span><span class="nv">b</span>,<span class="w"> </span><span class="nv">str</span><span class="ss">)</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">isinstance</span><span class="ss">(</span><span class="nv">b</span>,<span class="w"> </span><span class="nv">unicode</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">do_something_else</span><span class="ss">()</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>To summarize the contents of other (already good!) answers, <code>isinstance</code>
caters for inheritance (an instance of a derived class <em>is an</em> instance of a
base class, too), while checking for equality of <code>type</code> does not (it demands
identity of types and rejects instances of subtypes, AKA subclasses).</p>
<p>Normally, in Python, you want your code to support inheritance, of course
(since inheritance is so handy, it would be bad to stop code using yours from
using it!), so <code>isinstance</code> is less bad than checking identity of <code>type</code>s
because it seamlessly supports inheritance.</p>
<p>It's not that <code>isinstance</code> is <em>good</em> , mind you—it's just <em>less bad</em> than
checking equality of types. The normal, Pythonic, preferred solution is almost
invariably "duck typing": try using the argument <em>as if</em> it was of a certain
desired type, do it in a <code>try</code>/<code>except</code> statement catching all exceptions that
could arise if the argument was not in fact of that type (or any other type
nicely duck-mimicking it;-), and in the <code>except</code> clause, try something else
(using the argument "as if" it was of some other type).</p>
<p><code>basestring</code> <strong>is</strong> , however, quite a special case—a builtin type that exists
<strong>only</strong> to let you use <code>isinstance</code> (both <code>str</code> and <code>unicode</code> subclass
<code>basestring</code>). Strings are sequences (you could loop over them, index them,
slice them, ...), but you generally want to treat them as "scalar" types—it's
somewhat incovenient (but a reasonably frequent use case) to treat all kinds
of strings (and maybe other scalar types, i.e., ones you can't loop on) one
way, all containers (lists, sets, dicts, ...) in another way, and <code>basestring</code>
plus <code>isinstance</code> helps you do that—the overall structure of this idiom is
something like:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">isinstance</span><span class="ss">(</span><span class="nv">x</span>,<span class="w"> </span><span class="nv">basestring</span><span class="ss">)</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">treatasscalar</span><span class="ss">(</span><span class="nv">x</span><span class="ss">)</span>
<span class="nv">try</span>:
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">treatasiter</span><span class="ss">(</span><span class="nv">iter</span><span class="ss">(</span><span class="nv">x</span><span class="ss">))</span>
<span class="nv">except</span><span class="w"> </span><span class="nv">TypeError</span>:
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nv">treatasscalar</span><span class="ss">(</span><span class="nv">x</span><span class="ss">)</span>
</pre></div>

<p>You could say that <code>basestring</code> is an <em>Abstract Base Class</em> ("ABC")—it offers
no concrete functionality to subclasses, but rather exists as a "marker",
mainly for use with <code>isinstance</code>. The concept is obviously a growing one in
Python, since PEP 3119, which introduces a generalization of it, was accepted
and has been implemented starting with Python 2.6 and 3.0.</p>
<p>The PEP makes it clear that, while ABCs can often substitute for duck typing,
there is generally no big pressure to do that (see here). ABCs as implemented
in recent Python versions do however offer extra goodies: <code>isinstance</code> (and
<code>issubclass</code>) can now mean more than just "[an instance of] a derived class"
(in particular, any class can be "registered" with an ABC so that it will show
as a subclass, and its instances as instances of the ABC); and ABCs can also
offer extra convenience to actual subclasses in a very natural way via
Template Method design pattern applications (see here and here [[part II]] for
more on the TM DP, in general and specifically in Python, independent of
ABCs).</p>
<p>For the underlying mechanics of ABC support as offered in Python 2.6, see
here; for their 3.1 version, very similar, see here. In both versions,
standard library module collections (that's the 3.1 version—for the very
similar 2.6 version, see here) offers several useful ABCs.</p>
<p>For the purpose of this answer, the key thing to retain about ABCs (beyond an
arguably more natural placement for TM DP functionality, compared to the
classic Python alternative of mixin classes such as UserDict.DictMixin) is
that they make <code>isinstance</code> (and <code>issubclass</code>) much more attractive and
pervasive (in Python 2.6 and going forward) than they used to be (in 2.5 and
before), and therefore, by contrast, make checking type equality an even worse
practice in recent Python versions than it already used to be.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Here's an example where <code>isinstance</code> achieves something that <code>type</code> cannot:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">Vehicle:</span>
    <span class="nb">pass</span>

<span class="k">class</span> <span class="n">Truck</span>(<span class="n">Vehicle</span>):
    <span class="nb">pass</span>
</pre></div>

<p>in this case, a truck object is a Vehicle, but you'll get this:</p>
<div class="code"><pre class="code literal-block">isinstance(Vehicle(), Vehicle)  # returns True
type(Vehicle()) == Vehicle      # returns True
isinstance(Truck(), Vehicle)    # returns True
type(Truck()) == Vehicle        # returns False, and this probably won't be what you want.
</pre></div>

<p>In other words, <code>isinstance</code> is true for subclasses, too.</p>
<p>Also see: How to compare type of an object in Python?</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/echo-that-outputs-to-stderr/" class="u-url">echo that outputs to stderr</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/echo-that-outputs-to-stderr/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:45:59+08:00" itemprop="datePublished" title="2023-02-17 01:45">2023-02-17 01:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there a standard Bash tool that acts like echo but outputs to stderr rather
than stdout?</p>
<p>I know I can do <code>echo foo 1&gt;&amp;2</code> but it's kinda ugly and, I suspect, error
prone (e.g. more likely to get edited wrong when things change).</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You could do this, which facilitates reading:</p>
<div class="code"><pre class="code literal-block">&gt;&amp;2 echo "error"
</pre></div>

<p><code>&gt;&amp;2</code> copies file descriptor #2 to file descriptor #1. Therefore, after this
redirection is performed, both file descriptors will refer to the same file:
the one file descriptor #2 was <strong>originally</strong> referring to. For more
information see the Bash Hackers Illustrated Redirection Tutorial.</p>
<p><br></p>
<h3>Suggest</h3>
<p>You could define a function:</p>
<div class="code"><pre class="code literal-block"><span class="n">echoerr</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">echo</span><span class="w"> </span><span class="s">"$@"</span><span class="w"> </span><span class="mi">1</span><span class="o">&gt;&amp;</span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="n">echoerr</span><span class="w"> </span><span class="n">hello</span><span class="w"> </span><span class="n">world</span>
</pre></div>

<p>This would be faster than a script and have no dependencies.</p>
<p>Camilo Martin's bash specific suggestion uses a "here string" and will print
anything you pass to it, including arguments (-n) that echo would normally
swallow:</p>
<div class="code"><pre class="code literal-block"><span class="n">echoerr</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="w"> </span><span class="s">"$@"</span><span class="w"> </span><span class="mi">1</span><span class="o">&gt;&amp;</span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
</pre></div>

<p>Glenn Jackman's solution also avoids the argument swallowing problem:</p>
<div class="code"><pre class="code literal-block">echoerr() { printf "%s\n" "$*" &gt;&amp;2; }
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-get-query-string-variables-in-express-js-on-node-js/" class="u-url">How to get GET (query string) variables in Express.js on Node.js?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-get-query-string-variables-in-express-js-on-node-js/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T01:45:31+08:00" itemprop="datePublished" title="2023-02-17 01:45">2023-02-17 01:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Can we get the variables in the query string in Node.js just like we get them
in <code>$_GET</code> in PHP?</p>
<p>I know that in Node.js we can get the URL in the request. Is there a method to
get the query string parameters?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>In Express it's already done for you and you can simply use req.query for
that:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">req</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">id</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">$</span><span class="n">_GET</span><span class="p">[</span><span class="s2">"id"</span><span class="p">]</span>
</pre></div>

<p>Otherwise, in NodeJS, you can access req.url and the builtin <code>url</code> module to
url.parse it manually:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'url'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">url_parts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">url</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="bp">true</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">url_parts</span><span class="o">.</span><span class="n">query</span><span class="p">;</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>In Express it's already done for you and you can simply use req.query for
that:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">req</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">id</span><span class="p">;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="o">$</span><span class="n">_GET</span><span class="p">[</span><span class="s2">"id"</span><span class="p">]</span>
</pre></div>

<p>Otherwise, in NodeJS, you can access req.url and the builtin <code>url</code> module to
url.parse it manually:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s1">'url'</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">url_parts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">url</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="bp">true</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">url_parts</span><span class="o">.</span><span class="n">query</span><span class="p">;</span>
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-240.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-238.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
