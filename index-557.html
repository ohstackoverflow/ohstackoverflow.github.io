<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 557) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-557.html">
<link rel="prev" href="index-558.html" type="text/html">
<link rel="next" href="index-556.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-copy-an-object-in-java/" class="u-url">How do I copy an object in Java?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-copy-an-object-in-java/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:53:53+08:00" itemprop="datePublished" title="2023-02-17 09:53">2023-02-17 09:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Consider the code below:</p>
<div class="code"><pre class="code literal-block">DummyBean dum = new DummyBean();
dum.setDummy("foo");
System.out.println(dum.getDummy()); // prints 'foo'

DummyBean dumtwo = dum;
System.out.println(dumtwo.getDummy()); // prints 'foo'

dum.setDummy("bar");
System.out.println(dumtwo.getDummy()); // prints 'bar' but it should print 'foo'
</pre></div>

<p>So, I want to copy the <code>dum</code> to <code>dumtwo</code> and change <code>dum</code> without affecting
the <code>dumtwo</code>. But the code above is not doing that. When I change something in
<code>dum</code>, the same change is happening in <code>dumtwo</code> also.</p>
<p>I guess, when I say <code>dumtwo = dum</code>, Java copies the <strong>reference only</strong>. So, is
there any way to create a fresh copy of <code>dum</code> and assign it to <code>dumtwo</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Create a copy constructor:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">DummyBean</span> {
  <span class="nb">private</span> <span class="n">String</span> <span class="n">dummy</span>;

  <span class="n">public</span> <span class="n">DummyBean</span>(<span class="n">DummyBean</span> <span class="n">another</span>) {
    <span class="n">this</span>.<span class="n">dummy</span> = <span class="n">another</span>.<span class="n">dummy</span>; // <span class="n">you</span> <span class="nb">can</span> <span class="n">access</span>  
  }
}
</pre></div>

<p>Every object has also a clone method which can be used to copy the object, but
don't use it. It's way too easy to create a class and do improper clone
method. If you are going to do that, read at least what Joshua Bloch has to
say about it in <em>Effective Java</em>.</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Basic:</strong> Object Copying in Java.  </p>
<p>Let us Assume an object- <code>obj1</code>, that contains two objects, <strong>containedObj1</strong>
and <strong>containedObj2</strong>.<br><img alt="enter image description here" src="images/ZK4pQ.gif"></p>
<p><strong>shallow copying:</strong><br>
shallow copying creates a new <code>instance</code> of the same class and copies all the
fields to the new instance and returns it. <strong>Object class</strong> provides a <code>clone</code>
method and provides support for the shallow copying.<br><img alt="enter image description here" src="images/xhF9B.gif"></p>
<p><strong>Deep copying:</strong><br>
A deep copy occurs when <em>an object is copied along with the objects to which
it refers</em>. Below image shows <code>obj1</code> after a deep copy has been performed on
it. <em>Not only has<code>obj1</code> been copied</em>, but the objects contained within it have
been copied as well. We can use <code>Java Object Serialization</code> to make a deep
copy. Unfortunately, this approach has some problems too(detailed examples).<br><img alt="enter image description here" src="images/mtNjt.gif"></p>
<p><strong>Possible Problems:</strong><br><code>clone</code> is tricky to implement correctly.<br>
It's better to use Defensive copying, copy constructors(as @egaga reply) or
static factory methods.  </p>
<ol>
<li>
<p>If you have an object, that you know has a public <code>clone()</code> method, but you don’t know the type of the object at compile time, then you have problem. Java has an interface called <code>Cloneable</code>. In practice, we should implement this interface if we want to make an object <code>Cloneable</code>. <code>Object.clone</code> is <strong>protected</strong> , so we must <em>override</em> it with a public method in order for it to be accessible.  </p>
</li>
<li>
<p>Another problem arises when we try <strong>deep copying</strong> of a <em>complex object</em>. Assume that the <code>clone()</code> method of all member object variables also does deep copy, this is too risky of an assumption. You must control the code in all classes.  </p>
</li>
</ol>
<p>For example org.apache.commons.lang.SerializationUtils will have method for
Deep clone using serialization(Source). If we need to clone Bean then there
are couple of utility methods in org.apache.commons.beanutils (Source).</p>
<ul>
<li>
<code>cloneBean</code> will Clone a bean based on the available property getters and setters, even if the bean class itself does not implement Cloneable.</li>
<li>
<code>copyProperties</code> will Copy property values from the origin bean to the destination bean for all cases where the property names are the same.</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/get-and-set-in-typescript/" class="u-url">get and set in TypeScript</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/get-and-set-in-typescript/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:53:28+08:00" itemprop="datePublished" title="2023-02-17 09:53">2023-02-17 09:53</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm trying to create get and set method for a property:</p>
<div class="code"><pre class="code literal-block"><span class="nt">private</span><span class="w"> </span><span class="nt">_name</span><span class="o">:</span><span class="w"> </span><span class="nt">string</span><span class="o">;</span>

<span class="nt">Name</span><span class="o">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">get</span><span class="p">:</span>
<span class="w">    </span><span class="err">{</span>
<span class="w">        </span><span class="n">return</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">_name</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nt">set</span><span class="o">:</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="err">this._name</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">???</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="err">}</span>
</pre></div>

<p>What's the keyword to set a value?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>TypeScript uses getter/setter syntax that is like ECMAScript4/ActionScript3.</p>
<div class="code"><pre class="code literal-block"><span class="nt">class</span><span class="w"> </span><span class="nt">foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">private</span><span class="w"> </span><span class="n">_bar</span><span class="p">:</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">false</span><span class="p">;</span>
<span class="w">    </span><span class="err">get</span><span class="w"> </span><span class="err">bar():</span><span class="w"> </span><span class="err">boolean</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="err">return</span><span class="w"> </span><span class="err">this._bar</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nt">set</span><span class="w"> </span><span class="nt">bar</span><span class="o">(</span><span class="nt">value</span><span class="o">:</span><span class="w"> </span><span class="nt">boolean</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="err">this._bar</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="err">}</span>
</pre></div>

<p>However, in order to use it at all, you must make sure the TypeScript compiler
targets ECMAScript5 or higher. If you are running the command line compiler,
use <code>--target</code> flag like this;</p>
<div class="code"><pre class="code literal-block">tsc --target ES5
</pre></div>

<p>If you are using Visual Studio, you must edit your project file to add the
flag to the configuration for the TypeScriptCompile build tool. You can see
that here:</p>
<p>That will produce this JavaScript, using the ECMAScript 5
<code>Object.defineProperty()</code> feature.</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">function</span><span class="w"> </span><span class="n">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">_bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nb nb-Type">Object</span><span class="o">.</span><span class="n">defineProperty</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">prototype</span><span class="p">,</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">get</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">_bar</span><span class="p">;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">set</span><span class="p">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">this</span><span class="o">.</span><span class="n">_bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="n">enumerable</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="p">,</span>
<span class="w">        </span><span class="n">configurable</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span>
<span class="w">    </span><span class="p">});</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">foo</span><span class="p">;</span>
<span class="p">})();</span>
</pre></div>

<p>More recent versions of EcmaScript will produce code that looks more like the
original TypeScript. For instance, targeting EcmaScript2017 will produce:</p>
<div class="code"><pre class="code literal-block"><span class="s2">"use strict"</span><span class="p">;</span>
<span class="k">class</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">_bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">get</span><span class="w"> </span><span class="n">bar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">_bar</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">set</span><span class="w"> </span><span class="n">bar</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">_bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>So to use it,</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myFoo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">foo</span><span class="p">();</span>
<span class="k">if</span><span class="p">(</span><span class="n">myFoo</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">         </span><span class="o">//</span><span class="w"> </span><span class="n">calls</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">getter</span>
<span class="w">    </span><span class="n">myFoo</span><span class="o">.</span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">false</span><span class="p">;</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">calls</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">setter</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">passes</span><span class="w"> </span><span class="bp">false</span>
<span class="p">}</span>
</pre></div>

<p>As @DanFromGermany suggests below, if your are simply reading and writing a
local property like <code>foo.bar = true</code>, then having a setter and getter pair is
overkill. You can always add them later if you need to do something, like
logging, whenever the property is read or written.</p>
<p>Getters can be used to implement readonly properties. Here is an example that
also shows how getters interact with readonly and optional types.</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span>
<span class="o">//</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">readonly</span><span class="w"> </span><span class="n">property</span><span class="o">.</span>
<span class="o">//</span><span class="w"> </span><span class="n">baz</span><span class="err">?</span><span class="p">:</span><span class="n">string</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">baz</span><span class="p">:</span><span class="n">string</span><span class="o">|</span><span class="n">undefined</span>
<span class="o">//</span>
<span class="n">type</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">readonly</span><span class="w"> </span><span class="n">bar</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="n">readonly</span><span class="w"> </span><span class="n">baz</span><span class="err">?</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">const</span><span class="w"> </span><span class="n">foo</span><span class="p">:</span><span class="n">Foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">bar</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">}</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nb">prints</span><span class="w"> </span><span class="s1">'bar'</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">baz</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nb">prints</span><span class="w"> </span><span class="n">undefined</span>

<span class="o">//</span>
<span class="o">//</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">readonly</span><span class="w"> </span><span class="n">property</span>
<span class="o">//</span>
<span class="n">interface</span><span class="w"> </span><span class="n">iFoo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">readonly</span><span class="w"> </span><span class="n">bar</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="p">;</span>
<span class="w">    </span><span class="n">readonly</span><span class="w"> </span><span class="n">baz</span><span class="err">?</span><span class="p">:</span><span class="w"> </span><span class="n">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="n">ifoo</span><span class="p">:</span><span class="n">iFoo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">bar</span><span class="p">:</span><span class="w"> </span><span class="s2">"bar"</span><span class="p">}</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">ifoo</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nb">prints</span><span class="w"> </span><span class="s1">'bar'</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">ifoo</span><span class="o">.</span><span class="n">baz</span><span class="p">)</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nb">prints</span><span class="w"> </span><span class="n">undefined</span>


<span class="o">//</span>
<span class="o">//</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">implements</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">getter</span><span class="p">,</span><span class="w"> </span>
<span class="o">//</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">leaves</span><span class="w"> </span><span class="n">off</span><span class="w"> </span><span class="n">baz</span><span class="o">.</span>
<span class="o">//</span>
<span class="k">class</span><span class="w"> </span><span class="n">iBarClass</span><span class="w"> </span><span class="n">implements</span><span class="w"> </span><span class="n">iFoo</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">get</span><span class="w"> </span><span class="n">bar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s2">"bar"</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
<span class="k">const</span><span class="w"> </span><span class="n">iBarInstance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">iBarClass</span><span class="p">()</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">iBarInstance</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nb">prints</span><span class="w"> </span><span class="s1">'bar'</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">iBarInstance</span><span class="o">.</span><span class="n">baz</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nb">prints</span><span class="w"> </span><span class="s1">'undefined'</span>
<span class="o">//</span><span class="w"> </span><span class="n">accessing</span><span class="w"> </span><span class="n">baz</span><span class="w"> </span><span class="n">gives</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">baz</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">exist</span><span class="w"> </span>
<span class="o">//</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">iBarClass</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">returns</span><span class="w"> </span><span class="n">undefined</span>
<span class="o">//</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">baz</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">getter</span>
<span class="o">//</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">undefined</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">warning</span><span class="o">.</span>


<span class="o">//</span>
<span class="o">//</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">implements</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">readonly</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">getter</span>
<span class="o">//</span>
<span class="k">class</span><span class="w"> </span><span class="n">iBazClass</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="n">iBarClass</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">private</span><span class="w"> </span><span class="n">readonly</span><span class="w"> </span><span class="n">_baz</span><span class="err">?</span><span class="p">:</span><span class="w"> </span><span class="n">string</span>

<span class="w">    </span><span class="n">constructor</span><span class="p">(</span><span class="n">baz</span><span class="err">?</span><span class="p">:</span><span class="n">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">super</span><span class="p">()</span>
<span class="w">        </span><span class="n">this</span><span class="o">.</span><span class="n">_baz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">baz</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">get</span><span class="w"> </span><span class="n">baz</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">this</span><span class="o">.</span><span class="n">_baz</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">const</span><span class="w"> </span><span class="n">iBazInstance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">iBazClass</span><span class="p">(</span><span class="s2">"baz"</span><span class="p">)</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">iBazInstance</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nb">prints</span><span class="w"> </span><span class="n">bar</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">iBazInstance</span><span class="o">.</span><span class="n">baz</span><span class="p">)</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="nb">prints</span><span class="w"> </span><span class="n">baz</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Ezward has already provided a good answer, but I noticed that one of the
comments asks how it is used. For people like me who stumble across this
question, I thought it would be useful to have a link to the official
documentation on getters and setters on the Typescript website as that
explains it well, will hopefully always stay up-to-date as changes are made,
and shows example usage:</p>
<p>http://www.typescriptlang.org/docs/handbook/classes.html</p>
<p>In particular, for those not familiar with it, note that you don't incorporate
the word 'get' into a call to a getter (and similarly for setters):</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myBar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myFoo</span><span class="o">.</span><span class="n">getBar</span><span class="p">();</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">wrong</span><span class="w">    </span>
<span class="k">var</span><span class="w"> </span><span class="n">myBar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myFoo</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'bar'</span><span class="p">);</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">wrong</span>
</pre></div>

<p>You should simply do this:</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">myBar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myFoo</span><span class="o">.</span><span class="n">bar</span><span class="p">;</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="p">(</span><span class="n">get</span><span class="p">)</span>
<span class="n">myFoo</span><span class="o">.</span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">true</span><span class="p">;</span><span class="w">  </span><span class="o">//</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="p">(</span><span class="n">set</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="bp">false</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">correct</span><span class="w"> </span><span class="n">too</span><span class="w"> </span><span class="n">obviously</span><span class="o">!</span><span class="p">)</span>
</pre></div>

<p>given a class like:</p>
<div class="code"><pre class="code literal-block"><span class="nt">class</span><span class="w"> </span><span class="nt">foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="err">private</span><span class="w"> </span><span class="n">_bar</span><span class="p">:</span><span class="n">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">false</span><span class="p">;</span>

<span class="w">  </span><span class="err">get</span><span class="w"> </span><span class="err">bar():boolean</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="err">return</span><span class="w"> </span><span class="err">this._bar</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="nt">set</span><span class="w"> </span><span class="nt">bar</span><span class="o">(</span><span class="nt">theBar</span><span class="p">:</span><span class="nd">boolean</span><span class="o">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">this._bar</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">theBar</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="err">}</span>
</pre></div>

<p>then the 'bar' getter for the private '_bar' property will be called.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-does-it-mean-to-program-to-an-interface/" class="u-url">What does it mean to "program to an interface"?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-does-it-mean-to-program-to-an-interface/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T09:52:59+08:00" itemprop="datePublished" title="2023-02-17 09:52">2023-02-17 09:52</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have seen this mentioned a few times and I am not clear on what it means.
When and why would you do this?</p>
<p>I know what interfaces do, but the fact I am not clear on this makes me think
I am missing out on using them correctly.</p>
<p>Is it just so if you were to do:</p>
<div class="code"><pre class="code literal-block">IInterface classRef = new ObjectWhatever()
</pre></div>

<p>You could use any class that implements <code>IInterface</code>? When would you need to
do that? The only thing I can think of is if you have a method and you are
unsure of what object will be passed except for it implementing <code>IInterface</code>.
I cannot think how often you would need to do that.</p>
<p>Also, how could you write a method that takes in an object that implements an
interface? Is that possible?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>There are some wonderful answers on here to this questions that get into all
sorts of great detail about interfaces and loosely coupling code, inversion of
control and so on. There are some fairly heady discussions, so I'd like to
take the opportunity to break things down a bit for understanding why an
interface is useful.</p>
<p>When I first started getting exposed to interfaces, I too was confused about
their relevance. I didn't understand why you needed them. If we're using a
language like Java or C#, we already have inheritance and I viewed interfaces
as a <em>weaker</em> form of inheritance and thought, "why bother?" In a sense I was
right, you can think of interfaces as sort of a weak form of inheritance, but
beyond that I finally understood their use as a language construct by thinking
of them as a means of classifying common traits or behaviors that were
exhibited by potentially many non-related classes of objects.</p>
<p>For example -- say you have a SIM game and have the following classes:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">HouseFly</span> <span class="n">inherits</span> <span class="n">Insect</span> {
    <span class="n">void</span> <span class="n">FlyAroundYourHead</span>(){}
    <span class="n">void</span> <span class="n">LandOnThings</span>(){}
}

<span class="k">class</span> <span class="n">Telemarketer</span> <span class="n">inherits</span> <span class="n">Person</span> {
    <span class="n">void</span> <span class="n">CallDuringDinner</span>(){}
    <span class="n">void</span> <span class="n">ContinueTalkingWhenYouSayNo</span>(){}
}
</pre></div>

<p>Clearly, these two objects have nothing in common in terms of direct
inheritance. But, you could say they are both annoying.</p>
<p>Let's say our game needs to have some sort of random <em>thing</em> that annoys the
game player when they eat dinner. This could be a <code>HouseFly</code> or a
<code>Telemarketer</code> or both -- but how do you allow for both with a single
function? And how do you ask each different type of object to "do their
annoying thing" in the same way?</p>
<p>The key to realize is that both a <code>Telemarketer</code> and <code>HouseFly</code> share a common
loosely interpreted behavior even though they are nothing alike in terms of
modeling them. So, let's make an interface that both can implement:</p>
<div class="code"><pre class="code literal-block">interface IPest {
    void BeAnnoying();
}

class HouseFly inherits Insect implements IPest {
    void FlyAroundYourHead(){}
    void LandOnThings(){}

    void BeAnnoying() {
        FlyAroundYourHead();
        LandOnThings();
    }
}

class Telemarketer inherits Person implements IPest {
    void CallDuringDinner(){}
    void ContinueTalkingWhenYouSayNo(){}

    void BeAnnoying() {
        CallDuringDinner();
        ContinueTalkingWhenYouSayNo();
    }
}
</pre></div>

<p>We now have two classes that can each be annoying in their own way. And they
do not need to derive from the same base class and share common inherent
characteristics -- they simply need to satisfy the contract of <code>IPest</code> --
that contract is simple. You just have to <code>BeAnnoying</code>. In this regard, we can
model the following:</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">DiningRoom</span> {

    <span class="n">DiningRoom</span>(<span class="n">Person</span>[] <span class="n">diningPeople</span>, <span class="n">IPest</span>[] <span class="n">pests</span>) { ... }

    <span class="n">void</span> <span class="n">ServeDinner</span>() {
        <span class="k">when</span> <span class="n">diningPeople</span> <span class="n">are</span> <span class="n">eating</span>,

        <span class="n">foreach</span> <span class="n">pest</span> <span class="nb">in</span> <span class="n">pests</span>
        <span class="n">pest</span>.<span class="n">BeAnnoying</span>();
    }
}
</pre></div>

<p>Here we have a dining room that accepts a number of diners and a number of
pests -- note the use of the interface. This means that in our little world, a
member of the <code>pests</code> array could actually be a <code>Telemarketer</code> object or a
<code>HouseFly</code> object.</p>
<p>The <code>ServeDinner</code> method is called when dinner is served and our people in the
dining room are supposed to eat. In our little game, that's when our pests do
their work -- each pest is instructed to be annoying by way of the <code>IPest</code>
interface. In this way, we can easily have both <code>Telemarketers</code> and
<code>HouseFlys</code> be annoying in each of their own ways -- we care only that we have
something in the <code>DiningRoom</code> object that is a pest, we don't really care what
it is and they could have nothing in common with other.</p>
<p>This very contrived pseudo-code example (that dragged on a lot longer than I
anticipated) is simply meant to illustrate the kind of thing that finally
turned the light on for me in terms of when we might use an interface. I
apologize in advance for the silliness of the example, but hope that it helps
in your understanding. And, to be sure, the other posted answers you've
received here really cover the gamut of the use of interfaces today in design
patterns and development methodologies.</p>
<p><br></p>
<h3>Suggest</h3>
<p>The specific example I used to give to students is that they should write</p>
<div class="code"><pre class="code literal-block">List myList = new ArrayList(); // programming to the List interface
</pre></div>

<p>instead of</p>
<div class="code"><pre class="code literal-block">ArrayList myList = new ArrayList(); // this is bad
</pre></div>

<p>These look exactly the same in a short program, but if you go on to use
<code>myList</code> 100 times in your program you can start to see a difference. The
first declaration ensures that you only call methods on <code>myList</code> that are
defined by the <code>List</code> interface (so no <code>ArrayList</code> specific methods). If
you've programmed to the interface this way, later on you can decide that you
really need</p>
<div class="code"><pre class="code literal-block">List myList = new TreeList();
</pre></div>

<p>and you only have to change your code in that one spot. You already know that
the rest of your code doesn't do anything that will be broken by changing the
<em>implementation</em> because you programmed to the <em>interface</em>.</p>
<p>The benefits are even more obvious (I think) when you're talking about method
parameters and return values. Take this for example:</p>
<div class="code"><pre class="code literal-block">public ArrayList doSomething(HashMap map);
</pre></div>

<p>That method declaration ties you to two concrete implementations (<code>ArrayList</code>
and <code>HashMap</code>). As soon as that method is called from other code, any changes
to those types probably mean you're going to have to change the calling code
as well. It would be better to program to the interfaces.</p>
<div class="code"><pre class="code literal-block">public List doSomething(Map map);
</pre></div>

<p>Now it doesn't matter what kind of <code>List</code> you return, or what kind of <code>Map</code> is
passed in as a parameter. Changes that you make inside the <code>doSomething</code>
method won't force you to change the calling code.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-558.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-556.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
