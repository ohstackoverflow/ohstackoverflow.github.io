<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 609) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-609.html">
<link rel="prev" href="index-610.html" type="text/html">
<link rel="next" href="index-608.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-list-all-remote-branches-in-git-1-7/" class="u-url">How do I list all remote branches in Git 1.7+?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-list-all-remote-branches-in-git-1-7/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:15:09+08:00" itemprop="datePublished" title="2023-02-17 11:15">2023-02-17 11:15</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've tried <code>git branch -r</code>, but that only lists remote branches that I've
tracked locally. How do I find the list of those that I haven't? (It doesn't
matter to me whether the command lists <em>all</em> remote branches or only those
that are untracked.)</p>
<p><br><br></p>
<h2>Answer</h2>
<p><strong>For the vast majority [1] of visitors here, the correct and simplest answer
to the question "How do I list all remote branches in Git 1.7+?" is:</strong></p>
<div class="code"><pre class="code literal-block">git branch -r
</pre></div>

<p>For a small minority[1] <code>git branch -r</code> does not work. If <code>git branch -r</code> does
not work try:</p>
<div class="code"><pre class="code literal-block">git ls-remote --heads &lt;remote-name&gt;
</pre></div>

<p>If <code>git branch -r</code> does not work, then maybe as Cascabel says "you've modified
the default refspec, so that <code>git fetch</code> and <code>git remote update</code> don't fetch
all the <code>remote</code>'s branches".</p>
<hr>
<p>[1] As of the writing of this footnote 2018-Feb, I looked at the comments and
see that the <code>git branch -r</code> works for the vast majority (about 90% or 125 out
of 140).</p>
<p>If <code>git branch -r</code> does not work, check <code>git config --get remote.origin.fetch</code>
contains a wildcard (<code>*</code>) as per this answer</p>
<p><br></p>
<h3>Suggest</h3>
<p><code>remote show</code> shows all the branches on the remote, including those that are
not tracked locally and even those that have not yet been fetched.</p>
<div class="code"><pre class="code literal-block"><span class="nv">git</span><span class="w"> </span><span class="nv">remote</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">remote</span><span class="o">-</span><span class="nv">name</span><span class="o">&gt;</span>
</pre></div>

<p>It also tries to show the status of the branches relative to your local
repository:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;</span><span class="w"> </span><span class="nv">git</span><span class="w"> </span><span class="nv">remote</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="nv">origin</span>
<span class="o">*</span><span class="w"> </span><span class="nv">remote</span><span class="w"> </span><span class="nv">origin</span>
<span class="w">  </span><span class="nv">Fetch</span><span class="w"> </span><span class="nv">URL</span>:<span class="w"> </span><span class="nv">C</span>:<span class="o">/</span><span class="nv">git</span><span class="o">/</span>.\<span class="nv">remote_repo</span>.<span class="nv">git</span>
<span class="w">  </span><span class="nv">Push</span><span class="w">  </span><span class="nv">URL</span>:<span class="w"> </span><span class="nv">C</span>:<span class="o">/</span><span class="nv">git</span><span class="o">/</span>.\<span class="nv">remote_repo</span>.<span class="nv">git</span>
<span class="w">  </span><span class="nv">HEAD</span><span class="w"> </span><span class="nv">branch</span>:<span class="w"> </span><span class="nv">master</span>
<span class="w">  </span><span class="nv">Remote</span><span class="w"> </span><span class="nv">branches</span>:
<span class="w">    </span><span class="nv">branch_that_is_not_even_fetched</span><span class="w"> </span><span class="nv">new</span><span class="w"> </span><span class="ss">(</span><span class="k">next</span><span class="w"> </span><span class="nv">fetch</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">store</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">remotes</span><span class="o">/</span><span class="nv">origin</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">branch_that_is_not_tracked</span><span class="w">      </span><span class="nv">tracked</span>
<span class="w">    </span><span class="nv">branch_that_is_tracked</span><span class="w">          </span><span class="nv">tracked</span>
<span class="w">    </span><span class="nv">master</span><span class="w">                          </span><span class="nv">tracked</span>
<span class="w">  </span><span class="nv">Local</span><span class="w"> </span><span class="nv">branches</span><span class="w"> </span><span class="nv">configured</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s1">'git pull'</span>:
<span class="w">    </span><span class="nv">branch_that_is_tracked</span><span class="w"> </span><span class="nv">merges</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">remote</span><span class="w"> </span><span class="nv">branch_that_is_tracked</span>
<span class="w">    </span><span class="nv">master</span><span class="w">                 </span><span class="nv">merges</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">remote</span><span class="w"> </span><span class="nv">master</span>
<span class="w">  </span><span class="nv">Local</span><span class="w"> </span><span class="nv">refs</span><span class="w"> </span><span class="nv">configured</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s1">'git push'</span>:
<span class="w">    </span><span class="nv">branch_that_is_tracked</span><span class="w"> </span><span class="nv">pushes</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">branch_that_is_tracked</span><span class="w"> </span><span class="ss">(</span><span class="nv">fast</span><span class="o">-</span><span class="nv">forwardable</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">master</span><span class="w">                 </span><span class="nv">pushes</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">master</span><span class="w">                 </span><span class="ss">(</span><span class="nv">up</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">date</span><span class="ss">)</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/make-the-current-commit-the-only-initial-commit-in-a-git-repository/" class="u-url">Make the current commit the only (initial) commit in a Git repository?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/make-the-current-commit-the-only-initial-commit-in-a-git-repository/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:14:42+08:00" itemprop="datePublished" title="2023-02-17 11:14">2023-02-17 11:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I currently have a local Git repository, which I push to a Github repository.</p>
<p>The local repository has ~10 commits, and the Github repository is a
synchronised duplicate of this.</p>
<p>What I'd like to do is remove ALL the version history from the local Git
repository, so the current contents of the repository appear as the only
commit (and therefore older versions of files within the repository are not
stored).</p>
<p>I'd then like to push these changes to Github.</p>
<p>I have investigated Git rebase, but this appears to be more suited to removing
specific versions. Another potential solution is to delete the local repo, and
create a new one - though this would probably create a lot of work!</p>
<p>ETA: There are specific directories / files that are untracked - if possible I
would like to maintain the untracking of these files.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here's the brute-force approach. It also removes the configuration of the
repository.</p>
<p><strong>Note</strong> : This does NOT work if the repository has submodules! If you are
using submodules, you should use e.g. interactive rebase</p>
<p>Step 1: remove all history ( <strong>Make sure you have a backup, this cannot be
reverted</strong> )</p>
<div class="code"><pre class="code literal-block">cat .git/config  # save your &lt;github-uri&gt; somewhere
rm -rf .git
</pre></div>

<p>Step 2: reconstruct the Git repo with only the current content</p>
<p>Before step 2 if you have not set up <code>init.defaultBranch</code> configuration then,
please do it via <code>git config --global init.defaultBranch &lt;branch-name&gt;</code> you
may choose <code>main</code> as <code>&lt;branch-name&gt;</code> in the current example</p>
<div class="code"><pre class="code literal-block">git init
git add .
git commit -m "Initial commit"
</pre></div>

<p>Step 3: push to GitHub.</p>
<div class="code"><pre class="code literal-block">git remote add origin &lt;github-uri&gt;
git push -u --force origin main
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>The only solution that works for me (and keeps submodules working) is</p>
<div class="code"><pre class="code literal-block">git checkout --orphan newBranch
git add -A  # Add all files and commit them
git commit
git branch -D master  # Deletes the master branch
git branch -m master  # Rename the current branch to master
git push -f origin master  # Force push master branch to github
git gc --aggressive --prune=all     # remove the old files
</pre></div>

<p>Deleting <code>.git/</code> always causes huge issues when I have submodules. Using <code>git
rebase --root</code> would somehow cause conflicts for me (and take long since I had
a lot of history).</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-i-get-a-class-instance-of-generic-type-t/" class="u-url">How do I get a class instance of generic type T?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-i-get-a-class-instance-of-generic-type-t/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:14:15+08:00" itemprop="datePublished" title="2023-02-17 11:14">2023-02-17 11:14</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a generics class, <code>Foo&lt;T&gt;</code>. In a method of <code>Foo</code>, I want to get the
class instance of type <code>T</code>, but I just can't call <code>T.class</code>.</p>
<p>What is the preferred way to get around it using <code>T.class</code>?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The short answer is, that there is no way to find out the runtime type of
generic type parameters in Java. I suggest reading the chapter about type
erasure in the Java Tutorial for more details.</p>
<p>A popular solution to this is to pass the <code>Class</code> of the type parameter into
the constructor of the generic type, e.g.</p>
<div class="code"><pre class="code literal-block"><span class="k">class</span> <span class="n">Foo</span><span class="s">&lt;T&gt; {</span>
<span class="s">    final Class&lt;T&gt;</span> <span class="n">typeParameterClass</span>;

    <span class="n">public</span> <span class="n">Foo</span>(<span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span>&gt; <span class="n">typeParameterClass</span>) {
        <span class="n">this</span>.<span class="n">typeParameterClass</span> = <span class="n">typeParameterClass</span>;
    }

    <span class="n">public</span> <span class="n">void</span> <span class="n">bar</span>() {
        // <span class="n">you</span> <span class="nb">can</span> <span class="n">access</span> <span class="n">the</span> <span class="n">typeParameterClass</span> <span class="n">here</span> <span class="o">and</span> <span class="nb">do</span> <span class="n">whatever</span> <span class="n">you</span> <span class="nb">like</span>
    }
}
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>I was looking for a way to do this myself without adding an extra dependency
to the classpath. After some investigation I found that it <em><strong>is</strong></em> possible
as long as you have a generic supertype. This was OK for me as I was working
with a DAO layer with a generic layer supertype. If this fits your scenario
then it's the neatest approach IMHO.</p>
<p>Most generics use cases I've come across have some kind of generic supertype
e.g. <code>List&lt;T&gt;</code> for <code>ArrayList&lt;T&gt;</code> or <code>GenericDAO&lt;T&gt;</code> for <code>DAO&lt;T&gt;</code>, etc.</p>
<h4>Pure Java solution</h4>
<p>The article <em>Accessing generic types at runtime in Java</em> explains how you can
do it using pure Java.</p>
<div class="code"><pre class="code literal-block"><span class="nv">@SuppressWarnings</span><span class="p">(</span><span class="ss">"unchecked"</span><span class="p">)</span>
<span class="k">public</span><span class="w"> </span><span class="n">GenericJpaDao</span><span class="p">()</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="n">this</span><span class="p">.</span><span class="n">entityBeanType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="k">Class</span><span class="p">)</span><span class="w"> </span><span class="p">((</span><span class="n">ParameterizedType</span><span class="p">)</span><span class="w"> </span><span class="n">getClass</span><span class="p">()</span>
<span class="w">      </span><span class="p">.</span><span class="n">getGenericSuperclass</span><span class="p">()).</span><span class="n">getActualTypeArguments</span><span class="p">()</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">);</span>
<span class="err">}</span>
</pre></div>

<h4>Spring solution</h4>
<p>My project was using Spring which is even better as Spring has a handy utility
method for finding the type. This is the best approach for me as it looks
neatest. I guess if you weren't using Spring you could write your own utility
method.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">org.springframework.core.GenericTypeResolver</span><span class="p">;</span>

<span class="n">public</span> <span class="n">abstract</span> <span class="k">class</span> <span class="nc">AbstractHibernateDao</span><span class="o">&lt;</span><span class="n">T</span> <span class="n">extends</span> <span class="n">DomainObject</span><span class="o">&gt;</span> <span class="n">implements</span> <span class="n">DataAccessObject</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
<span class="p">{</span>

    <span class="nd">@Autowired</span>
    <span class="n">private</span> <span class="n">SessionFactory</span> <span class="n">sessionFactory</span><span class="p">;</span>

    <span class="n">private</span> <span class="n">final</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">genericType</span><span class="p">;</span>

    <span class="n">private</span> <span class="n">final</span> <span class="n">String</span> <span class="n">RECORD_COUNT_HQL</span><span class="p">;</span>
    <span class="n">private</span> <span class="n">final</span> <span class="n">String</span> <span class="n">FIND_ALL_HQL</span><span class="p">;</span>

    <span class="nd">@SuppressWarnings</span><span class="p">(</span><span class="s2">"unchecked"</span><span class="p">)</span>
    <span class="n">public</span> <span class="n">AbstractHibernateDao</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">genericType</span> <span class="o">=</span> <span class="p">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">)</span> <span class="n">GenericTypeResolver</span><span class="o">.</span><span class="n">resolveTypeArgument</span><span class="p">(</span><span class="n">getClass</span><span class="p">(),</span> <span class="n">AbstractHibernateDao</span><span class="o">.</span><span class="n">class</span><span class="p">);</span>
        <span class="n">this</span><span class="o">.</span><span class="n">RECORD_COUNT_HQL</span> <span class="o">=</span> <span class="s2">"select count(*) from "</span> <span class="o">+</span> <span class="n">this</span><span class="o">.</span><span class="n">genericType</span><span class="o">.</span><span class="n">getName</span><span class="p">();</span>
        <span class="n">this</span><span class="o">.</span><span class="n">FIND_ALL_HQL</span> <span class="o">=</span> <span class="s2">"from "</span> <span class="o">+</span> <span class="n">this</span><span class="o">.</span><span class="n">genericType</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span> <span class="o">+</span> <span class="s2">" t "</span><span class="p">;</span>
    <span class="p">}</span>
</pre></div>

<h4>Full code example</h4>
<p>Some people are struggling in the comments to get this working so I wrote a
small application to show both approaches in action.
https://github.com/benthurley82/generic-type-resolver-test</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-610.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-608.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
