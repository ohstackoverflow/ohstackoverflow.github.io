<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 609) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-609.html">
<link rel="prev" href="index-610.html" type="text/html">
<link rel="next" href="index-608.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- æ¨¡æ€æ¡†ï¼ˆModalï¼‰ --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—
				</button>
				<h4 class="modal-title" id="myModalLabel">
					æŸ¥æ‰¾ç»“æœ
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				æŸ¥æ‰¾ä¸­ï¼Œè¯·ç¨å...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					å…³é—­
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/ce-shi-shi-fou-cun-zai-qian-tao-de-javascript-dui-xiang-jian/" class="u-url">æµ‹è¯•æ˜¯å¦å­˜åœ¨åµŒå¥—çš„ JavaScript å¯¹è±¡é”®</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/ce-shi-shi-fou-cun-zai-qian-tao-de-javascript-dui-xiang-jian/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:23:22+08:00" itemprop="datePublished" title="2023-02-17 11:23">2023-02-17 11:23</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>å¦‚æœæˆ‘æœ‰ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼š</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
</pre></div>

<p>å¯èƒ½ï¼ˆä½†ä¸æ˜¯ç«‹å³ï¼‰å…·æœ‰åµŒå¥—å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š</p>
<div class="code"><pre class="code literal-block"><span class="p">{</span><span class="n">level1</span><span class="p">:</span><span class="w"> </span><span class="err">{</span><span class="n">level2</span><span class="o">:</span><span class="w"> </span><span class="err">{</span><span class="n">level3</span><span class="o">:</span><span class="w"> </span><span class="s2">"level3"</span><span class="p">}</span><span class="err">}}</span><span class="o">;</span>
</pre></div>

<p>æ£€æŸ¥æ·±å±‚åµŒå¥—å¯¹è±¡ä¸­å±æ€§æ˜¯å¦å­˜åœ¨çš„æœ€ä½³æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><code>alert(test.level1);</code>äº§é‡<code>undefined</code>ï¼Œä½†<code>alert(test.level1.level2.level3);</code>å¤±è´¥äº†ã€‚</p>
<p>æˆ‘ç›®å‰æ­£åœ¨åšè¿™æ ·çš„äº‹æƒ…ï¼š</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="ss">(</span><span class="nv">test</span>.<span class="nv">level1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">test</span>.<span class="nv">level1</span>.<span class="nv">level2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">test</span>.<span class="nv">level1</span>.<span class="nv">level2</span>.<span class="nv">level3</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">alert</span><span class="ss">(</span><span class="nv">test</span>.<span class="nv">level1</span>.<span class="nv">level2</span>.<span class="nv">level3</span><span class="ss">)</span><span class="c1">;</span>
}
</pre></div>

<p>ä½†æˆ‘æƒ³çŸ¥é“æ˜¯å¦æœ‰æ›´å¥½çš„æ–¹æ³•ã€‚</p>
<p><br><br></p>
<h2>è§£ç­”</h2>
<p>å¦‚æœæ‚¨ä¸æƒ³è¦ a ï¼Œåˆ™å¿…é¡»é€æ­¥æ‰§è¡Œæ­¤æ“ä½œï¼Œ<code>TypeError</code>å› ä¸ºå¦‚æœå…¶ä¸­ä¸€ä¸ªæˆå‘˜æ˜¯<code>null</code>or
<code>undefined</code>ï¼Œå¹¶ä¸”æ‚¨å°è¯•è®¿é—®æˆå‘˜ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>æ‚¨å¯ä»¥ç®€å•åœ°<code>catch</code>æ’é™¤å¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥æµ‹è¯•å¤šä¸ªçº§åˆ«çš„å­˜åœ¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">checkNested</span><span class="p">(</span><span class="n">obj</span><span class="w"> </span><span class="cm">/*, level1, level2, ... levelN*/</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="nf">var</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">Array</span><span class="p">.</span><span class="n">prototype</span><span class="p">.</span><span class="n">slice</span><span class="p">.</span><span class="k">call</span><span class="p">(</span><span class="n">arguments</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="nf">var</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">args</span><span class="p">.</span><span class="n">length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="err">!</span><span class="n">obj</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="err">!</span><span class="n">obj</span><span class="p">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">))</span><span class="w"> </span><span class="err">{</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="o">[</span><span class="n">args[i</span><span class="o">]</span><span class="err">]</span><span class="p">;</span>
<span class="w">  </span><span class="err">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="err">}</span>

<span class="nf">var</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="nl">level1</span><span class="p">:</span><span class="err">{</span><span class="nl">level2</span><span class="p">:</span><span class="err">{</span><span class="nl">level3</span><span class="p">:</span><span class="s1">'level3'</span><span class="err">}}</span><span class="w"> </span><span class="err">}</span><span class="p">;</span>

<span class="n">checkNested</span><span class="p">(</span><span class="n">test</span><span class="p">,</span><span class="w"> </span><span class="s1">'level1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'level2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'level3'</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">true</span>
<span class="n">checkNested</span><span class="p">(</span><span class="n">test</span><span class="p">,</span><span class="w"> </span><span class="s1">'level1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'level2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'foo'</span><span class="p">);</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">false</span>
</pre></div>

<p><strong>ES6 æ›´æ–°ï¼š</strong></p>
<p>è¿™æ˜¯åŸå§‹å‡½æ•°çš„è¾ƒçŸ­ç‰ˆæœ¬ï¼Œä½¿ç”¨ ES6 åŠŸèƒ½å’Œé€’å½’ï¼ˆå®ƒä¹Ÿæ˜¯æ­£ç¡®çš„å°¾è°ƒç”¨å½¢å¼ï¼‰ï¼š</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">checkNested</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="k">level</span><span class="p">,</span><span class="w">  </span><span class="p">...</span><span class="n">rest</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">obj</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="n">undefined</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">false</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rest</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">obj</span><span class="p">.</span><span class="n">hasOwnProperty</span><span class="p">(</span><span class="k">level</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="k">true</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">checkNested</span><span class="p">(</span><span class="n">obj</span><span class="o">[</span><span class="n">level</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="n">rest</span><span class="p">)</span>
<span class="err">}</span>
</pre></div>

<p>ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æƒ³è·å–åµŒå¥—å±æ€§çš„å€¼è€Œä¸ä»…ä»…æ˜¯æ£€æŸ¥å®ƒæ˜¯å¦å­˜åœ¨ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„å•è¡Œå‡½æ•°ï¼š</p>
<div class="code"><pre class="code literal-block"><span class="k">function</span><span class="w"> </span><span class="n">getNested</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">args</span><span class="p">.</span><span class="n">reduce</span><span class="p">((</span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="k">level</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">obj</span><span class="o">[</span><span class="n">level</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span>
<span class="err">}</span>

<span class="n">const</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="nl">level1</span><span class="p">:</span><span class="err">{</span><span class="w"> </span><span class="nl">level2</span><span class="p">:</span><span class="err">{</span><span class="w"> </span><span class="nl">level3</span><span class="p">:</span><span class="s1">'level3'</span><span class="err">}</span><span class="w"> </span><span class="err">}</span><span class="w"> </span><span class="err">}</span><span class="p">;</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">getNested</span><span class="p">(</span><span class="n">test</span><span class="p">,</span><span class="w"> </span><span class="s1">'level1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'level2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'level3'</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="s1">'level3'</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">getNested</span><span class="p">(</span><span class="n">test</span><span class="p">,</span><span class="w"> </span><span class="s1">'level1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'level2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'level3'</span><span class="p">,</span><span class="w"> </span><span class="s1">'length'</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="mi">6</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">getNested</span><span class="p">(</span><span class="n">test</span><span class="p">,</span><span class="w"> </span><span class="s1">'level1'</span><span class="p">,</span><span class="w"> </span><span class="s1">'level2'</span><span class="p">,</span><span class="w"> </span><span class="s1">'foo'</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">undefined</span>
<span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="n">getNested</span><span class="p">(</span><span class="n">test</span><span class="p">,</span><span class="w"> </span><span class="s1">'a'</span><span class="p">,</span><span class="w"> </span><span class="s1">'b'</span><span class="p">));</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">undefined</span>
</pre></div>

<p>ä¸Šé¢çš„å‡½æ•°å…è®¸ä½ è·å–åµŒå¥—å±æ€§çš„å€¼ï¼Œå¦åˆ™å°†è¿”å›<code>undefined</code>ã€‚</p>
<p><strong>æ›´æ–° 2019-10-17ï¼š</strong></p>
<p>å¯é€‰é“¾æ¥ææ¡ˆåœ¨ECMAScript å§”å‘˜ä¼šæµç¨‹ä¸­è¾¾åˆ°äº†ç¬¬ 3 é˜¶æ®µï¼Œè¿™å°†å…è®¸æ‚¨é€šè¿‡ä½¿ç”¨ä»¤ç‰Œï¼ˆ<code>?.</code>æ–°çš„ <em>å¯é€‰é“¾æ¥è¿ç®—ç¬¦ï¼‰</em> å®‰å…¨åœ°è®¿é—®æ·±å±‚åµŒå¥—çš„å±æ€§ï¼š</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="err">?</span><span class="o">.</span><span class="n">level1</span><span class="err">?</span><span class="o">.</span><span class="n">level2</span><span class="err">?</span><span class="o">.</span><span class="n">level3</span>
</pre></div>

<p>å¦‚æœè®¿é—®çš„ä»»ä½•çº§åˆ«æ˜¯<code>null</code>æˆ–<code>undefined</code>è¡¨è¾¾å¼å°†<code>undefined</code>è‡ªè¡Œè§£æä¸ºã€‚</p>
<p>è¯¥ææ¡ˆè¿˜å…è®¸æ‚¨å®‰å…¨åœ°å¤„ç†æ–¹æ³•è°ƒç”¨ï¼š</p>
<div class="code"><pre class="code literal-block">obj?.level1?.method();
</pre></div>

<p>ä¸Šé¢çš„è¡¨è¾¾å¼ä¼šäº§ç”Ÿ<code>undefined</code>if <code>obj</code>, <code>obj.level1</code>, or <code>obj.level1.method</code>are <code>null</code>or
<code>undefined</code>ï¼Œå¦åˆ™ä¼šè°ƒç”¨å‡½æ•°ã€‚</p>
<p><del>æ‚¨å¯ä»¥ä½¿ç”¨å¯é€‰çš„é“¾æ¥æ’ä»¶ å¼€å§‹ä½¿ç”¨ Babel çš„æ­¤åŠŸèƒ½ã€‚</del></p>
<p>ä»Babel 7.8.0å¼€å§‹ï¼Œé»˜è®¤æ”¯æŒ ES2020</p>
<p>åœ¨ Babel REPL ä¸Šæ£€æŸ¥è¿™ä¸ªä¾‹å­ã€‚</p>
<p><strong>ğŸ‰ğŸ‰æ›´æ–°ï¼š2019 å¹´ 12 æœˆ ğŸ‰ğŸ‰</strong></p>
<p>å¯é€‰é“¾ææ¡ˆæœ€ç»ˆåœ¨ TC39 å§”å‘˜ä¼š 2019 å¹´ 12 æœˆçš„ä¼šè®®ä¸Šè¿›å…¥äº†ç¬¬ 4 é˜¶æ®µã€‚è¿™æ„å‘³ç€æ­¤åŠŸèƒ½å°†æˆä¸º <strong>ECMAScript 2020</strong>
æ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p><br></p>
<h3>æ›´å¤šå»ºè®®</h3>
<p>è¿™æ˜¯æˆ‘ä» Oliver Steele é‚£é‡Œå¾—åˆ°çš„ä¸€ä¸ªæ¨¡å¼ï¼š</p>
<div class="code"><pre class="code literal-block"><span class="k">var</span><span class="w"> </span><span class="n">level3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(((</span><span class="n">test</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{})</span><span class="o">.</span><span class="n">level1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{})</span><span class="o">.</span><span class="n">level2</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{})</span><span class="o">.</span><span class="n">level3</span><span class="p">;</span>
<span class="n">alert</span><span class="p">(</span><span class="w"> </span><span class="n">level3</span><span class="w"> </span><span class="p">);</span>
</pre></div>

<p>äº‹å®ä¸Šï¼Œæ•´ç¯‡æ–‡ç« éƒ½æ˜¯åœ¨è®¨è®ºå¦‚ä½•åœ¨ javascript ä¸­æ‰§è¡Œæ­¤æ“ä½œã€‚ä»–å†³å®šä½¿ç”¨ä¸Šè¿°è¯­æ³•ï¼ˆä¸€æ—¦ä½ ä¹ æƒ¯äº†å®ƒå°±ä¸éš¾é˜…è¯»ï¼‰ä½œä¸ºä¹ æƒ¯ç”¨æ³•ã€‚</p>
<p><br><br><a href="posts/test-for-existence-of-nested-javascript-object-key/">æŸ¥çœ‹åŸæ–‡</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/wei-shi-yao-python-setup-py-zai-travis-ci-shang-shuo-wu-xiao-ming-ling-bdist-wheel/" class="u-url">ä¸ºä»€ä¹ˆ python setup.py åœ¨ Travis CI ä¸Šè¯´æ— æ•ˆå‘½ä»¤ 'bdist_wheel'ï¼Ÿ</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/wei-shi-yao-python-setup-py-zai-travis-ci-shang-shuo-wu-xiao-ming-ling-bdist-wheel/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:22:51+08:00" itemprop="datePublished" title="2023-02-17 11:22">2023-02-17 11:22</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>æˆ‘çš„ Python åŒ…æœ‰ä¸€ä¸ª<code>setup.py</code>åœ¨ Ubuntu Trusty å’Œæ–°çš„ Vagrant Ubuntu Trusty VM
ä¸Šæœ¬åœ°æ„å»ºè‰¯å¥½çš„ï¼Œå½“æˆ‘åƒè¿™æ ·é…ç½®å®ƒæ—¶ï¼š</p>
<div class="code"><pre class="code literal-block"><span class="n">sudo</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="n">get</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">python</span><span class="w"> </span><span class="n">python</span><span class="o">-</span><span class="n">dev</span><span class="w"> </span><span class="o">--</span><span class="n">force</span><span class="o">-</span><span class="n">yes</span><span class="w"> </span><span class="o">--</span><span class="n">assume</span><span class="o">-</span><span class="n">yes</span><span class="w"> </span><span class="o">--</span><span class="n">fix</span><span class="o">-</span><span class="n">broken</span>
<span class="n">curl</span><span class="w"> </span><span class="o">--</span><span class="n">silent</span><span class="w"> </span><span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">error</span><span class="w"> </span><span class="o">--</span><span class="n">retry</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">pypa</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">get</span><span class="o">-</span><span class="n">pip</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span>
<span class="n">sudo</span><span class="w"> </span><span class="o">-</span><span class="n">H</span><span class="w"> </span><span class="n">pip</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">setuptools</span><span class="w"> </span><span class="n">wheel</span><span class="w"> </span><span class="n">virtualenv</span><span class="w"> </span><span class="o">--</span><span class="n">upgrade</span>
</pre></div>

<p>ä½†æ˜¯å½“æˆ‘åœ¨ Travis CI Trusty Beta VM ä¸ŠåšåŒæ ·çš„äº‹æƒ…æ—¶ï¼š</p>
<div class="code"><pre class="code literal-block"><span class="o">-</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">apt</span><span class="o">-</span><span class="n">get</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">python</span><span class="w"> </span><span class="n">python</span><span class="o">-</span><span class="n">dev</span><span class="w"> </span><span class="o">--</span><span class="n">force</span><span class="o">-</span><span class="n">yes</span><span class="w"> </span><span class="o">--</span><span class="n">assume</span><span class="o">-</span><span class="n">yes</span><span class="w"> </span><span class="o">--</span><span class="n">fix</span><span class="o">-</span><span class="n">broken</span>
<span class="o">-</span><span class="w"> </span><span class="n">curl</span><span class="w"> </span><span class="o">--</span><span class="n">silent</span><span class="w"> </span><span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">error</span><span class="w"> </span><span class="o">--</span><span class="n">retry</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">pypa</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">get</span><span class="o">-</span><span class="n">pip</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span>
<span class="o">-</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="o">-</span><span class="n">H</span><span class="w"> </span><span class="n">pip</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">setuptools</span><span class="w"> </span><span class="n">wheel</span><span class="w"> </span><span class="n">virtualenv</span><span class="w"> </span><span class="o">--</span><span class="n">upgrade</span>
</pre></div>

<p>æˆ‘å¾—åˆ°ï¼š</p>
<div class="code"><pre class="code literal-block"><span class="n">python2</span><span class="mf">.7</span><span class="w"> </span><span class="n">setup</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="n">bdist_wheel</span>
<span class="k">usage</span><span class="err">:</span><span class="w"> </span><span class="n">setup</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="o">[</span><span class="n">global_opts</span><span class="o">]</span><span class="w"> </span><span class="n">cmd1</span><span class="w"> </span><span class="o">[</span><span class="n">cmd1_opts</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">cmd2 [cmd2_opts</span><span class="o">]</span><span class="w"> </span><span class="p">...</span><span class="err">]</span>
<span class="w">   </span><span class="ow">or</span><span class="err">:</span><span class="w"> </span><span class="n">setup</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="o">--</span><span class="n">help</span><span class="w"> </span><span class="o">[</span><span class="n">cmd1 cmd2 ...</span><span class="o">]</span>
<span class="w">   </span><span class="ow">or</span><span class="err">:</span><span class="w"> </span><span class="n">setup</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="o">--</span><span class="n">help</span><span class="o">-</span><span class="n">commands</span>
<span class="w">   </span><span class="ow">or</span><span class="err">:</span><span class="w"> </span><span class="n">setup</span><span class="p">.</span><span class="n">py</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span><span class="o">--</span><span class="n">help</span>
<span class="nl">error</span><span class="p">:</span><span class="w"> </span><span class="n">invalid</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="s1">'bdist_wheel'</span>
</pre></div>

<p>è¿™ä¸ºä»€ä¹ˆæˆ‘ä¸èƒ½åœ¨ python ä¸­åˆ›å»ºä¸€ä¸ªè½®å­ï¼Ÿæ˜¯ç›¸å…³çš„ï¼Œä½†è¯·æ³¨æ„æˆ‘æ­£åœ¨å®‰è£… wheel å¹¶å‡çº§ setuptoolsã€‚</p>
<p><br><br></p>
<h2>è§£ç­”</h2>
<p>å¿…é¡»å®‰è£…<code>wheel</code>è½¯ä»¶åŒ…ã€‚ä¸€åˆ‡éƒ½æ˜¯æœ€æ–°çš„ï¼Œä½†ä»ç„¶å‡ºç°é”™è¯¯ã€‚</p>
<div class="code"><pre class="code literal-block">pip install wheel
</pre></div>

<p>ç„¶å</p>
<div class="code"><pre class="code literal-block">python setup.py bdist_wheel
</pre></div>

<p>å·¥ä½œæ²¡æœ‰é—®é¢˜ã€‚</p>
<p><br></p>
<h3>æ›´å¤šå»ºè®®</h3>
<p>åœ¨ AWS ä¸Š<code>Ubuntu 18.04 new machine</code>ï¼Œéœ€è¦ä»¥ä¸‹å®‰è£…ï¼š</p>
<div class="code"><pre class="code literal-block">sudo apt-get install gcc libpq-dev -y
sudo apt-get install python-dev  python-pip -y
sudo apt-get install python3-dev python3-pip python3-venv python3-wheel -y
pip3 install wheel
</pre></div>

<p>ç‰¹åˆ«æ˜¯æœ€åä¸€è¡Œæ˜¯å¿…é¡»çš„ã€‚<br>
ä½†æ˜¯ï¼Œå¯èƒ½éœ€è¦ 3 è¡Œä½œä¸ºå…ˆå†³æ¡ä»¶ã€‚</p>
<p><br><br><a href="posts/why-is-python-setup-py-saying-invalid-command-bdist-wheel-on-travis-ci/">æŸ¥çœ‹åŸæ–‡</a></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/zhao-bu-dao-mo-kuai-mo-kuai-ming-cheng-de-sheng-ming-wen-jian-path-to-module-name-js-yin-shi-ju-you-any-lei-xing/" class="u-url">æ‰¾ä¸åˆ°æ¨¡å—â€œæ¨¡å—åç§°â€çš„å£°æ˜æ–‡ä»¶ã€‚'/path/to/module-name.js' éšå¼å…·æœ‰ 'any' ç±»å‹</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/zhao-bu-dao-mo-kuai-mo-kuai-ming-cheng-de-sheng-ming-wen-jian-path-to-module-name-js-yin-shi-ju-you-any-lei-xing/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T11:22:23+08:00" itemprop="datePublished" title="2023-02-17 11:22">2023-02-17 11:22</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>æˆ‘é˜…è¯»äº† TypeScriptæ¨¡å—è§£æçš„å·¥ä½œåŸç†ã€‚</p>
<p>æˆ‘æœ‰ä»¥ä¸‹å­˜å‚¨åº“ï¼š@ts-stack/diã€‚ç¼–è¯‘åçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<div class="code"><pre class="code literal-block">â”œâ”€â”€ dist
â”‚Â Â  â”œâ”€â”€ annotations.d.ts
â”‚Â Â  â”œâ”€â”€ annotations.js
â”‚Â Â  â”œâ”€â”€ index.d.ts
â”‚Â Â  â”œâ”€â”€ index.js
â”‚Â Â  â”œâ”€â”€ injector.d.ts
â”‚Â Â  â”œâ”€â”€ injector.js
â”‚Â Â  â”œâ”€â”€ profiler.d.ts
â”‚Â Â  â”œâ”€â”€ profiler.js
â”‚Â Â  â”œâ”€â”€ providers.d.ts
â”‚Â Â  â”œâ”€â”€ providers.js
â”‚Â Â  â”œâ”€â”€ util.d.ts
â”‚Â Â  â””â”€â”€ util.js
â”œâ”€â”€ LICENSE
â”œâ”€â”€ package.json
â”œâ”€â”€ README.md
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ annotations.ts
â”‚Â Â  â”œâ”€â”€ index.ts
â”‚Â Â  â”œâ”€â”€ injector.ts
â”‚Â Â  â”œâ”€â”€ profiler.ts
â”‚Â Â  â”œâ”€â”€ providers.ts
â”‚Â Â  â””â”€â”€ util.ts
â””â”€â”€ tsconfig.json
</pre></div>

<p>åœ¨æˆ‘çš„ package.json ä¸­ï¼Œæˆ‘å†™äº†<code>"main": "dist/index.js"</code>.</p>
<p>åœ¨ Node.js ä¸­ä¸€åˆ‡æ­£å¸¸ï¼Œä½† TypeScriptï¼š</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span><span class="n">Injector</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">'@ts-stack/di'</span><span class="p">;</span>
</pre></div>

<blockquote>
<p>æ‰¾ä¸åˆ°æ¨¡å—â€œ@ts-stack/diâ€çš„å£°æ˜æ–‡ä»¶ã€‚'/path/to/node_modules/@ts-stack/di/dist/index.js'
éšå¼å…·æœ‰ 'any' ç±»å‹ã€‚</p>
</blockquote>
<p>ç„¶è€Œï¼Œå¦‚æœæˆ‘æŒ‰å¦‚ä¸‹æ–¹å¼å¯¼å…¥ï¼Œé‚£ä¹ˆä¸€åˆ‡æ­£å¸¸ï¼š</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span><span class="n">Injector</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">'/path/to/node_modules/@ts-stack/di/dist/index.js'</span><span class="p">;</span>
</pre></div>

<p>æˆ‘ç©¶ç«Ÿåšé”™äº†ä»€ä¹ˆï¼Ÿ</p>
<p><br><br></p>
<h2>è§£ç­”</h2>
<h4>å¯¹äºå®‰è£…è‡ªå·±çš„ npm åŒ…çš„æƒ…å†µ</h4>
<p>å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…ï¼Œè¯·å‚é˜…ä¸‹é¢çš„å›ç­”ã€‚</p>
<p><code>.js</code>ä»ä¸­åˆ é™¤ã€‚<code>"main": "dist/index.js"</code>_<code>package.json</code></p>
<div class="code"><pre class="code literal-block">"main": "dist/index",
</pre></div>

<p>è¿˜è¦æ ¹æ® TypeScript æ–‡æ¡£<code>typings</code>æ·»åŠ <code>package.json</code>ï¼š</p>
<div class="code"><pre class="code literal-block">"main": "dist/index",
"typings": "dist/index",
</pre></div>

<p>è¯¥æ–‡ä»¶å¤¹<code>dist</code>æ˜¯ TS ç¼–è¯‘å™¨å­˜å‚¨æ¨¡å—æ–‡ä»¶çš„åœ°æ–¹ã€‚</p>
<p><br></p>
<h3>æ›´å¤šå»ºè®®</h3>
<p><code>'foo'</code>å¦‚æœæ‚¨è¦å¯¼å…¥ä¸æä¾›ä»»ä½•ç±»å‹çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæ— è®ºæ˜¯åœ¨åº“æœ¬èº«è¿˜æ˜¯åœ¨<code>@types/foo</code>åŒ…ä¸­ï¼ˆä»DefinitelyTypedå­˜å‚¨åº“ç”Ÿæˆï¼‰ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥é€šè¿‡åœ¨å¸¦æ‰©å±•åçš„æ–‡ä»¶<code>.d.ts</code>ã€‚<code>.d.ts</code>TypeScriptåœ¨ä¸æŸ¥æ‰¾æ™®é€šæ–‡ä»¶ç›¸åŒçš„ä½ç½®æŸ¥æ‰¾æ–‡ä»¶ï¼š<code>.ts</code>å¦‚<code>tsconfig.json</code>.</p>
<div class="code"><pre class="code literal-block"><span class="c1">// foo.d.ts</span>
<span class="n">declare</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="s">'foo'</span><span class="p">;</span>
</pre></div>

<p>ç„¶åï¼Œå½“æ‚¨å¯¼å…¥æ—¶ï¼Œ<code>foo</code>å®ƒåªä¼šè¢«è¾“å…¥ä¸º<code>any</code>.</p>
<hr>
<p>æˆ–è€…ï¼Œå¦‚æœæ‚¨æƒ³æ»šåŠ¨è‡ªå·±çš„ç±»å‹ï¼Œæ‚¨ä¹Ÿå¯ä»¥è¿™æ ·åšï¼š</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">foo</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">ts</span>
<span class="n">declare</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="s1">'foo'</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">export</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">getRandomNumber</span><span class="p">():</span><span class="w"> </span><span class="n">number</span>
<span class="p">}</span>
</pre></div>

<p>ç„¶åè¿™å°†æ­£ç¡®ç¼–è¯‘ï¼š</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="p">{</span> <span class="n">getRandomNumber</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">'foo'</span><span class="p">;</span>
<span class="n">const</span> <span class="n">x</span> <span class="o">=</span> <span class="n">getRandomNumber</span><span class="p">();</span> <span class="o">//</span> <span class="n">x</span> <span class="ow">is</span> <span class="n">inferred</span> <span class="k">as</span> <span class="n">number</span>
</pre></div>

<p>æ‚¨ä¸å¿…ä¸ºæ¨¡å—æä¾›å®Œæ•´çš„ç±»å‹ï¼Œåªéœ€ä¸ºæ‚¨å®é™…ä½¿ç”¨çš„ä½æä¾›è¶³å¤Ÿçš„ç±»å‹ï¼ˆå¹¶ä¸”éœ€è¦æ­£ç¡®çš„ç±»å‹ï¼‰ï¼Œå› æ­¤å¦‚æœæ‚¨ä½¿ç”¨çš„ API æ•°é‡ç›¸å½“å°‘ï¼Œè¿™å°±ç‰¹åˆ«å®¹æ˜“åšåˆ°ã€‚</p>
<hr>
<p>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ‚¨ä¸å…³å¿ƒå¤–éƒ¨åº“çš„ç±»å‹å¹¶å¸Œæœ›å°†æ‰€æœ‰æ²¡æœ‰ç±»å‹çš„åº“å¯¼å…¥ä¸º<code>any</code>ï¼Œæ‚¨å¯ä»¥å°†å…¶æ·»åŠ åˆ°å…·æœ‰æ‰©å±•åçš„æ–‡ä»¶ä¸­<code>.d.ts</code>ï¼š</p>
<div class="code"><pre class="code literal-block">declare module '*';
</pre></div>

<p>è¿™æ ·åšçš„å¥½å¤„ï¼ˆå’Œç¼ºç‚¹ï¼‰æ˜¯ä½ å¯ä»¥å¯¼å…¥ä»»ä½•ä¸œè¥¿ï¼ŒTS ä¼šç¼–è¯‘ã€‚</p>
<p><br><br><a href="posts/could-not-find-a-declaration-file-for-module-module-name-path-to-module-name-js-implicitly-has-an-any-type/">æŸ¥çœ‹åŸæ–‡</a></p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-610.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-608.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents Â© 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
