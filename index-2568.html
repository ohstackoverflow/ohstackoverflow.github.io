<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2568) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2568.html">
<link rel="prev" href="index-2569.html" type="text/html">
<link rel="next" href="index-2567.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-move-a-git-repository-with-all-branches-from-bitbucket-to-github/" class="u-url">How can I move a Git repository with all branches from Bitbucket to GitHub?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-move-a-git-repository-with-all-branches-from-bitbucket-to-github/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T01:40:18+08:00" itemprop="datePublished" title="2023-03-05 01:40">2023-03-05 01:40</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the best way to move a Git repository with all branches and full
history from Bitbucket to GitHub?</p>
<p>Is there a script or a list of commands I have to use?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You can refer to the GitHub page "Duplicating a repository"</p>
<p>It uses:</p>
<ul>
<li>
<code>git clone --mirror</code>: to clone every references (commits, tags, branches)</li>
<li>
<code>git push --mirror</code>: to push everything</li>
</ul>
<p>That would give:</p>
<div class="code"><pre class="code literal-block">git clone --mirror https://bitbucket.org/exampleuser/repository-to-mirror.git
# Make a bare mirrored clone of the repository

cd repository-to-mirror.git
git remote set-url --push origin https://github.com/exampleuser/mirrored
# Set the push location to your mirror

git push --mirror
</pre></div>

<p>As Noted in the comments by L S:</p>
<ul>
<li>
<p>it is easier to use the <code>Import Code</code> feature from GitHub described by MarMass.<br>
See https://github.com/new/import</p>
</li>
<li>
<p><strong><em>Unless</em></strong>... your repo includes a large file: the problem is, the import tool will fail without a clear error message. Only GitHub Support would be able to diagnose what happened.</p>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>You can refer to the GitHub page "Duplicating a repository"</p>
<p>It uses:</p>
<ul>
<li>
<code>git clone --mirror</code>: to clone every references (commits, tags, branches)</li>
<li>
<code>git push --mirror</code>: to push everything</li>
</ul>
<p>That would give:</p>
<div class="code"><pre class="code literal-block">git clone --mirror https://bitbucket.org/exampleuser/repository-to-mirror.git
# Make a bare mirrored clone of the repository

cd repository-to-mirror.git
git remote set-url --push origin https://github.com/exampleuser/mirrored
# Set the push location to your mirror

git push --mirror
</pre></div>

<p>As Noted in the comments by L S:</p>
<ul>
<li>
<p>it is easier to use the <code>Import Code</code> feature from GitHub described by MarMass.<br>
See https://github.com/new/import</p>
</li>
<li>
<p><strong><em>Unless</em></strong>... your repo includes a large file: the problem is, the import tool will fail without a clear error message. Only GitHub Support would be able to diagnose what happened.</p>
</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-tell-if-a-string-repeats-itself-in-python/" class="u-url">How can I tell if a string repeats itself in Python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-tell-if-a-string-repeats-itself-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T01:38:48+08:00" itemprop="datePublished" title="2023-03-05 01:38">2023-03-05 01:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I'm looking for a way to test whether or not a given string repeats itself for
the entire string or not.</p>
<p>Examples:</p>
<div class="code"><pre class="code literal-block">[
    '0045662100456621004566210045662100456621',             # '00456621'
    '0072992700729927007299270072992700729927',             # '00729927'
    '001443001443001443001443001443001443001443',           # '001443'
    '037037037037037037037037037037037037037037037',        # '037'
    '047619047619047619047619047619047619047619',           # '047619'
    '002457002457002457002457002457002457002457',           # '002457'
    '001221001221001221001221001221001221001221',           # '001221'
    '001230012300123001230012300123001230012300123',        # '00123'
    '0013947001394700139470013947001394700139470013947',    # '0013947'
    '001001001001001001001001001001001001001001001001001',  # '001'
    '001406469760900140646976090014064697609',              # '0014064697609'
]
</pre></div>

<p>are strings which repeat themselves, and</p>
<div class="code"><pre class="code literal-block">[
    '004608294930875576036866359447',
    '00469483568075117370892018779342723',
    '004739336492890995260663507109',
    '001508295625942684766214177978883861236802413273',
    '007518796992481203',
    '0071942446043165467625899280575539568345323741',
    '0434782608695652173913',
    '0344827586206896551724137931',
    '002481389578163771712158808933',
    '002932551319648093841642228739',
    '0035587188612099644128113879',
    '003484320557491289198606271777',
    '00115074798619102416570771',
]
</pre></div>

<p>are examples of ones that do not.</p>
<p>The repeating sections of the strings I'm given can be quite long, and the
strings themselves can be 500 or more characters, so looping through each
character trying to build a pattern then checking the pattern vs the rest of
the string seems awful slow. Multiply that by potentially hundreds of strings
and I can't see any intuitive solution.</p>
<p>I've looked into regexes a bit and they seem good for when you know what
you're looking for, or at least the length of the pattern you're looking for.
Unfortunately, I know neither.</p>
<p>How can I tell if a string is repeating itself and if it is, what the shortest
repeating subsequence is?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here's a concise solution which avoids regular expressions and slow in-Python
loops:</p>
<div class="code"><pre class="code literal-block"><span class="nv">def</span><span class="w"> </span><span class="nv">principal_period</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">(</span><span class="nv">s</span><span class="o">+</span><span class="nv">s</span><span class="ss">)</span>.<span class="nv">find</span><span class="ss">(</span><span class="nv">s</span>,<span class="w"> </span><span class="mi">1</span>,<span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="ss">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">None</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="nv">s</span>[:<span class="nv">i</span>]
</pre></div>

<p>See the Community Wiki answer started by @davidism for benchmark results. In
summary,</p>
<blockquote>
<p>David Zhang's solution is the clear winner, outperforming all others by at
least 5x for the large example set.</p>
</blockquote>
<p>(That answer's words, not mine.)</p>
<p>This is based on the observation that a string is periodic if and only if it
is equal to a nontrivial rotation of itself. Kudos to @AleksiTorhamo for
realizing that we can then recover the principal period from the index of the
first occurrence of <code>s</code> in <code>(s+s)[1:-1]</code>, and for informing me of the optional
<code>start</code> and <code>end</code> arguments of Python's <code>string.find</code>.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Here's a solution using regular expressions.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">re</span>

<span class="n">REPEATER</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">"(.+?)\1+$"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">repeated</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="n">match</span> <span class="o">=</span> <span class="n">REPEATER</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">match</span> <span class="k">else</span> <span class="kc">None</span>
</pre></div>

<p>Iterating over the examples in the question:</p>
<div class="code"><pre class="code literal-block"><span class="nv">examples</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[
<span class="w">    </span><span class="s1">'0045662100456621004566210045662100456621'</span>,
<span class="w">    </span><span class="s1">'0072992700729927007299270072992700729927'</span>,
<span class="w">    </span><span class="s1">'001443001443001443001443001443001443001443'</span>,
<span class="w">    </span><span class="s1">'037037037037037037037037037037037037037037037'</span>,
<span class="w">    </span><span class="s1">'047619047619047619047619047619047619047619'</span>,
<span class="w">    </span><span class="s1">'002457002457002457002457002457002457002457'</span>,
<span class="w">    </span><span class="s1">'001221001221001221001221001221001221001221'</span>,
<span class="w">    </span><span class="s1">'001230012300123001230012300123001230012300123'</span>,
<span class="w">    </span><span class="s1">'0013947001394700139470013947001394700139470013947'</span>,
<span class="w">    </span><span class="s1">'001001001001001001001001001001001001001001001001001'</span>,
<span class="w">    </span><span class="s1">'001406469760900140646976090014064697609'</span>,
<span class="w">    </span><span class="s1">'004608294930875576036866359447'</span>,
<span class="w">    </span><span class="s1">'00469483568075117370892018779342723'</span>,
<span class="w">    </span><span class="s1">'004739336492890995260663507109'</span>,
<span class="w">    </span><span class="s1">'001508295625942684766214177978883861236802413273'</span>,
<span class="w">    </span><span class="s1">'007518796992481203'</span>,
<span class="w">    </span><span class="s1">'0071942446043165467625899280575539568345323741'</span>,
<span class="w">    </span><span class="s1">'0434782608695652173913'</span>,
<span class="w">    </span><span class="s1">'0344827586206896551724137931'</span>,
<span class="w">    </span><span class="s1">'002481389578163771712158808933'</span>,
<span class="w">    </span><span class="s1">'002932551319648093841642228739'</span>,
<span class="w">    </span><span class="s1">'0035587188612099644128113879'</span>,
<span class="w">    </span><span class="s1">'003484320557491289198606271777'</span>,
<span class="w">    </span><span class="s1">'00115074798619102416570771'</span>,
]

<span class="k">for</span><span class="w"> </span><span class="nv">e</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">examples</span>:
<span class="w">    </span><span class="nv">sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">repeated</span><span class="ss">(</span><span class="nv">e</span><span class="ss">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nv">sub</span>:
<span class="w">        </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"%r: %r"</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="ss">(</span><span class="nv">e</span>,<span class="w"> </span><span class="nv">sub</span><span class="ss">))</span>
<span class="w">    </span><span class="k">else</span>:
<span class="w">        </span><span class="nv">print</span><span class="ss">(</span><span class="s2">"%r does not repeat."</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="nv">e</span><span class="ss">)</span>
</pre></div>

<p>... produces this output:</p>
<div class="code"><pre class="code literal-block">'0045662100456621004566210045662100456621': '00456621'
'0072992700729927007299270072992700729927': '00729927'
'001443001443001443001443001443001443001443': '001443'
'037037037037037037037037037037037037037037037': '037'
'047619047619047619047619047619047619047619': '047619'
'002457002457002457002457002457002457002457': '002457'
'001221001221001221001221001221001221001221': '001221'
'001230012300123001230012300123001230012300123': '00123'
'0013947001394700139470013947001394700139470013947': '0013947'
'001001001001001001001001001001001001001001001001001': '001'
'001406469760900140646976090014064697609': '0014064697609'
'004608294930875576036866359447' does not repeat.
'00469483568075117370892018779342723' does not repeat.
'004739336492890995260663507109' does not repeat.
'001508295625942684766214177978883861236802413273' does not repeat.
'007518796992481203' does not repeat.
'0071942446043165467625899280575539568345323741' does not repeat.
'0434782608695652173913' does not repeat.
'0344827586206896551724137931' does not repeat.
'002481389578163771712158808933' does not repeat.
'002932551319648093841642228739' does not repeat.
'0035587188612099644128113879' does not repeat.
'003484320557491289198606271777' does not repeat.
'00115074798619102416570771' does not repeat.
</pre></div>

<p>The regular expression <code>(.+?)\1+$</code> is divided into three parts:</p>
<ol>
<li>
<p><code>(.+?)</code> is a matching group containing at least one (but as few as possible) of any character (because <code>+?</code> is non-greedy).</p>
</li>
<li>
<p><code>\1+</code> checks for at least one repetition of the matching group in the first part.</p>
</li>
<li>
<p><code>$</code> checks for the end of the string, to ensure that there's no extra, non-repeating content after the repeated substrings (and using <code>re.match()</code> ensures that there's no non-repeating text <em>before</em> the repeated substrings).</p>
</li>
</ol>
<p>In Python 3.4 and later, you could drop the <code>$</code> and use <code>re.fullmatch()</code>
instead, or (in any Python at least as far back as 2.3) go the other way and
use <code>re.search()</code> with the regex <code>^(.+?)\1+$</code>, all of which are more down to
personal taste than anything else.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/pandas-replace-nan-with-blank-empty-string/" class="u-url">Pandas Replace NaN with blank/empty string</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/pandas-replace-nan-with-blank-empty-string/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-05T01:37:35+08:00" itemprop="datePublished" title="2023-03-05 01:37">2023-03-05 01:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a Pandas Dataframe as shown below:</p>
<div class="code"><pre class="code literal-block">    1    2       3
 0  a  NaN    read
 1  b    l  unread
 2  c  NaN    read
</pre></div>

<p>I want to remove the NaN values with an empty string so that it looks like so:</p>
<div class="code"><pre class="code literal-block">    1    2       3
 0  a   ""    read
 1  b    l  unread
 2  c   ""    read
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="kp">nan</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

<p>This might help. It will replace all NaNs with an empty string.</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="kp">nan</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

<p>This might help. It will replace all NaNs with an empty string.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2569.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2567.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
