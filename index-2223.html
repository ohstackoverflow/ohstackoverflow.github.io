<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2223) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2223.html">
<link rel="prev" href="index-2224.html" type="text/html">
<link rel="next" href="index-2222.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/select2-doesn-t-work-when-embedded-in-a-bootstrap-modal/" class="u-url">Select2 doesn't work when embedded in a bootstrap modal</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/select2-doesn-t-work-when-embedded-in-a-bootstrap-modal/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T00:03:24+08:00" itemprop="datePublished" title="2023-03-04 00:03">2023-03-04 00:03</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>When I use a select2 (input) in bootstrap modal, I can't type anything into
it. It's like disabled? Outside the modal select2 works fine.</p>
<p><img alt="enter image description here" src="images/h0I0M.jpg"></p>
<p>Working example: http://jsfiddle.net/byJy8/1/ code:</p>
<div class="code"><pre class="code literal-block"><span class="cm">&lt;!-- Modal --&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"myModal"</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal hide fade"</span><span class="w"> </span><span class="na">tabindex=</span><span class="s">"-1"</span><span class="w"> </span><span class="na">role=</span><span class="s">"dialog"</span><span class="w"> </span><span class="na">aria-labelledby=</span><span class="s">"myModalLabel"</span><span class="w"> </span><span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-header"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">type=</span><span class="s">"button"</span><span class="w"> </span><span class="na">class=</span><span class="s">"close"</span><span class="w"> </span><span class="na">data-dismiss=</span><span class="s">"modal"</span><span class="w"> </span><span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;</span>×<span class="nt">&lt;/button&gt;</span>
<span class="w">        </span><span class="nt">&lt;h3</span><span class="w"> </span><span class="na">id=</span><span class="s">"myModalLabel"</span><span class="nt">&gt;</span>Panel<span class="nt">&lt;/h3&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-body"</span><span class="w"> </span><span class="na">style=</span><span class="s">"max-height: 800px"</span><span class="nt">&gt;</span><span class="w">          </span>
<span class="w">      </span><span class="nt">&lt;form</span><span class="w"> </span><span class="na">class=</span><span class="s">"form-horizontal"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="cm">&lt;!-- Text input--&gt;</span>
<span class="w">        </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"control-group"</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;label</span><span class="w"> </span><span class="na">class=</span><span class="s">"control-label"</span><span class="w"> </span><span class="na">for=</span><span class="s">"vdn_number"</span><span class="nt">&gt;</span>Numer<span class="nt">&lt;/label&gt;</span>
<span class="w">            </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"controls"</span><span class="nt">&gt;</span>
<span class="w">                </span><span class="cm">&lt;!-- seleect2 --&gt;</span>
<span class="w">                </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">name=</span><span class="s">"vdn_number"</span><span class="w"> </span><span class="na">type=</span><span class="s">"hidden"</span><span class="w"> </span><span class="na">id=</span><span class="s">"vdn_number"</span><span class="w">  </span><span class="na">class=</span><span class="s">"input-large"</span><span class="w"> </span><span class="na">required=</span><span class="s">""</span><span class="w">  </span><span class="nt">/&gt;</span>
<span class="w">            </span><span class="nt">&lt;/div&gt;</span>
<span class="w">        </span><span class="nt">&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;/form&gt;</span><span class="w">    </span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-footer"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">class=</span><span class="s">"btn"</span><span class="w"> </span><span class="na">data-dismiss=</span><span class="s">"modal"</span><span class="w"> </span><span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;</span>Close<span class="nt">&lt;/button&gt;</span>
<span class="w">        </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">class=</span><span class="s">"btn btn-primary"</span><span class="nt">&gt;</span>Save<span class="w"> </span>changes<span class="nt">&lt;/button&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<h3>JS</h3>
<div class="code"><pre class="code literal-block"><span class="o">$(</span><span class="s2">"#vdn_number"</span><span class="o">)</span><span class="p">.</span><span class="nc">select2</span><span class="o">(</span><span class="p">{</span>
<span class="w">    </span><span class="n">placeholder</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000"</span><span class="p">,</span>
<span class="w">    </span><span class="n">minimumInputLength</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">    </span><span class="n">ajax</span><span class="o">:</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="n">url</span><span class="o">:</span><span class="w"> </span><span class="s2">"getAjaxData/"</span><span class="p">,</span>
<span class="w">        </span><span class="n">dataType</span><span class="o">:</span><span class="w"> </span><span class="s1">'json'</span><span class="p">,</span>
<span class="w">        </span><span class="n">type</span><span class="o">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span>
<span class="w">        </span><span class="n">data</span><span class="o">:</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="p">(</span><span class="n">term</span><span class="p">,</span><span class="w"> </span><span class="kc">page</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="n">return</span><span class="w"> </span><span class="err">{</span>
<span class="w">                </span><span class="n">q</span><span class="o">:</span><span class="w"> </span><span class="n">term</span><span class="p">,</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">search</span><span class="w"> </span><span class="n">term</span>
<span class="w">                </span><span class="n">col</span><span class="o">:</span><span class="w"> </span><span class="s1">'vdn'</span>
<span class="w">            </span><span class="p">}</span><span class="o">;</span>
<span class="w">        </span><span class="err">}</span><span class="o">,</span>
<span class="w">        </span><span class="nt">results</span><span class="o">:</span><span class="w"> </span><span class="nt">function</span><span class="w"> </span><span class="o">(</span><span class="nt">data</span><span class="o">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">parse</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">results</span><span class="w"> </span><span class="err">into</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">format</span><span class="w"> </span><span class="err">expected</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">Select2.</span>
<span class="w">            </span><span class="err">//</span><span class="w"> </span><span class="err">since</span><span class="w"> </span><span class="err">we</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">using</span><span class="w"> </span><span class="err">custom</span><span class="w"> </span><span class="err">formatting</span><span class="w"> </span><span class="err">functions</span><span class="w"> </span><span class="err">we</span><span class="w"> </span><span class="err">do</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">need</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">alter</span><span class="w"> </span><span class="err">remote</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">data</span>
<span class="w">            </span><span class="err">return</span><span class="w"> </span><span class="err">{</span><span class="n">results</span><span class="p">:</span><span class="w"> </span><span class="n">data</span><span class="p">}</span><span class="o">;</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">    </span><span class="err">}</span>
<span class="err">}</span><span class="o">);</span>
</pre></div>

<p>answers:</p>
<p>here you can find a quick fix</p>
<p>and here is 'the right way': Select2 doesn't work when embedded in a bootstrap
modal</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Ok, I've got it to work.</p>
<p>change</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"myModal"</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal hide fade"</span><span class="w"> </span><span class="na">tabindex=</span><span class="s">"-1"</span><span class="w"> </span><span class="na">role=</span><span class="s">"dialog"</span><span class="w"> </span><span class="na">aria-labelledby=</span><span class="s">"myModalLabel"</span><span class="w"> </span><span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-header"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">type=</span><span class="s">"button"</span><span class="w"> </span><span class="na">class=</span><span class="s">"close"</span><span class="w"> </span><span class="na">data-dismiss=</span><span class="s">"modal"</span><span class="w"> </span><span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;</span>×<span class="nt">&lt;/button&gt;</span>
<span class="w">        </span><span class="nt">&lt;h3</span><span class="w"> </span><span class="na">id=</span><span class="s">"myModalLabel"</span><span class="nt">&gt;</span>Panel<span class="nt">&lt;/h3&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-body"</span><span class="w"> </span><span class="na">style=</span><span class="s">"max-height: 800px"</span><span class="nt">&gt;</span>
</pre></div>

<p>to</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"myModal"</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal hide fade"</span><span class="w"> </span><span class="na">role=</span><span class="s">"dialog"</span><span class="w"> </span><span class="na">aria-labelledby=</span><span class="s">"myModalLabel"</span><span class="w"> </span><span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-header"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">type=</span><span class="s">"button"</span><span class="w"> </span><span class="na">class=</span><span class="s">"close"</span><span class="w"> </span><span class="na">data-dismiss=</span><span class="s">"modal"</span><span class="w"> </span><span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;</span>×<span class="nt">&lt;/button&gt;</span>
<span class="w">        </span><span class="nt">&lt;h3</span><span class="w"> </span><span class="na">id=</span><span class="s">"myModalLabel"</span><span class="nt">&gt;</span>Panel<span class="nt">&lt;/h3&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-body"</span><span class="w"> </span><span class="na">style=</span><span class="s">"max-height: 800px"</span><span class="nt">&gt;</span>
</pre></div>

<p>(remove <strong>tabindex="-1"</strong> from modal)</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>For Select2 v4:</strong></p>
<p>Use <code>dropdownParent</code> to attach the dropdown to the modal dialog, rather than
the HTML body.</p>
<div class="code"><pre class="code literal-block"><span class="cm">&lt;!-- Modal --&gt;</span>
<span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal fade"</span><span class="w"> </span><span class="na">id=</span><span class="s">"myModal"</span><span class="w"> </span><span class="na">tabindex=</span><span class="s">"-1"</span><span class="w"> </span><span class="na">role=</span><span class="s">"dialog"</span><span class="w"> </span><span class="na">aria-labelledby=</span><span class="s">"myModalLabel"</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-dialog"</span><span class="w"> </span><span class="na">role=</span><span class="s">"document"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-content"</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-header"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">type=</span><span class="s">"button"</span><span class="w"> </span><span class="na">class=</span><span class="s">"close"</span><span class="w"> </span><span class="na">data-dismiss=</span><span class="s">"modal"</span><span class="w"> </span><span class="na">aria-label=</span><span class="s">"Close"</span><span class="nt">&gt;&lt;span</span><span class="w"> </span><span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;</span><span class="ni">&amp;times;</span><span class="nt">&lt;/span&gt;&lt;/button&gt;</span>
<span class="w">        </span><span class="nt">&lt;h4</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-title"</span><span class="w"> </span><span class="na">id=</span><span class="s">"myModalLabel"</span><span class="nt">&gt;</span>Modal<span class="w"> </span>title<span class="nt">&lt;/h4&gt;</span>
<span class="w">      </span><span class="nt">&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-body"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;select</span><span class="w"> </span><span class="na">id=</span><span class="s">"select2insidemodal"</span><span class="w"> </span><span class="na">multiple=</span><span class="s">"multiple"</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">"AL"</span><span class="nt">&gt;</span>Alabama<span class="nt">&lt;/option&gt;</span>
<span class="w">            </span>...
<span class="w">          </span><span class="nt">&lt;option</span><span class="w"> </span><span class="na">value=</span><span class="s">"WY"</span><span class="nt">&gt;</span>Wyoming<span class="nt">&lt;/option&gt;</span>
<span class="w">        </span><span class="nt">&lt;/select&gt;</span>
<span class="w">      </span><span class="nt">&lt;/div&gt;</span>
<span class="w">      </span><span class="nt">&lt;div</span><span class="w"> </span><span class="na">class=</span><span class="s">"modal-footer"</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">type=</span><span class="s">"button"</span><span class="w"> </span><span class="na">class=</span><span class="s">"btn btn-default"</span><span class="w"> </span><span class="na">data-dismiss=</span><span class="s">"modal"</span><span class="nt">&gt;</span>Close<span class="nt">&lt;/button&gt;</span>
<span class="w">        </span><span class="nt">&lt;button</span><span class="w"> </span><span class="na">type=</span><span class="s">"button"</span><span class="w"> </span><span class="na">class=</span><span class="s">"btn btn-primary"</span><span class="nt">&gt;</span>Save<span class="w"> </span>changes<span class="nt">&lt;/button&gt;</span>
<span class="w">      </span><span class="nt">&lt;/div&gt;</span>
<span class="w">    </span><span class="nt">&lt;/div&gt;</span>
<span class="w">  </span><span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>


<span class="nt">&lt;script&gt;</span>

$(document).ready(function()<span class="w"> </span>{
<span class="w">  </span>$("#select2insidemodal").select2({
<span class="w">    </span>dropdownParent:<span class="w"> </span>$("#myModal")
<span class="w">  </span>});
});

<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p>This will attach the Select2 dropdown so it falls within the DOM of the modal
rather than to the HTML body (the default). See
https://select2.org/dropdown#dropdown-placement</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-s-the-difference-between-normal-reload-hard-reload-and-empty-cache-and-hard-reload-in-chrome/" class="u-url">What's the difference between "Normal Reload", "Hard Reload", and "Empty Cache and Hard Reload" in Chrome?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-s-the-difference-between-normal-reload-hard-reload-and-empty-cache-and-hard-reload-in-chrome/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T00:01:44+08:00" itemprop="datePublished" title="2023-03-04 00:01">2023-03-04 00:01</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I recently discovered this new feature in Chrome:</p>
<p><img alt="reload options" src="images/nWcug.png"></p>
<p>I can figure out the difference between option 1 and option 3, and that option
2 is probably something in between, but I can't find any more precise
information anywhere.</p>
<p>Anybody know the precise behavior of each of the 3 options?</p>
<p><br><br></p>
<h2>Answer</h2>
<h4>Normal reload</h4>
<p>The same thing as pressing <code>F5</code>. This will use the cache but revalidate
everything during page load, looking for "304 Not Modified" responses. If the
browser can avoid re-downloading cached JavaScript files, images, text files,
etc. then it will.</p>
<hr>
<h4>Hard reload</h4>
<p>Don't use anything in the cache when making the request. (which is equal to
<code>SHIFT</code>+<code>F5</code> No need to open Developer console) Force the browser do re-
download every JavaScript file, image, text file, etc.</p>
<hr>
<h4>Empty Cache and Hard Reload</h4>
<p>Obviously, if the cache is empty then it will have to do a hard reload. This
will again force the browser to re-download everything. However, if the page
makes any after-the-fact downloads via JavaScript that weren't part of page
load, then these might still use the cache, which is where emptying the cache
helps because it makes sure that even these won't use cached files.</p>
<hr>
<p><strong>Note</strong> : This feature is only available when the developer tools are open.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This also works in Mac OS X. Open developer tools, and then, on the reload
button, either 1. secondary click (right click for right-handed mouse), or
2. long click, aka long press to see the menu.</p>
<p>In addition to this answer, hard reload often causes proxies, content delivery
networks and other remote caches to be refreshed.</p>
<p><img alt="enter image description here" src="images/5DM8B.png"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-are-inline-namespaces-for/" class="u-url">What are inline namespaces for?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-are-inline-namespaces-for/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T00:00:27+08:00" itemprop="datePublished" title="2023-03-04 00:00">2023-03-04 00:00</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>C++11 allows <code>inline namespace</code>s, all members of which are also automatically
in the enclosing <code>namespace</code>. I cannot think of any useful application of this
-- can somebody please give a brief, succinct example of a situation where an
<code>inline namespace</code> is needed and where it is the most idiomatic solution?</p>
<p>(Also, it is not clear to me what happens when a <code>namespace</code> is declared
<code>inline</code> in one but not all declarations, which may live in different files.
Isn't this begging for trouble?)</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Inline namespaces are a library versioning feature akin to symbol versioning,
but implemented purely at the C++11 level (ie. cross-platform) instead of
being a feature of a specific binary executable format (ie. platform-
specific).</p>
<p>It is a mechanism by which a library author can make a nested namespace look
and act as if all its declarations were in the surrounding namespace (inline
namespaces can be nested, so "more-nested" names percolate up all the way to
the first non-inline namespace and look and act as if their declarations were
in any of the namespaces in between, too).</p>
<p>As an example, consider the STL implementation of <code>vector</code>. If we had inline
namespaces from the beginning of C++, then in C++98 the header <code>&lt;vector&gt;</code>
might have looked like this:</p>
<div class="code"><pre class="code literal-block"><span class="nt">namespace</span><span class="w"> </span><span class="nt">std</span><span class="w"> </span><span class="p">{</span>

<span class="err">#if</span><span class="w"> </span><span class="err">__cplusplus</span><span class="w"> </span><span class="err">&lt;</span><span class="w"> </span><span class="err">1997L</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">pre-standard</span><span class="w"> </span><span class="err">C++</span>
<span class="w">    </span><span class="err">inline</span>
<span class="err">#endif</span>

<span class="w">    </span><span class="err">namespace</span><span class="w"> </span><span class="err">pre_cxx_1997</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="err">template</span><span class="w"> </span><span class="err">&lt;class</span><span class="w"> </span><span class="err">T&gt;</span><span class="w"> </span><span class="err">__vector_impl</span><span class="p">;</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">implementation</span><span class="w"> </span><span class="err">class</span>
<span class="w">        </span><span class="err">template</span><span class="w"> </span><span class="err">&lt;class</span><span class="w"> </span><span class="err">T&gt;</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">e.g.</span><span class="w"> </span><span class="err">w/o</span><span class="w"> </span><span class="err">allocator</span><span class="w"> </span><span class="err">argument</span>
<span class="w">        </span><span class="err">class</span><span class="w"> </span><span class="n">vector</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">__vector_impl</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">private</span><span class="w"> </span><span class="n">inheritance</span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="o">...</span>
<span class="w">        </span><span class="p">}</span><span class="o">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="p">#</span><span class="nn">if</span><span class="w"> </span><span class="nt">__cplusplus</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nt">1997L</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nt">C</span><span class="o">++</span><span class="nt">98</span><span class="o">/</span><span class="nt">03</span><span class="w"> </span><span class="nt">or</span><span class="w"> </span><span class="nt">later</span>
<span class="w">                         </span><span class="o">//</span><span class="w"> </span><span class="o">(</span><span class="nt">ifdef</span><span class="err">'</span><span class="nt">ed</span><span class="w"> </span><span class="nt">out</span><span class="w"> </span><span class="nt">b</span><span class="o">/</span><span class="nt">c</span><span class="w"> </span><span class="nt">it</span><span class="w"> </span><span class="nt">probably</span><span class="w"> </span><span class="nt">uses</span><span class="w"> </span><span class="nt">new</span><span class="w"> </span><span class="nt">language</span>
<span class="w">                         </span><span class="o">//</span><span class="w"> </span><span class="nt">features</span><span class="w"> </span><span class="nt">that</span><span class="w"> </span><span class="nt">a</span><span class="w"> </span><span class="nt">pre-C</span><span class="o">++</span><span class="nt">98</span><span class="w"> </span><span class="nt">compiler</span><span class="w"> </span><span class="nt">would</span><span class="w"> </span><span class="nt">choke</span><span class="w"> </span><span class="nt">on</span><span class="o">)</span>
<span class="err">#</span><span class="w">  </span><span class="nt">if</span><span class="w"> </span><span class="nt">__cplusplus</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nt">1997L</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nt">C</span><span class="o">++</span><span class="nt">98</span><span class="o">/</span><span class="nt">03</span>
<span class="w">    </span><span class="nt">inline</span>
<span class="err">#</span><span class="w">  </span><span class="nt">endif</span>

<span class="w">    </span><span class="nt">namespace</span><span class="w"> </span><span class="nt">cxx_1997</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="n">std</span><span class="p">:</span><span class="o">:</span><span class="n">vector</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">allocator</span><span class="w"> </span><span class="n">argument</span>
<span class="w">        </span><span class="n">template</span><span class="w"> </span><span class="o">&lt;</span><span class="n">class</span><span class="w"> </span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="n">Alloc</span><span class="o">=</span><span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">        </span><span class="n">class</span><span class="w"> </span><span class="n">vector</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">pre_cxx_1997</span><span class="o">::</span><span class="n">__vector_impl</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="n">impl</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">good</span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="o">...</span>
<span class="w">        </span><span class="p">}</span><span class="o">;</span>

<span class="w">        </span><span class="o">//</span><span class="w"> </span><span class="nt">and</span><span class="w"> </span><span class="nt">vector</span><span class="o">&lt;</span><span class="nt">bool</span><span class="o">&gt;</span><span class="w"> </span><span class="nt">is</span><span class="w"> </span><span class="nt">special</span><span class="o">:</span>
<span class="w">        </span><span class="nt">template</span><span class="w"> </span><span class="o">&lt;</span><span class="nt">class</span><span class="w"> </span><span class="nt">Alloc</span><span class="o">=</span><span class="nt">std</span><span class="p">::</span><span class="nd">allocator</span><span class="o">&lt;</span><span class="nt">bool</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">        </span><span class="nt">class</span><span class="w"> </span><span class="nt">vector</span><span class="o">&lt;</span><span class="nt">bool</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="err">//</span><span class="w"> </span><span class="err">...</span>
<span class="w">        </span><span class="p">}</span><span class="o">;</span>

<span class="w">    </span><span class="err">}</span><span class="o">;</span>

<span class="p">#</span><span class="nn">endif</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nt">C</span><span class="o">++</span><span class="nt">98</span><span class="o">/</span><span class="nt">03</span><span class="w"> </span><span class="nt">or</span><span class="w"> </span><span class="nt">later</span>

<span class="err">}</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nt">namespace</span><span class="w"> </span><span class="nt">std</span>
</pre></div>

<p>Depending on the value of <code>__cplusplus</code>, either one or the other <code>vector</code>
implementation is chosen. If your codebase was written in pre-C++98 times, and
you find that the C++98 version of <code>vector</code> is causing trouble for you when
you upgrade your compiler, "all" you have to do is to find the references to
<code>std::vector</code> in your codebase and replace them by
<code>std::pre_cxx_1997::vector</code>.</p>
<p>Come the next standard, and the STL vendor just repeats the procedure again,
introducing a new namespace for <code>std::vector</code> with <code>emplace_back</code> support
(which requires C++11) and inlining that one iff <code>__cplusplus == 201103L</code>.</p>
<p>OK, so why do I need a new language feature for this? I can already do the
following to have the same effect, no?</p>
<div class="code"><pre class="code literal-block"><span class="n">namespace</span><span class="w"> </span><span class="nn">std</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">namespace</span><span class="w"> </span><span class="nn">pre_cxx_1997</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="cp">#if __cplusplus &lt; 1997L </span><span class="c1">// pre-standard C++</span>
<span class="w">    </span><span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="nn">pre_cxx_1997</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#if __cplusplus &gt;= 1997L </span><span class="c1">// C++98/03 or later</span>
<span class="w">                         </span><span class="c1">// (ifdef'ed out b/c it probably uses new language</span>
<span class="w">                         </span><span class="c1">// features that a pre-C++98 compiler would choke on)</span>

<span class="w">    </span><span class="n">namespace</span><span class="w"> </span><span class="nn">cxx_1997</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">};</span>
<span class="cp">#  if __cplusplus == 1997L </span><span class="c1">// C++98/03</span>
<span class="w">    </span><span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="nn">cxx_1997</span><span class="p">;</span>
<span class="cp">#  endif</span>

<span class="cp">#endif </span><span class="c1">// C++98/03 or later</span>

<span class="p">}</span><span class="w"> </span><span class="c1">// namespace std</span>
</pre></div>

<p>Depending on the value of <code>__cplusplus</code>, I get either one or the other of the
implementations.</p>
<p>And you'd be almost correct.</p>
<p>Consider the following valid C++98 user code (it was permitted to fully
specialize templates that live in namespace <code>std</code> in C++98 already):</p>
<div class="code"><pre class="code literal-block"><span class="c1">// I don't trust my STL vendor to do this optimisation, so force these </span>
<span class="c1">// specializations myself:</span>
<span class="n">namespace</span><span class="w"> </span><span class="n">std</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">template</span><span class="w"> </span><span class="o">&lt;&gt;</span>
<span class="w">    </span><span class="n">class</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">MyType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">my_special_vector</span><span class="o">&lt;</span><span class="n">MyType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="n">template</span><span class="w"> </span><span class="o">&lt;&gt;</span>
<span class="w">    </span><span class="n">class</span><span class="w"> </span><span class="n">vector</span><span class="o">&lt;</span><span class="n">MyOtherType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">my_special_vector</span><span class="o">&lt;</span><span class="n">MyOtherType</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="c1">// ...etc...</span>
<span class="p">}</span><span class="w"> </span><span class="c1">// namespace std</span>
</pre></div>

<p>This is perfectly valid code where the user supplies its own implementation of
a vector for a set of type where she apparently knows a more efficient
implementation than the one found in (her copy of) the STL.</p>
<p><em>But</em> : When specializing a template, you need to do so in the namespace it
was declared in. The Standard says that <code>vector</code> is declared in namespace
<code>std</code>, so that's where the user rightfully expects to specialize the type.</p>
<p>This code works with a non-versioned namespace <code>std</code>, or with the C++11 inline
namespace feature, but not with the versioning trick that used <code>using
namespace &lt;nested&gt;</code>, because that exposes the implementation detail that the
true namespace in which <code>vector</code> was defined was not <code>std</code> directly.</p>
<p>There are other holes by which you could detect the nested namespace (see
comments below), but inline namespaces plug them all. And that's all there is
to it. Immensely useful for the future, but AFAIK the Standard doesn't
prescribe inline namespace names for its own standard library (I'd love to be
proven wrong on this, though), so it can only be used for third-party
libraries, not the standard itself (unless the compiler vendors agree on a
naming scheme).</p>
<p><br></p>
<h3>Suggest</h3>
<p>http://www.stroustrup.com/C++11FAQ.html#inline-namespace (a document written
by and maintained by Bjarne Stroustrup, who you'd think should be aware of
most motivations for most C++11 features.)</p>
<p>According to that, it is to allow versioning for backward-compatibility. You
define multiple inner namespaces, and make the most recent one <code>inline</code>. Or
anyway, the default one for people who don't care about versioning. I suppose
the most recent one could be a future or cutting-edge version which is not yet
default.</p>
<p>The example given is:</p>
<div class="code"><pre class="code literal-block"><span class="c1">// file V99.h:</span>
<span class="kr">inline</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="nn">V99</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kr">int</span><span class="p">);</span><span class="w">    </span><span class="c1">// does something better than the V98 version</span>
<span class="w">    </span><span class="kr">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kr">double</span><span class="p">);</span><span class="w"> </span><span class="c1">// new feature</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// file V98.h:</span>
<span class="n">namespace</span><span class="w"> </span><span class="nn">V98</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="kr">int</span><span class="p">);</span><span class="w">    </span><span class="c1">// does something</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// file Mine.h:</span>
<span class="n">namespace</span><span class="w"> </span><span class="nn">Mine</span><span class="w"> </span><span class="p">{</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">"V99.h"</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">"V98.h"</span>
<span class="p">}</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">"Mine.h"</span>
<span class="n">using</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="nn">Mine</span><span class="p">;</span>
<span class="c1">// ...</span>
<span class="n">V98</span><span class="o">::</span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// old version</span>
<span class="n">V99</span><span class="o">::</span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// new version</span>
<span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w">       </span><span class="c1">// default version</span>
</pre></div>

<p>I don't immediately see why you don't put <code>using namespace V99;</code> inside
namespace <code>Mine</code>, but I don't have to entirely understand the use-case in
order to take Bjarne's word for it on the committee's motivation.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2224.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2222.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
