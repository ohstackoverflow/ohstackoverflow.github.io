<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2256) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2256.html">
<link rel="prev" href="index-2257.html" type="text/html">
<link rel="next" href="index-2255.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-generate-a-list-of-files-with-their-absolute-path-in-linux/" class="u-url">How can I generate a list of files with their absolute path in Linux?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-generate-a-list-of-files-with-their-absolute-path-in-linux/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T02:40:22+08:00" itemprop="datePublished" title="2023-03-04 02:40">2023-03-04 02:40</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am writing a shell script that takes file paths as input.</p>
<p>For this reason, I need to generate recursive file listings with full paths.
For example, the file <code>bar</code> has the path:</p>
<div class="code"><pre class="code literal-block">/home/ken/foo/bar
</pre></div>

<p>but, as far as I can see, both <code>ls</code> and <code>find</code> only give relative path
listings:</p>
<div class="code"><pre class="code literal-block">./foo/bar   (from the folder ken)
</pre></div>

<p>It seems like an obvious requirement, but I can't see anything in the <code>find</code>
or <code>ls</code> man pages.</p>
<p>How can I generate a list of files in the shell including their absolute
paths?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>If you give <code>find</code> an absolute path to start with, it will print absolute
paths. For instance, to find all .htaccess files in the current directory:</p>
<div class="code"><pre class="code literal-block">find "$(pwd)" -name .htaccess
</pre></div>

<p>or if your shell expands <code>$PWD</code> to the current directory:</p>
<div class="code"><pre class="code literal-block">find "$PWD" -name .htaccess
</pre></div>

<p><code>find</code> simply prepends the path it was given to a relative path to the file
from that path.</p>
<p>Greg Hewgill also suggested using <code>pwd -P</code> if you want to resolve symlinks in
your current directory.</p>
<p><br></p>
<h3>Suggest</h3>
<div class="code"><pre class="code literal-block">readlink -f filename
</pre></div>

<p>gives the full absolute path. but if the file is a symlink, u'll get the final
resolved name.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/convert-a-python-dict-to-a-string-and-back/" class="u-url">Convert a python dict to a string and back</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/convert-a-python-dict-to-a-string-and-back/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T02:38:58+08:00" itemprop="datePublished" title="2023-03-04 02:38">2023-03-04 02:38</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am writing a program that stores data in a dictionary object, but this data
needs to be saved at some point during the program execution and loaded back
into the dictionary object when the program is run again. How would I convert
a dictionary object into a string that can be written to a file and loaded
back into a dictionary object? This will hopefully support dictionaries
containing dictionaries.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The json module is a good solution here. It has the advantages over pickle
that it only produces plain text output, and is cross-platform and cross-
version.</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="nn">json</span>
<span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>If your dictionary isn't too big maybe str + eval can do the work:</p>
<div class="code"><pre class="code literal-block">dict1 = {'one':1, 'two':2, 'three': {'three.1': 3.1, 'three.2': 3.2 }}
str1 = str(dict1)

dict2 = eval(str1)

print(dict1 == dict2)
</pre></div>

<p>You can use ast.literal_eval instead of eval for additional security if the
source is untrusted.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/no-route-matches-users-sign-out-devise-rails-3/" class="u-url">No route matches "/users/sign_out" devise rails 3</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/no-route-matches-users-sign-out-devise-rails-3/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-04T02:37:28+08:00" itemprop="datePublished" title="2023-03-04 02:37">2023-03-04 02:37</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I've installed devise on my app and applied the following in my
<code>application.html.erb</code> file:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;div</span><span class="w"> </span><span class="na">id=</span><span class="s">"user_nav"</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="cp">&lt;%</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">user_signed_in?</span><span class="w"> </span><span class="cp">%&gt;</span>
<span class="w">        </span>Signed<span class="w"> </span>in<span class="w"> </span>as<span class="w"> </span><span class="cp">&lt;%=</span><span class="w"> </span><span class="n">current_user</span><span class="o">.</span><span class="n">email</span><span class="w"> </span><span class="cp">%&gt;</span>.<span class="w"> </span>This<span class="w"> </span>cannot<span class="w"> </span>be<span class="w"> </span>cheese?
<span class="w">        </span><span class="cp">&lt;%=</span><span class="w"> </span><span class="n">link_to</span><span class="w"> </span><span class="s1">'Sign out'</span><span class="p">,</span><span class="w"> </span><span class="n">destroy_user_session_path</span><span class="w"> </span><span class="cp">%&gt;</span>
<span class="w">    </span><span class="cp">&lt;%</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="cp">%&gt;</span>
<span class="w">        </span><span class="cp">&lt;%=</span><span class="w"> </span><span class="n">link_to</span><span class="w"> </span><span class="s1">'Register'</span><span class="p">,</span><span class="w"> </span><span class="n">new_user_registration_path</span><span class="w"> </span><span class="cp">%&gt;</span><span class="w"> </span>or<span class="w"> </span><span class="cp">&lt;%=</span><span class="w"> </span><span class="n">link_to</span><span class="w"> </span><span class="s1">'Sign in'</span><span class="p">,</span><span class="w"> </span><span class="n">new_user_session_path</span><span class="w"> </span><span class="cp">%&gt;</span>
<span class="w">    </span><span class="cp">&lt;%</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="cp">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>I ran <code>rake routes</code> and confirmed that all the routes are valid.</p>
<p>Also, in my <code>routes.rb</code> file I have <code>devise_for :users</code> and <code>root :to =&gt;
"home#index"</code>.</p>
<p>I get the following routing error when clicking the "Sign out" link:</p>
<div class="code"><pre class="code literal-block">No route matches "/users/sign_out"
</pre></div>

<p>Any ideas what's causing the error?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>I think the route for signing out is a <code>DELETE</code> method. This means that your
sign out link needs to look like this:</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;%=</span><span class="w"> </span><span class="n">link_to</span><span class="w"> </span><span class="s2">"Sign out"</span><span class="p">,</span><span class="w"> </span><span class="n">destroy_user_session_path</span><span class="p">,</span><span class="w"> </span><span class="ss">:method</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="ss">:delete</span><span class="w"> </span><span class="cp">%&gt;</span>
</pre></div>

<p>Yours doesn't include the <code>:method =&gt; :delete</code> part. Also, please note that
for this to work you must also include <code>&lt;%= javascript_include_tag :defaults
%&gt;</code> in your layout file (<code>application.html.erb</code>).</p>
<p><br></p>
<h3>Suggest</h3>
<p>I changed this line in devise.rb:</p>
<div class="code"><pre class="code literal-block">config.sign_out_via = :delete
</pre></div>

<p>to</p>
<div class="code"><pre class="code literal-block">config.sign_out_via = :get
</pre></div>

<p>and it started working for me.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2257.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2255.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
