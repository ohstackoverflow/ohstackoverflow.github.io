<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 284) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-284.html">
<link rel="prev" href="index-285.html" type="text/html">
<link rel="next" href="index-283.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-disable-arc-for-a-single-file-in-a-project/" class="u-url">How can I disable ARC for a single file in a project?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-disable-arc-for-a-single-file-in-a-project/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:59:03+08:00" itemprop="datePublished" title="2023-02-17 02:59">2023-02-17 02:59</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I am using ARC successfully in my project. However, I have encountered a few
files (e.g., in unit tests and mock objects) where the rules of ARC are a
little more fragile right now. I recall hearing that there was a way to
disable ARC on a per-file basis, though I have been unable to find this
option.</p>
<p>Is this possible? How do I disable ARC on a per-file basis?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>It is possible to disable ARC for individual files by adding the <code>-fno-objc-
arc</code> compiler flag for those files.</p>
<p>You add compiler flags in Targets -&gt; Build Phases -&gt; Compile Sources. You have
to double click on the right column of the row under <em>Compiler Flags</em>. You can
also add it to multiple files by holding the cmd button to select the files
and then pressing enter to bring up the flag edit box. (Note that editing
multiple files will overwrite any flags that it may already have.)</p>
<p>I created a sample project that has an example:
https://github.com/jaminguy/NoArc</p>
<p><img alt="xcode" src="https://i.imgur.com/BgteG.png"></p>
<p>See this answer for more info: Disable Automatic Reference Counting for Some
Files</p>
<p><br></p>
<h3>Suggest</h3>
<p><strong>Disable ARC</strong> on <strong>MULTIPLE files:</strong></p>
<ol>
<li>Select desired files at Target/Build Phases/Compile Sources in Xcode</li>
<li><strong>PRESS ENTER</strong></li>
<li>Type <strong>-fno-objc-arc</strong>
</li>
<li>Press <strong>Enter</strong> or <strong>Done</strong>
</li>
</ol>
<p>;)</p>
<p><img alt="enter image description here" src="images/JVrWg.png"></p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/gitignore-exclude-folder-but-include-specific-subfolder/" class="u-url">.gitignore exclude folder but include specific subfolder</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/gitignore-exclude-folder-but-include-specific-subfolder/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:58:28+08:00" itemprop="datePublished" title="2023-02-17 02:58">2023-02-17 02:58</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have the folder <code>application/</code> which I add to the <code>.gitignore</code>. Inside the
<code>application/</code> folder is the folder <code>application/language/gr</code>. How can I
include this folder?</p>
<p>I've tried this</p>
<div class="code"><pre class="code literal-block"><span class="n">application</span><span class="o">/</span>
<span class="sx">!application/language/gr/</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p>If you exclude <code>application/</code>, then everything under it will always be
excluded (even if some later negative exclusion pattern (“unignore”) might
match something under <code>application/</code>).</p>
<p>To do what you want, you have to “unignore” every parent directory of anything
that you want to “unignore”. Usually you end up writing rules for this
situation in pairs: ignore everything in a directory, but not some certain
subdirectory.</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">skip</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">excluded</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">prior</span><span class="w"> </span><span class="n">patterns</span>
<span class="sx">!application/</span>

<span class="n">application</span><span class="o">/*</span>
<span class="sx">!application/language/</span>

<span class="n">application</span><span class="o">/</span><span class="n">language</span><span class="o">/*</span>
<span class="sx">!application/language/gr/</span>
</pre></div>

<p><strong>Note</strong><br>
The trailing <code>/*</code> is significant:</p>
<ul>
<li>
<p>The pattern <code>dir/</code> excludes a directory named <code>dir</code> and (implicitly) everything under it.<br>
With <code>dir/</code>, Git will never look at anything under <code>dir</code>, and thus will never
apply any of the “un-exclude” patterns to anything under <code>dir</code>.</p>
</li>
<li>
<p>The pattern <code>dir/*</code> says nothing about <code>dir</code> itself; it just excludes everything under <code>dir</code>. With <code>dir/*</code>, Git will process the direct contents of <code>dir</code>, giving other patterns a chance to “un-exclude” some bit of the content (<code>!dir/sub/</code>). </p>
</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>Commit 59856de from Karsten Blees (kblees) for Git 1.9/2.0 (Q1 2014) clarifies
that case:</p>
<h3>
<code>gitignore.txt</code>: clarify recursive nature of excluded directories</h3>
<blockquote>
<p>An optional prefix "<code>!</code>" which negates the pattern; any matching file
excluded by a previous pattern will become included again.</p>
<p><strong>It is not possible to re-include a file if a parent directory of that file
is excluded. (<code>*</code>)<br>
 (<code>*</code>: unless certain conditions are met in git 2.8+, see below)<br>
 Git doesn't list excluded directories for performance reasons, so any
patterns on contained files have no effect, no matter where they are
defined.</strong></p>
<p>Put a backslash ("<code>\</code>") in front of the first "<code>!</code>" for patterns that begin
with a literal "<code>!</code>", for example, "<code>\!important!.txt</code>".</p>
<p>Example to exclude everything except a specific directory <code>foo/bar</code> (note
the <code>/*</code> - without the slash, the wildcard would also exclude everything
within <code>foo/bar</code>):</p>
</blockquote>
<div class="code"><pre class="code literal-block"><span class="c"> </span><span class="nb">--------------------------------------------------------------</span>
<span class="c">     $ cat </span><span class="nt">.</span><span class="c">gitignore</span>
<span class="c">     # exclude everything except directory foo/bar</span>
<span class="c">     /*</span>
<span class="c">     !/foo</span>
<span class="c">     /foo/*</span>
<span class="c">     !/foo/bar</span>
<span class="c"> </span><span class="nb">--------------------------------------------------------------</span>
</pre></div>

<p>In your case:</p>
<div class="code"><pre class="code literal-block"><span class="n">application</span><span class="o">/*</span>
<span class="sx">!application/**/</span>
<span class="n">application</span><span class="o">/</span><span class="n">language</span><span class="o">/*</span>
<span class="sx">!application/language/**/</span>
<span class="sx">!application/language/gr/**</span>
</pre></div>

<p>You must white-list <em>folders</em> first, before being able to white-list files
within a given folder.</p>
<hr>
<p>Update Feb/March 2016:</p>
<p>Note that with git 2.9.x/2.10 (mid 2016?), it might be possible to re-include
a file if a parent directory of that file is excluded if there is no wildcard
in the path re-included.</p>
<p>Nguyễn Thái Ngọc Duy (<code>pclouds</code>) is trying to add this feature:</p>
<ul>
<li>commit 506d8f1 for git v2.7.0, reverted in commit 76b620d git v2.8.0-rc0</li>
<li>commit 5e57f9c git v2.8.0-rc0,... reverted(!) in commit 5cee3493 git 2.8.0.</li>
</ul>
<p>So with git 2.9+, this could have actually worked, but was ultimately
reverted:</p>
<div class="code"><pre class="code literal-block"><span class="n">application</span><span class="o">/</span>
<span class="sx">!application/language/gr/</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-can-i-remove-duplicate-rows/" class="u-url">How can I remove duplicate rows?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-can-i-remove-duplicate-rows/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:57:58+08:00" itemprop="datePublished" title="2023-02-17 02:57">2023-02-17 02:57</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I need to remove duplicate rows from a fairly large SQL Server table (i.e.
300,000+ rows).</p>
<p>The rows, of course, will not be perfect duplicates because of the existence
of the <code>RowID</code> identity field.</p>
<p><strong>MyTable</strong></p>
<div class="code"><pre class="code literal-block"><span class="n">RowID</span><span class="w"> </span><span class="nb nb-Type">int</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="n">identity</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">primary</span><span class="w"> </span><span class="n">key</span><span class="p">,</span>
<span class="n">Col1</span><span class="w"> </span><span class="n">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="n">Col2</span><span class="w"> </span><span class="n">varchar</span><span class="p">(</span><span class="mi">2048</span><span class="p">)</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">,</span>
<span class="n">Col3</span><span class="w"> </span><span class="n">tinyint</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nb nb-Type">null</span>
</pre></div>

<p>How can I do this?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Assuming no nulls, you <code>GROUP BY</code> the unique columns, and <code>SELECT</code> the <code>MIN
(or MAX)</code> RowId as the row to keep. Then, just delete everything that didn't
have a row id:</p>
<div class="code"><pre class="code literal-block">DELETE FROM MyTable
LEFT OUTER JOIN (
   SELECT MIN(RowId) as RowId, Col1, Col2, Col3 
   FROM MyTable 
   GROUP BY Col1, Col2, Col3
) as KeepRows ON
   MyTable.RowId = KeepRows.RowId
WHERE
   KeepRows.RowId IS NULL
</pre></div>

<p>In case you have a GUID instead of an integer, you can replace</p>
<div class="code"><pre class="code literal-block">MIN(RowId)
</pre></div>

<p>with</p>
<div class="code"><pre class="code literal-block">CONVERT(uniqueidentifier, MIN(CONVERT(char(36), MyGuidColumn)))
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>Another possible way of doing this is</p>
<div class="code"><pre class="code literal-block">;

--Ensure that any immediately preceding statement is terminated with a semicolon above
WITH cte
     AS (SELECT ROW_NUMBER() OVER (PARTITION BY Col1, Col2, Col3 
                                       ORDER BY ( SELECT 0)) RN
         FROM   #MyTable)
DELETE FROM cte
WHERE  RN &gt; 1;
</pre></div>

<p>I am using <code>ORDER BY (SELECT 0)</code> above as it is arbitrary which row to
preserve in the event of a tie.</p>
<p>To preserve the latest one in <code>RowID</code> order for example you could use <code>ORDER
BY RowID DESC</code></p>
<p><strong>Execution Plans</strong></p>
<p>The execution plan for this is often simpler and more efficient than that in
the accepted answer as it does not require the self join.</p>
<p><img alt="Execution Plans" src="images/ZJiWF.jpg"></p>
<p>This is not always the case however. One place where the <code>GROUP BY</code> solution
might be preferred is situations where a hash aggregate would be chosen in
preference to a stream aggregate.</p>
<p>The <code>ROW_NUMBER</code> solution will always give pretty much the same plan whereas
the <code>GROUP BY</code> strategy is more flexible.</p>
<p><img alt="Execution Plans" src="images/iUlWm.jpg"></p>
<p>Factors which might favour the hash aggregate approach would be</p>
<ul>
<li>No useful index on the partitioning columns</li>
<li>relatively fewer groups with relatively more duplicates in each group </li>
</ul>
<p>In extreme versions of this second case (if there are very few groups with
many duplicates in each) one could also consider simply inserting the rows to
keep into a new table then <code>TRUNCATE</code>-ing the original and copying them back
to minimise logging compared to deleting a very high proportion of the rows.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-285.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-283.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
