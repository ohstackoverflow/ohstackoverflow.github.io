<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 745) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-745.html">
<link rel="prev" href="index-746.html" type="text/html">
<link rel="next" href="index-744.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-decompile-dex-into-java-source-code/" class="u-url">How to decompile DEX into Java source code?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-decompile-dex-into-java-source-code/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:51:56+08:00" itemprop="datePublished" title="2023-02-17 14:51">2023-02-17 14:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can one decompile Android DEX (VM bytecode) files into corresponding Java
source code?</p>
<p><br><br></p>
<h2>Answer</h2>
<h2>It's easy</h2>
<p>Get these tools:</p>
<ol>
<li>
<p>dex2jar to translate dex files to jar files</p>
</li>
<li>
<p>jd-gui to view the java files in the jar</p>
</li>
</ol>
<p>The source code is quite readable as dex2jar makes some optimizations.</p>
<h3>Procedure:</h3>
<p>And here's the procedure on how to decompile:</p>
<h4>Step 1:</h4>
<p>Convert classes.dex in test_apk-debug.apk to test_apk-debug_dex2jar.jar</p>
<div class="code"><pre class="code literal-block">d2j-dex2jar.sh -f -o output_jar.jar apk_to_decompile.apk
d2j-dex2jar.sh -f -o output_jar.jar dex_to_decompile.dex
</pre></div>

<blockquote>
<p><strong>Note 1:</strong> In the Windows machines all the <code>.sh</code> scripts are replaced by
<code>.bat</code> scripts</p>
<p><strong>Note 2:</strong> On linux/mac don't forget about <code>sh</code> or <code>bash</code>. The full command
should be:</p>
</blockquote>
<div class="code"><pre class="code literal-block">sh d2j-dex2jar.sh -f -o output_jar.jar apk_to_decompile.apk
</pre></div>

<blockquote>
<p><strong>Note 3:</strong> Also, remember to add execute permission to <code>dex2jar-X.X</code>
directory e.g. <code>sudo chmod -R +x dex2jar-2.0</code></p>
</blockquote>
<p>dex2jar documentation</p>
<h4>Step 2:</h4>
<p>Open the jar in JD-GUI</p>
<p><img alt="The decompiled source" src="images/PWJIX.png"></p>
<p><br></p>
<h3>Suggest</h3>
<p>To clarify somewhat, there are two major paths you might take here depending
on what you want to accomplish:</p>
<p>Decompile the Dalvik bytecode (dex) into readable Java source. You can do this
easily with dex2jar and jd-gui, as fred mentions. The resulting source is
useful to read and understand the functionality of an app, but will likely not
produce 100% usable code. In other words, you can read the source, but you
can't really modify and repackage it. Note that if the source has been
obfuscated with proguard, the resulting source code will be substantially more
difficult to untangle.</p>
<p>The other major alternative is to disassemble the bytecode to smali, an
assembly language designed for precisely this purpose. I've found that the
easiest way to do this is with apktool. Once you've got apktool installed, you
can just point it at an apk file, and you'll get back a smali file for each
class contained in the application. You can read and modify the smali or even
replace classes entirely by generating smali from new Java source (to do this,
you could compile your .java source to .class files with javac, then convert
your .class files to .dex files with Android's dx compiler, and then use
baksmali (smali disassembler) to convert the .dex to .smali files, as
described in this question. There might be a shortcut here). Once you're done,
you can easily package the apk back up with apktool again. Note that apktool
does not sign the resulting apk, so you'll need to take care of that just like
any other Android application.</p>
<p>If you go the smali route, you might want to try APK Studio, an IDE that
automates some of the above steps to assist you with decompiling and
recompiling an apk and installing it on a device.</p>
<p>In short, your choices are pretty much either to decompile into Java, which is
more readable but likely irreversible, or to disassemble to smali, which is
harder to read but much more flexible to make changes and repackage a modified
app. Which approach you choose would depend on what you're looking to achieve.</p>
<p>Lastly, the suggestion of dare is also of note. It's a retargeting tool to
convert .dex and .apk files to java .class files, so that they can be analyzed
using typical java static analysis tools.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-read-process-command-line-arguments/" class="u-url">How to read/process command line arguments?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-read-process-command-line-arguments/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:51:08+08:00" itemprop="datePublished" title="2023-02-17 14:51">2023-02-17 14:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In Python, how can we find out the command line arguments that were provided
for a script, and process them?</p>
<hr>
<p>For some more specific examples, see Implementing a "[command] [action]
[parameter]" style command-line interfaces? and How do I format positional
argument help using Python's optparse?.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The canonical solution in the standard library is <code>argparse</code> (docs):</p>
<p>Here is an example:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">ArgumentParser</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">"-f"</span><span class="p">,</span> <span class="s2">"--file"</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">"filename"</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">"write report to FILE"</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">"FILE"</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">"-q"</span><span class="p">,</span> <span class="s2">"--quiet"</span><span class="p">,</span>
                    <span class="n">action</span><span class="o">=</span><span class="s2">"store_false"</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">"verbose"</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">"don't print status messages to stdout"</span><span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</pre></div>

<p><code>argparse</code> supports (among other things):</p>
<ul>
<li>Multiple options in any order.</li>
<li>Short and long options.</li>
<li>Default values.</li>
<li>Generation of a usage help message.</li>
</ul>
<p><br></p>
<h3>Suggest</h3>
<p>The canonical solution in the standard library is <code>argparse</code> (docs):</p>
<p>Here is an example:</p>
<div class="code"><pre class="code literal-block"><span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">ArgumentParser</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">"-f"</span><span class="p">,</span> <span class="s2">"--file"</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">"filename"</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">"write report to FILE"</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s2">"FILE"</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">"-q"</span><span class="p">,</span> <span class="s2">"--quiet"</span><span class="p">,</span>
                    <span class="n">action</span><span class="o">=</span><span class="s2">"store_false"</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">"verbose"</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s2">"don't print status messages to stdout"</span><span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</pre></div>

<p><code>argparse</code> supports (among other things):</p>
<ul>
<li>Multiple options in any order.</li>
<li>Short and long options.</li>
<li>Default values.</li>
<li>Generation of a usage help message.</li>
</ul>
</div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/script-tag-async-defer/" class="u-url">Script Tag - async &amp; defer</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/script-tag-async-defer/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:50:41+08:00" itemprop="datePublished" title="2023-02-17 14:50">2023-02-17 14:50</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I have a couple of questions about the attributes <code>async</code> &amp; <code>defer</code> for the
<code>&lt;script&gt;</code> tag which to my understanding only work in HTML5 browsers.</p>
<p>One of my sites has two external JavaScript files that currently sit just
above the <code>&lt;/body&gt;</code> tag; the first is jquery sourced from google and the
second is a local external script.</p>
<h3>With respects to site load speed</h3>
<ol>
<li>
<p>Is there any advantage in adding <code>async</code> to the two scripts I have at the bottom of the page?</p>
</li>
<li>
<p>Would there be any advantage in adding the <code>async</code> option to the two scripts and putting them at the top of the page in the <code>&lt;head&gt;</code>?</p>
</li>
<li>
<p>Would this mean they download as the page loads?</p>
</li>
<li>
<p>I assume this would cause delays for HTML4 browsers, but would it speed up page load for HTML5 browsers?</p>
</li>
</ol>
<h3>Using <code>&lt;script defer src=...</code>
</h3>
<ol>
<li>Would loading the two scripts inside <code>&lt;head&gt;</code> with the attribute <code>defer</code> the same affect as having the scripts before <code>&lt;/body&gt;</code>?</li>
<li>Once again I assume this would slow up HTML4 browsers.</li>
</ol>
<h3>Using <code>&lt;script async src=...</code>
</h3>
<p>If I have two scripts with <code>async</code> enabled</p>
<ol>
<li>Would they download at the same time?</li>
<li>Or one at a time with the rest of the page?</li>
<li>Does the order of scripts then become a problem? For example one script depends on the other so if one downloads faster, the second one might not execute correctly etc.</li>
</ol>
<p>Finally am I best to leave things as they are until HTML5 is more commonly
used?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Keep your scripts right before <code>&lt;/body&gt;</code>. Async can be used with scripts
located there in a few circumstances (see discussion below). Defer won't make
much of a difference for scripts located there because the DOM parsing work
has pretty much already been done anyway.</p>
<p>Here's an article that explains the difference between async and defer:
http://peter.sh/experiments/asynchronous-and-deferred-javascript-execution-
explained/.</p>
<p>Your HTML will display quicker in older browsers if you keep the scripts at
the end of the body right before <code>&lt;/body&gt;</code>. So, to preserve the load speed in
older browsers, you don't want to put them anywhere else.</p>
<p>If your second script depends upon the first script (e.g. your second script
uses the jQuery loaded in the first script), then you can't make them async
without additional code to control execution order, but you can make them
defer because defer scripts will still be executed in order, just not until
after the document has been parsed. If you have that code and you don't need
the scripts to run right away, you can make them async or defer.</p>
<p>You could put the scripts in the <code>&lt;head&gt;</code> tag and set them to <code>defer</code> and the
loading of the scripts will be deferred until the DOM has been parsed and that
will get fast page display in new browsers that support defer, but it won't
help you at all in older browsers and it isn't really any faster than just
putting the scripts right before <code>&lt;/body&gt;</code> which works in all browsers. So,
you can see why it's just best to put them right before <code>&lt;/body&gt;</code>.</p>
<p>Async is more useful when you really don't care when the script loads and
nothing else that is user dependent depends upon that script loading. The most
often cited example for using async is an analytics script like Google
Analytics that you don't want anything to wait for and it's not urgent to run
soon and it stands alone so nothing else depends upon it.</p>
<p>Usually the jQuery library is not a good candidate for async because other
scripts depend upon it and you want to install event handlers so your page can
start responding to user events and you may need to run some jQuery-based
initialization code to establish the initial state of the page. It can be used
async, but other scripts will have to be coded to not execute until jQuery is
loaded.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Keep your scripts right before <code>&lt;/body&gt;</code>. Async can be used with scripts
located there in a few circumstances (see discussion below). Defer won't make
much of a difference for scripts located there because the DOM parsing work
has pretty much already been done anyway.</p>
<p>Here's an article that explains the difference between async and defer:
http://peter.sh/experiments/asynchronous-and-deferred-javascript-execution-
explained/.</p>
<p>Your HTML will display quicker in older browsers if you keep the scripts at
the end of the body right before <code>&lt;/body&gt;</code>. So, to preserve the load speed in
older browsers, you don't want to put them anywhere else.</p>
<p>If your second script depends upon the first script (e.g. your second script
uses the jQuery loaded in the first script), then you can't make them async
without additional code to control execution order, but you can make them
defer because defer scripts will still be executed in order, just not until
after the document has been parsed. If you have that code and you don't need
the scripts to run right away, you can make them async or defer.</p>
<p>You could put the scripts in the <code>&lt;head&gt;</code> tag and set them to <code>defer</code> and the
loading of the scripts will be deferred until the DOM has been parsed and that
will get fast page display in new browsers that support defer, but it won't
help you at all in older browsers and it isn't really any faster than just
putting the scripts right before <code>&lt;/body&gt;</code> which works in all browsers. So,
you can see why it's just best to put them right before <code>&lt;/body&gt;</code>.</p>
<p>Async is more useful when you really don't care when the script loads and
nothing else that is user dependent depends upon that script loading. The most
often cited example for using async is an analytics script like Google
Analytics that you don't want anything to wait for and it's not urgent to run
soon and it stands alone so nothing else depends upon it.</p>
<p>Usually the jQuery library is not a good candidate for async because other
scripts depend upon it and you want to install event handlers so your page can
start responding to user events and you may need to run some jQuery-based
initialization code to establish the initial state of the page. It can be used
async, but other scripts will have to be coded to not execute until jQuery is
loaded.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-746.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-744.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
