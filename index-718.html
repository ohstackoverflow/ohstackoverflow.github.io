<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 718) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-718.html">
<link rel="prev" href="index-719.html" type="text/html">
<link rel="next" href="index-717.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-explanation-for-these-bizarre-javascript-behaviours-mentioned-in-the-wat-talk-for-codemash-2012/" class="u-url">What is the explanation for these bizarre JavaScript behaviours mentioned in the 'Wat' talk for CodeMash 2012?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-explanation-for-these-bizarre-javascript-behaviours-mentioned-in-the-wat-talk-for-codemash-2012/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:09:27+08:00" itemprop="datePublished" title="2023-02-17 14:09">2023-02-17 14:09</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>The <em>'Wat' talk for CodeMash 2012</em> basically points out a few bizarre quirks
with Ruby and JavaScript.</p>
<p>I have made a JSFiddle of the results at http://jsfiddle.net/fe479/9/.</p>
<p>The behaviours specific to JavaScript (as I don't know Ruby) are listed below.</p>
<p>I found in the JSFiddle that some of my results didn't correspond with those
in the video, and I am not sure why. I am, however, curious to know how
JavaScript is handling working behind the scenes in each case.</p>
<div class="code"><pre class="code literal-block">Empty Array + Empty Array
[] + []
result:
&lt;Empty String&gt;
</pre></div>

<p>I am quite curious about the <code>+</code> operator when used with arrays in JavaScript.
This matches the video's result.</p>
<div class="code"><pre class="code literal-block"><span class="n">Empty</span><span class="w"> </span><span class="k">Array</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">Object</span>
<span class="err">[]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">{}</span>
<span class="k">result</span><span class="err">:</span>
<span class="o">[</span><span class="n">Object</span><span class="o">]</span>
</pre></div>

<p>This matches the video's result. What's going on here? Why is this an object.
What does the <code>+</code> operator do?</p>
<div class="code"><pre class="code literal-block"><span class="k">Object</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Empty</span><span class="w"> </span><span class="k">Array</span>
<span class="err">{}</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">[]</span>
<span class="k">result</span><span class="err">:</span>
<span class="o">[</span><span class="n">Object</span><span class="o">]</span>
</pre></div>

<p>This doesn't match the video. The video suggests that the result is 0, whereas
I get [Object].</p>
<div class="code"><pre class="code literal-block"><span class="k">Object</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">Object</span>
<span class="err">{}</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="err">{}</span>
<span class="k">result</span><span class="err">:</span>
<span class="o">[</span><span class="n">Object</span><span class="o">][</span><span class="n">Object</span><span class="o">]</span>
</pre></div>

<p>This doesn't match the video either, and how does outputting a variable result
in two objects? Maybe my JSFiddle is wrong.</p>
<div class="code"><pre class="code literal-block">Array(16).join("wat" - 1)
result:
NaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaNNaN
</pre></div>

<p>Doing wat + 1 results in <code>wat1wat1wat1wat1</code>...</p>
<p>I suspect this is just straightforward behaviour that trying to subtract a
number from a string results in NaN.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here's a list of explanations for the results you're seeing (and supposed to
be seeing). The references I'm using are from the ECMA-262 standard.</p>
<ol>
<li>
<h4><code>[] + []</code></h4>
</li>
</ol>
<p>When using the addition operator, both the left and right operands are
converted to primitives first (§11.6.1). As per §9.1, converting an object (in
this case an array) to a primitive returns its default value, which for
objects with a valid <code>toString()</code> method is the result of calling
<code>object.toString()</code> (§8.12.8). For arrays this is the same as calling
<code>array.join()</code> (§15.4.4.2). Joining an empty array results in an empty string,
so step #7 of the addition operator returns the concatenation of two empty
strings, which is the empty string.</p>
<ol>
<li>
<h4><code>[] + {}</code></h4>
</li>
</ol>
<p>Similar to <code>[] + []</code>, both operands are converted to primitives first. For
"Object objects" (§15.2), this is again the result of calling
<code>object.toString()</code>, which for non-null, non-undefined objects is <code>"[object
Object]"</code> (§15.2.4.2).</p>
<ol>
<li>
<h4><code>{} + []</code></h4>
</li>
</ol>
<p>The <code>{}</code> here is not parsed as an object, but instead as an empty block
(§12.1, at least as long as you're not forcing that statement to be an
expression, but more about that later). The return value of empty blocks is
empty, so the result of that statement is the same as <code>+[]</code>. The unary <code>+</code>
operator (§11.4.6) returns <code>ToNumber(ToPrimitive(operand))</code>. As we already
know, <code>ToPrimitive([])</code> is the empty string, and according to §9.3.1,
<code>ToNumber("")</code> is 0.</p>
<ol>
<li>
<h4><code>{} + {}</code></h4>
</li>
</ol>
<p>Similar to the previous case, the first <code>{}</code> is parsed as a block with empty
return value. Again, <code>+{}</code> is the same as <code>ToNumber(ToPrimitive({}))</code>, and
<code>ToPrimitive({})</code> is <code>"[object Object]"</code> (see <code>[] + {}</code>). So to get the result
of <code>+{}</code>, we have to apply <code>ToNumber</code> on the string <code>"[object Object]"</code>. When
following the steps from §9.3.1, we get <code>NaN</code> as a result:</p>
<blockquote>
<p>If the grammar cannot interpret the String as an expansion of
<em>StringNumericLiteral</em> , then the result of ToNumber is <strong>NaN</strong>.</p>
</blockquote>
<ol>
<li>
<h4><code>Array(16).join("wat" - 1)</code></h4>
</li>
</ol>
<p>As per §15.4.1.1 and §15.4.2.2, <code>Array(16)</code> creates a new array with length
16. To get the value of the argument to join, §11.6.2 steps #5 and #6 show
that we have to convert both operands to a number using <code>ToNumber</code>.
<code>ToNumber(1)</code> is simply 1 (§9.3), whereas <code>ToNumber("wat")</code> again is <code>NaN</code> as
per §9.3.1. Following step 7 of §11.6.2, §11.6.3 dictates that</p>
<blockquote>
<p>If either operand is <strong>NaN</strong> , the result is <strong>NaN</strong>.</p>
</blockquote>
<p>So the argument to <code>Array(16).join</code> is <code>NaN</code>. Following §15.4.4.5
(<code>Array.prototype.join</code>), we have to call <code>ToString</code> on the argument, which is
<code>"NaN"</code> (§9.8.1):</p>
<blockquote>
<p>If <em>m</em> is <strong>NaN</strong> , return the String <strong><code>"NaN"</code></strong>.</p>
</blockquote>
<p>Following step 10 of §15.4.4.5, we get 15 repetitions of the concatenation of
<code>"NaN"</code> and the empty string, which equals the result you're seeing. When
using <code>"wat" + 1</code> instead of <code>"wat" - 1</code> as argument, the addition operator
converts <code>1</code> to a string instead of converting <code>"wat"</code> to a number, so it
effectively calls <code>Array(16).join("wat1")</code>.</p>
<p>As to why you're seeing different results for the <code>{} + []</code> case: When using
it as a function argument, you're forcing the statement to be an
<em>ExpressionStatement</em> , which makes it impossible to parse <code>{}</code> as empty
block, so it's instead parsed as an empty object literal.</p>
<p><br></p>
<h3>Suggest</h3>
<p>This is more of a comment than an answer, but for some reason I can't comment
on your question. I wanted to correct your JSFiddle code. However, I posted
this on Hacker News and someone suggested that I repost it here.</p>
<p>The problem in the JSFiddle code is that <code>({})</code> (opening braces inside of
parentheses) is not the same as <code>{}</code> (opening braces as the start of a line of
code). So when you type <code>out({} + [])</code> you are forcing the <code>{}</code> to be
something which it is not when you type <code>{} + []</code>. This is part of the overall
'wat'-ness of Javascript.</p>
<p>The basic idea was simple JavaScript wanted to allow both of these forms:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">u</span><span class="ss">)</span>
<span class="w">    </span><span class="nv">v</span><span class="c1">;</span>

<span class="k">if</span><span class="w"> </span><span class="ss">(</span><span class="nv">x</span><span class="ss">)</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">y</span><span class="c1">;</span>
<span class="w">    </span><span class="nv">z</span><span class="c1">;</span>
}
</pre></div>

<p>To do so, two interpretations were made of the opening brace: 1. it is <em>not
required</em> and 2. it can appear <em>anywhere</em>.</p>
<p>This was a wrong move. Real code doesn't have an opening brace appearing in
the middle of nowhere, and real code also tends to be more fragile when it
uses the first form rather than the second. (About once every other month at
my last job, I'd get called to a coworker's desk when their modifications to
my code weren't working, and the problem was that they'd added a line to the
"if" without adding curly braces. I eventually just adopted the habit that the
curly braces are always required, even when you're only writing one line.)</p>
<p>Fortunately in many cases eval() will replicate the full wat-ness of
JavaScript. The JSFiddle code should read:</p>
<div class="code"><pre class="code literal-block">function<span class="w"> </span>out(code)<span class="w"> </span>{
<span class="w">    </span>function<span class="w"> </span>format(x)<span class="w"> </span>{
<span class="w">        </span>return<span class="w"> </span>typeof<span class="w"> </span>x<span class="w"> </span>===<span class="w"> </span>"string"<span class="w"> </span>?
<span class="w">            </span>JSON.stringify(x)<span class="w"> </span>:<span class="w"> </span>x;
<span class="w">    </span>}<span class="w">   </span>
<span class="w">    </span>document.writeln('<span class="ni">&amp;gt;&amp;gt;&amp;gt;</span><span class="w"> </span>'<span class="w"> </span>+<span class="w"> </span>code);
<span class="w">    </span>document.writeln(format(eval(code)));
}
document.writeln("<span class="nt">&lt;pre&gt;</span>");
out('[]<span class="w"> </span>+<span class="w"> </span>[]');
out('[]<span class="w"> </span>+<span class="w"> </span>{}');
out('{}<span class="w"> </span>+<span class="w"> </span>[]');
out('{}<span class="w"> </span>+<span class="w"> </span>{}');
out('Array(16).join("wat"<span class="w"> </span>+<span class="w"> </span>1)');
out('Array(16).join("wat<span class="w"> </span>-<span class="w"> </span>1")');
out('Array(16).join("wat"<span class="w"> </span>-<span class="w"> </span>1)<span class="w"> </span>+<span class="w"> </span>"<span class="w"> </span>Batman!"');
document.writeln("<span class="nt">&lt;/pre&gt;</span>");
</pre></div>

<p>[Also that is the first time I have written document.writeln in many many many
years, and I feel a little dirty writing anything involving both
document.writeln() and eval().]</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-do-you-handle-multiple-submit-buttons-in-asp-net-mvc-framework/" class="u-url">How do you handle multiple submit buttons in ASP.NET MVC Framework?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-do-you-handle-multiple-submit-buttons-in-asp-net-mvc-framework/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:08:39+08:00" itemprop="datePublished" title="2023-02-17 14:08">2023-02-17 14:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>Is there some easy way to handle multiple submit buttons from the same form?
For example:</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;%</span><span class="w"> </span><span class="no">Html</span><span class="o">.</span><span class="n">BeginForm</span><span class="p">(</span><span class="s2">"MyAction"</span><span class="p">,</span><span class="w"> </span><span class="s2">"MyController"</span><span class="p">,</span><span class="w"> </span><span class="no">FormMethod</span><span class="o">.</span><span class="n">Post</span><span class="p">);</span><span class="w"> </span><span class="cp">%&gt;</span>
<span class="x">&lt;input type="submit" value="Send" /&gt;</span>
<span class="x">&lt;input type="submit" value="Cancel" /&gt;</span>
<span class="cp">&lt;%</span><span class="w"> </span><span class="no">Html</span><span class="o">.</span><span class="n">EndForm</span><span class="p">();</span><span class="w"> </span><span class="cp">%&gt;</span>
</pre></div>

<p>Any idea how to do this in ASP.NET Framework Beta? All examples I've googled
for have single buttons in them.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Here is a mostly clean attribute-based solution to the multiple submit button
issue based heavily on the post and comments from Maarten Balliauw.</p>
<div class="code"><pre class="code literal-block"><span class="k">[AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = true)]</span>
<span class="na">public class MultipleButtonAttribute</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">ActionNameSelectorAttribute</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">public string Name { get; set; }</span>
<span class="w">    </span><span class="na">public string Argument { get; set; }</span>

<span class="w">    </span><span class="na">public override bool IsValidName(ControllerContext controllerContext, string actionName, MethodInfo methodInfo)</span>
<span class="w">    </span><span class="na">{</span>
<span class="w">        </span><span class="na">var isValidName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">false</span><span class="c1">;</span>
<span class="w">        </span><span class="na">var keyValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">string.Format("{0}:{1}", Name, Argument)</span><span class="c1">;</span>
<span class="w">        </span><span class="na">var value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">controllerContext.Controller.ValueProvider.GetValue(keyValue)</span><span class="c1">;</span>

<span class="w">        </span><span class="na">if (value !</span><span class="o">=</span><span class="w"> </span><span class="s">null)</span>
<span class="w">        </span><span class="na">{</span>
<span class="w">            </span><span class="na">controllerContext.Controller.ControllerContext.RouteData.Values[Name]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">Argument</span><span class="c1">;</span>
<span class="w">            </span><span class="na">isValidName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span><span class="c1">;</span>
<span class="w">        </span><span class="na">}</span>

<span class="w">        </span><span class="na">return isValidName;</span>
<span class="w">    </span><span class="na">}</span>
<span class="na">}</span>
</pre></div>

<p>razor:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;form</span><span class="w"> </span><span class="na">action=</span><span class="s">""</span><span class="w"> </span><span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
<span class="w"> </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"submit"</span><span class="w"> </span><span class="na">value=</span><span class="s">"Save"</span><span class="w"> </span><span class="na">name=</span><span class="s">"action:Save"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w"> </span><span class="nt">&lt;input</span><span class="w"> </span><span class="na">type=</span><span class="s">"submit"</span><span class="w"> </span><span class="na">value=</span><span class="s">"Cancel"</span><span class="w"> </span><span class="na">name=</span><span class="s">"action:Cancel"</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>

<p>and controller:</p>
<div class="code"><pre class="code literal-block"><span class="k">[HttpPost]</span>
<span class="k">[MultipleButton(Name = "action", Argument = "Save")]</span>
<span class="na">public ActionResult Save(MessageModel mm) { ... }</span>

<span class="k">[HttpPost]</span>
<span class="k">[MultipleButton(Name = "action", Argument = "Cancel")]</span>
<span class="na">public ActionResult Cancel(MessageModel mm) { ... }</span>
</pre></div>

<p><em>Update:</em> Razor pages looks to provide the same functionality out of the box.
For new development, it may be preferable.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Give your submit buttons a name, and then inspect the submitted value in your
controller method:</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;%</span><span class="w"> </span><span class="no">Html</span><span class="o">.</span><span class="n">BeginForm</span><span class="p">(</span><span class="s2">"MyAction"</span><span class="p">,</span><span class="w"> </span><span class="s2">"MyController"</span><span class="p">,</span><span class="w"> </span><span class="no">FormMethod</span><span class="o">.</span><span class="n">Post</span><span class="p">);</span><span class="w"> </span><span class="cp">%&gt;</span>
<span class="x">&lt;input type="submit" name="submitButton" value="Send" /&gt;</span>
<span class="x">&lt;input type="submit" name="submitButton" value="Cancel" /&gt;</span>
<span class="cp">&lt;%</span><span class="w"> </span><span class="no">Html</span><span class="o">.</span><span class="n">EndForm</span><span class="p">();</span><span class="w"> </span><span class="cp">%&gt;</span>
</pre></div>

<p>posting to</p>
<div class="code"><pre class="code literal-block"><span class="nt">public</span><span class="w"> </span><span class="nt">class</span><span class="w"> </span><span class="nt">MyController</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nt">Controller</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">public</span><span class="w"> </span><span class="err">ActionResult</span><span class="w"> </span><span class="err">MyAction(string</span><span class="w"> </span><span class="err">submitButton)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="err">switch(submitButton)</span><span class="w"> </span><span class="err">{</span>
<span class="w">            </span><span class="err">case</span><span class="w"> </span><span class="err">"Send":</span>
<span class="w">                </span><span class="err">//</span><span class="w"> </span><span class="err">delegate</span><span class="w"> </span><span class="err">sending</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">another</span><span class="w"> </span><span class="err">controller</span><span class="w"> </span><span class="err">action</span>
<span class="w">                </span><span class="err">return(Send())</span><span class="p">;</span>
<span class="w">            </span><span class="err">case</span><span class="w"> </span><span class="err">"Cancel":</span>
<span class="w">                </span><span class="err">//</span><span class="w"> </span><span class="err">call</span><span class="w"> </span><span class="err">another</span><span class="w"> </span><span class="err">action</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">perform</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">cancellation</span>
<span class="w">                </span><span class="err">return(Cancel())</span><span class="p">;</span>
<span class="w">            </span><span class="n">default</span><span class="p">:</span>
<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">they</span><span class="err">'</span><span class="n">ve</span><span class="w"> </span><span class="n">submitted</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">form</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">submitButton</span><span class="p">,</span><span class="w"> </span>
<span class="w">                </span><span class="o">//</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">return</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">view</span><span class="w"> </span><span class="n">again</span><span class="o">.</span>
<span class="w">                </span><span class="nf">return</span><span class="p">(</span><span class="nf">View</span><span class="p">());</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="err">}</span>

<span class="w">    </span><span class="nt">private</span><span class="w"> </span><span class="nt">ActionResult</span><span class="w"> </span><span class="nt">Cancel</span><span class="o">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="err">process</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">cancellation</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="err">here.</span>
<span class="w">        </span><span class="err">return(View("Cancelled"))</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nt">private</span><span class="w"> </span><span class="nt">ActionResult</span><span class="w"> </span><span class="nt">Send</span><span class="o">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="err">//</span><span class="w"> </span><span class="err">perform</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">actual</span><span class="w"> </span><span class="err">send</span><span class="w"> </span><span class="err">operation</span><span class="w"> </span><span class="err">here.</span>
<span class="w">        </span><span class="err">return(View("SendConfirmed"))</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="err">}</span>
</pre></div>

<p>EDIT:</p>
<p>To extend this approach to work with localized sites, isolate your messages
somewhere else (e.g. compiling a resource file to a strongly-typed resource
class)</p>
<p>Then modify the code so it works like:</p>
<div class="code"><pre class="code literal-block"><span class="cp">&lt;%</span><span class="w"> </span><span class="no">Html</span><span class="o">.</span><span class="n">BeginForm</span><span class="p">(</span><span class="s2">"MyAction"</span><span class="p">,</span><span class="w"> </span><span class="s2">"MyController"</span><span class="p">,</span><span class="w"> </span><span class="no">FormMethod</span><span class="o">.</span><span class="n">Post</span><span class="p">);</span><span class="w"> </span><span class="cp">%&gt;</span>
<span class="x">&lt;input type="submit" name="submitButton" value="</span><span class="cp">&lt;%=</span><span class="w"> </span><span class="no">Html</span><span class="o">.</span><span class="n">Encode</span><span class="p">(</span><span class="no">Resources</span><span class="o">.</span><span class="n">Messages</span><span class="o">.</span><span class="n">Send</span><span class="p">)</span><span class="cp">%&gt;</span><span class="x">" /&gt;</span>
<span class="x">&lt;input type="submit" name="submitButton" value="</span><span class="cp">&lt;%=</span><span class="no">Html</span><span class="o">.</span><span class="n">Encode</span><span class="p">(</span><span class="no">Resources</span><span class="o">.</span><span class="n">Messages</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span><span class="cp">%&gt;</span><span class="x">" /&gt;</span>
<span class="cp">&lt;%</span><span class="w"> </span><span class="no">Html</span><span class="o">.</span><span class="n">EndForm</span><span class="p">();</span><span class="w"> </span><span class="cp">%&gt;</span>
</pre></div>

<p>and your controller should look like this:</p>
<div class="code"><pre class="code literal-block"><span class="o">//</span><span class="w"> </span><span class="n">Note</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">localized</span><span class="w"> </span><span class="n">resources</span><span class="w"> </span><span class="n">aren</span><span class="s1">'t constants, so </span>
<span class="o">//</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="s1">'t use a switch statement.</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">submitButton</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Resources</span><span class="o">.</span><span class="n">Messages</span><span class="o">.</span><span class="n">Send</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="n">delegate</span><span class="w"> </span><span class="n">sending</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">controller</span><span class="w"> </span><span class="n">action</span>
<span class="w">    </span><span class="k">return</span><span class="p">(</span><span class="n">Send</span><span class="p">());</span>

<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">submitButton</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Resources</span><span class="o">.</span><span class="n">Messages</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="o">//</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="n">another</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">perform</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cancellation</span>
<span class="w">     </span><span class="k">return</span><span class="p">(</span><span class="n">Cancel</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-to-get-parameter-value-from-query-string/" class="u-url">How to get parameter value from query string?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/how-to-get-parameter-value-from-query-string/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T14:08:08+08:00" itemprop="datePublished" title="2023-02-17 14:08">2023-02-17 14:08</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>How can I define a route in my routes.jsx file to capture the
<code>__firebase_request_key</code> parameter value from a URL generated by Twitter's
single sign on process after the redirect from their servers?</p>
<div class="code"><pre class="code literal-block">http://localhost:8000/#/signin?_k=v9ifuf&amp;__firebase_request_key=blablabla
</pre></div>

<p>I tried with the following routes configuration, but the <code>:redirectParam</code> is
not catching the mentioned param:</p>
<div class="code"><pre class="code literal-block"><span class="nt">&lt;Router&gt;</span>
<span class="w">  </span><span class="nt">&lt;Route</span><span class="w"> </span><span class="na">path=</span><span class="s">"/"</span><span class="w"> </span><span class="na">component=</span><span class="s">{Main}</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;Route</span><span class="w"> </span><span class="na">path=</span><span class="s">"signin"</span><span class="w"> </span><span class="na">component=</span><span class="s">{SignIn}</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;Route</span><span class="w"> </span><span class="na">path=</span><span class="s">":redirectParam"</span><span class="w"> </span><span class="na">component=</span><span class="s">{TwitterSsoButton}</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/Route&gt;</span>
<span class="w">  </span><span class="nt">&lt;/Route&gt;</span>
<span class="nt">&lt;/Router&gt;</span>
</pre></div>

<p><br><br></p>
<h2>Answer</h2>
<p><strong>React Router v6, using hooks</strong></p>
<p>In react-router-dom v6 there's a new hook named useSearchParams. So with</p>
<div class="code"><pre class="code literal-block"><span class="k">const</span><span class="w"> </span><span class="p">[</span><span class="n">searchParams</span><span class="p">,</span><span class="w"> </span><span class="n">setSearchParams</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">useSearchParams</span><span class="p">();</span>
<span class="n">searchParams</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"__firebase_request_key"</span><span class="p">)</span>
</pre></div>

<p>you will get <code>"blablabla"</code>. Note, that searchParams is an instance of
URLSearchParams, which also implements an iterator, e.g. for using
Object.fromEntries etc.</p>
<p><strong>React Router v4/v5, without hooks, generic</strong></p>
<p>React Router v4 does not parse the query for you any more, but you can only
access it via <code>this.props.location.search</code> (or useLocation, see below). For
reasons see nbeuchat's answer.</p>
<p>E.g. with qs library imported as <code>qs</code> you could do</p>
<div class="code"><pre class="code literal-block">qs.parse(this.props.location.search, { ignoreQueryPrefix: true }).__firebase_request_key
</pre></div>

<p>Another library would be query-string. See this answer for some more ideas on
parsing the search string. If you do not need IE-compatibility you can also
use</p>
<div class="code"><pre class="code literal-block">new URLSearchParams(this.props.location.search).get("__firebase_request_key")
</pre></div>

<p>For functional components you would replace <code>this.props.location</code> with the
hook useLocation. Note, you could use <code>window.location.search</code>, but this won't
allow to trigger React rendering on changes. If your (non-functional)
component is not a direct child of a <code>Switch</code> you need to use withRouter to
access any of the router provided props.</p>
<p><strong>React Router v3</strong></p>
<p>React Router already parses the location for you and passes it to your
RouteComponent as props. You can access the query (after ? in the url) part
via</p>
<div class="code"><pre class="code literal-block">this.props.location.query.__firebase_request_key
</pre></div>

<p>If you are looking for the path parameter values, separated with a colon (:)
inside the router, these are accessible via</p>
<div class="code"><pre class="code literal-block">this.props.match.params.redirectParam
</pre></div>

<p>This applies to late React Router v3 versions (not sure which). Older router
versions were reported to use <code>this.props.params.redirectParam</code>.</p>
<p><strong>General</strong></p>
<p>nizam.sp's suggestion to do</p>
<div class="code"><pre class="code literal-block">console.log(this.props)
</pre></div>

<p>will be helpful in any case.</p>
<p><br></p>
<h3>Suggest</h3>
<h3>React Router v4</h3>
<p><strong>Using<code>component</code></strong></p>
<div class="code"><pre class="code literal-block">&lt;Route path="/users/:id" component={UserPage}/&gt;



this.props.match.params.id
</pre></div>

<p>The component is automatically rendered with the route props.</p>
<p><strong>Using<code>render</code></strong></p>
<div class="code"><pre class="code literal-block">&lt;Route path="/users/:id" render={(props) =&gt; &lt;UserPage {...props} /&gt;}/&gt;



this.props.match.params.id
</pre></div>

<p>Route props are passed to the render function.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-719.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-717.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
