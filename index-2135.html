<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 2135) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-2135.html">
<link rel="prev" href="index-2136.html" type="text/html">
<link rel="next" href="index-2134.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/handling-warning-for-possible-multiple-enumeration-of-ienumerable/" class="u-url">Handling warning for possible multiple enumeration of IEnumerable</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/handling-warning-for-possible-multiple-enumeration-of-ienumerable/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:45:51+08:00" itemprop="datePublished" title="2023-03-03 17:45">2023-03-03 17:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>In my code I need to use an <code>IEnumerable&lt;&gt;</code> several times, resulting in the
ReSharper error of "Possible multiple enumeration of <code>IEnumerable</code>".</p>
<p>Sample code:</p>
<div class="code"><pre class="code literal-block"><span class="n">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Foo</span><span class="p">(</span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">objects</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">objects</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">objects</span><span class="o">.</span><span class="n">Any</span><span class="p">())</span>
<span class="w">        </span><span class="n">throw</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ArgumentException</span><span class="p">();</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">firstObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">objects</span><span class="o">.</span><span class="n">First</span><span class="p">();</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DoSomeThing</span><span class="p">(</span><span class="n">firstObject</span><span class="p">);</span><span class="w">        </span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">secondList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DoSomeThingElse</span><span class="p">(</span><span class="n">objects</span><span class="p">);</span>
<span class="w">    </span><span class="n">list</span><span class="o">.</span><span class="n">AddRange</span><span class="p">(</span><span class="n">secondList</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">list</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<ul>
<li>I can change the <code>objects</code> parameter to be <code>List</code> and then avoid the possible multiple enumeration but then I don't get the highest object that I can handle.</li>
<li>Another thing that I can do is to convert the <code>IEnumerable</code> to <code>List</code> at the beginning of the method:</li>
</ul>
<hr>
<div class="code"><pre class="code literal-block"><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Foo</span><span class="p">(</span><span class="n">IEnumerable</span><span class="o">&lt;</span><span class="n">object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">objects</span><span class="p">)</span>
<span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">objectList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">objects</span><span class="o">.</span><span class="n">ToList</span><span class="p">();</span>
<span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="o">...</span>
<span class="w"> </span><span class="p">}</span>
</pre></div>

<p>But this is just <strong>awkward</strong>.</p>
<p>What would you do in this scenario?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The problem with taking <code>IEnumerable</code> as a parameter is that it tells callers
"I wish to enumerate this". It doesn't tell them how many times you wish to
enumerate.</p>
<blockquote>
<p>I can change the objects parameter to be List and then avoid the possible
multiple enumeration but then I don't get <em>the highest object that I can
handle</em>.</p>
</blockquote>
<p>The goal of taking the highest object is noble, but it leaves room for too
many assumptions. Do you really want someone to pass a LINQ to SQL query to
this method, only for you to enumerate it twice (getting potentially different
results each time?)</p>
<p>The semantic missing here is that a caller, who perhaps doesn't take time to
read the details of the method, may assume you only iterate once - so they
pass you an expensive object. Your method signature doesn't indicate either
way.</p>
<p>By changing the method signature to <code>IList</code>/<code>ICollection</code>, you will at least
make it clearer to the caller what your expectations are, and they can avoid
costly mistakes.</p>
<p>Otherwise, most developers looking at the method might assume you only iterate
once. If taking an <code>IEnumerable</code> is so important, you should consider doing
the <code>.ToList()</code> at the start of the method.</p>
<p>It's a shame .NET doesn't have an interface that is IEnumerable + Count +
Indexer, without Add/Remove etc. methods, which is what I suspect would solve
this problem.</p>
<p><br></p>
<h3>Suggest</h3>
<p>If your data is always going to be repeatable, perhaps don't worry about it.
However, you can unroll it too - this is especially useful if the incoming
data could be large (for example, reading from disk/network):</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="p">(</span><span class="n">objects</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb nb-Type">null</span><span class="p">)</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ArgumentException</span><span class="p">();</span>
<span class="n">using</span><span class="p">(</span><span class="k">var</span><span class="w"> </span><span class="n">iter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">objects</span><span class="o">.</span><span class="n">GetEnumerator</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">iter</span><span class="o">.</span><span class="n">MoveNext</span><span class="p">())</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">ArgumentException</span><span class="p">();</span>

<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">firstObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iter</span><span class="o">.</span><span class="n">Current</span><span class="p">;</span>
<span class="w">    </span><span class="k">var</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DoSomeThing</span><span class="p">(</span><span class="n">firstObject</span><span class="p">);</span>

<span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">iter</span><span class="o">.</span><span class="n">MoveNext</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">list</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">DoSomeThingElse</span><span class="p">(</span><span class="n">iter</span><span class="o">.</span><span class="n">Current</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">list</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Note I changed the semantic of DoSomethingElse a bit, but this is mainly to
show unrolled usage. You could re-wrap the iterator, for example. You could
make it an iterator block too, which could be nice; then there is no <code>list</code> -
and you would <code>yield return</code> the items as you get them, rather than add to a
list to be returned.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-difference-between-tinyint-smallint-mediumint-bigint-and-int-in-mysql/" class="u-url">What is the difference between tinyint, smallint, mediumint, bigint and int in MySQL?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-difference-between-tinyint-smallint-mediumint-bigint-and-int-in-mysql/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:45:30+08:00" itemprop="datePublished" title="2023-03-03 17:45">2023-03-03 17:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What is the difference between tinyint, smallint, mediumint, bigint and int in
MySQL?</p>
<p>In what cases should these be used?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>They take up different amounts of space and they have different ranges of
acceptable values.</p>
<p>Here are the sizes and ranges of values for SQL Server, other RDBMSes have
similar documentation:</p>
<ul>
<li>MySQL</li>
<li>Postgres</li>
<li>Oracle (they just have a <code>NUMBER</code> datatype really)</li>
<li>DB2</li>
</ul>
<p>Turns out they all use the same specification (with a few minor exceptions
noted below) but support various combinations of those types (Oracle not
included because it has just a <code>NUMBER</code> datatype, see the above link):</p>
<div class="code"><pre class="code literal-block">             | SQL Server    MySQL   Postgres    DB2
---------------------------------------------------
tinyint      |     X           X                
smallint     |     X           X         X        X
mediumint    |                 X
int/integer  |     X           X         X        X 
bigint       |     X           X         X        X
</pre></div>

<p>And they support the same value ranges (with one exception below) and all have
the same storage requirements:</p>
<div class="code"><pre class="code literal-block">            | Bytes    Range (signed)                               Range (unsigned)
--------------------------------------------------------------------------------------------
tinyint     | 1 byte   -128 to 127                                  0 to 255
smallint    | 2 bytes  -32768 to 32767                              0 to 65535
mediumint   | 3 bytes  -8388608 to 8388607                          0 to 16777215
int/integer | 4 bytes  -2147483648 to 2147483647                    0 to 4294967295
bigint      | 8 bytes  -9223372036854775808 to 9223372036854775807  0 to 18446744073709551615
</pre></div>

<p>The "unsigned" types are only available in MySQL, and the rest just use the
signed ranges, with one notable exception: <strong><code>tinyint</code> in SQL Server is
unsigned</strong> and has a value range of 0 to 255</p>
<p><br></p>
<h3>Suggest</h3>
<p>The <strong>size of storage</strong> required and <strong>how big</strong> the numbers can be.</p>
<p>On SQL Server:</p>
<ul>
<li>
<code>tinyint</code> 1 byte, 0 to 255</li>
<li>
<code>smallint</code> 2 bytes, -215 (-32,768) to 215-1 (32,767)</li>
<li>
<code>int</code> 4 bytes, -231 (-2,147,483,648) to 231-1 (2,147,483,647)</li>
<li>
<code>bigint</code> 8 bytes, -263 (-9,223,372,036,854,775,808) to 263-1 (9,223,372,036,854,775,807)</li>
</ul>
<p>You can store the number 1 in all 4, but a <code>bigint</code> will use 8 bytes, while a
<code>tinyint</code> will use 1 byte.</p>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-a-python-list-guaranteed-to-have-its-elements-stay-in-the-order-they-are-inserted-in/" class="u-url">Is a Python list guaranteed to have its elements stay in the order they are inserted in?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-a-python-list-guaranteed-to-have-its-elements-stay-in-the-order-they-are-inserted-in/" rel="bookmark">
            <time class="published dt-published" datetime="2023-03-03T17:45:07+08:00" itemprop="datePublished" title="2023-03-03 17:45">2023-03-03 17:45</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>If I have the following Python code</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; x = []
&gt;&gt;&gt; x = x + [1]
&gt;&gt;&gt; x = x + [2]
&gt;&gt;&gt; x = x + [3]
&gt;&gt;&gt; x
[1, 2, 3]
</pre></div>

<p>Will <code>x</code> be guaranteed to always be <code>[1,2,3]</code>, or are other orderings of the
interim elements possible?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>Yes, the order of elements in a python list is persistent.</p>
<p><br></p>
<h3>Suggest</h3>
<p>In short, yes, the order is preserved. In long:</p>
<p>In general the following definitions will always apply to objects like lists:</p>
<p>A <strong>list</strong> is a collection of elements that can contain duplicate elements and
has a defined order that generally does not change unless explicitly made to
do so. <strong>stacks</strong> and <strong>queues</strong> are both types of lists that provide specific
(often limited) behavior for adding and removing elements (stacks being LIFO,
queues being FIFO). Lists are practical representations of, well, lists of
things. A string can be thought of as a list of characters, as the order is
important (<code>"abc" != "bca"</code>) and duplicates in the content of the string are
certainly permitted (<code>"aaa"</code> can exist and <code>!= "a"</code>).</p>
<p>A <strong>set</strong> is a collection of elements that cannot contain duplicates and has a
non-definite order that may or may not change over time. Sets do not represent
lists of things so much as they describe the <em>extent</em> of a certain selection
of things. The internal structure of set, how its elements are stored relative
to each other, is usually not meant to convey useful information. In some
implementations, sets are always internally sorted; in others the ordering is
simply undefined (usually depending on a hash function).</p>
<p><strong>Collection</strong> is a generic term referring to any object used to store a
(usually variable) number of other objects. Both lists and sets are a type of
collection. Tuples and Arrays are normally not considered to be collections.
Some languages consider <strong>maps</strong> (containers that describe associations
between different objects) to be a type of collection as well.</p>
<p>This naming scheme holds true for all programming languages that I know of,
including Python, C++, Java, C#, and Lisp (in which lists not keeping their
order would be particularly catastrophic). If anyone knows of any where this
is not the case, please just say so and I'll edit my answer. Note that
specific implementations may use other names for these objects, such as
<strong>vector</strong> in C++ and <strong>flex</strong> in ALGOL 68 (both lists; flex is technically
just a re-sizable array).</p>
<p>If there is any confusion left in your case due to the specifics of how the
<code>+</code> sign works here, just know that order is <em>important</em> for lists and unless
there is very good reason to believe otherwise you can pretty much always
safely assume that list operations preserve order. In this case, the <code>+</code> sign
behaves much like it does for strings (which are really just lists of
characters anyway): it takes the content of a list and places it behind the
content of another.</p>
<p>If we have</p>
<div class="code"><pre class="code literal-block">list1 = [0, 1, 2, 3, 4]
list2 = [5, 6, 7, 8, 9]
</pre></div>

<p>Then</p>
<div class="code"><pre class="code literal-block">list1 + list2
</pre></div>

<p>Is the same as</p>
<div class="code"><pre class="code literal-block">[0, 1, 2, 3, 4] + [5, 6, 7, 8, 9]
</pre></div>

<p>Which evaluates to</p>
<div class="code"><pre class="code literal-block">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</pre></div>

<p>Much like</p>
<div class="code"><pre class="code literal-block">"abdcde" + "fghijk"
</pre></div>

<p>Produces</p>
<div class="code"><pre class="code literal-block">"abdcdefghijk"
</pre></div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2136.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-2134.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow中文网</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
