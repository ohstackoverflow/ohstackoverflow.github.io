<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This is a snapshot site for StackOverflow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StackOverflow Snapshot (old posts, page 268) | StackOverflow Snapshot</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="canonical" href="https://ohstackoverflow.netlify.app/index-268.html">
<link rel="prev" href="index-269.html" type="text/html">
<link rel="next" href="index-267.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ohstackoverflow.netlify.app/">

                <span id="blog-title">StackOverflow Snapshot</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/">Tags</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<div style="display:table;min-height:5rem;min-width:27rem;">
					<div class="input-group" style="display: table-cell;vertical-align: middle;">
						<input id="words" type="text" class="form-control" style="max-width:22rem;" onkeydown="if(event.keyCode==13){btn.click()}"><span class="input-group-btn" style="float:left">
							<button id="btn" class="btn btn-default" type="button" data-toggle="modal" data-target="#myModal">
								<span class="glyphicon glyphicon-search">
							</span></button>
						</span>
					</div>
<!-- /input-group -->
				</div>

				
                
                
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><!-- 模态框（Modal） --><div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×
				</button>
				<h4 class="modal-title" id="myModalLabel">
					查找结果
				</h4>
			</div>
			<div class="modal-body">
				<div id="search-count" style="min-height:4rem;">
				查找中，请稍后...
				</div>
				<div id="search-result">
				</div>

				
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">
					关闭
				</button>
			</div>
		</div>
<!-- /.modal-content -->
	</div>
<!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/is-there-a-built-in-function-to-print-all-the-current-properties-and-values-of-an-object/" class="u-url">Is there a built-in function to print all the current properties and values of an object?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/is-there-a-built-in-function-to-print-all-the-current-properties-and-values-of-an-object/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:32:56+08:00" itemprop="datePublished" title="2023-02-17 02:32">2023-02-17 02:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>So what I'm looking for here is something like PHP's print_r function.</p>
<p>This is so I can debug my scripts by seeing what's the state of the object in
question.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You are really mixing together two different things.</p>
<p>Use <code>dir()</code>, <code>vars()</code> or the <code>inspect</code> module to get what you are interested
in (I use <code>__builtins__</code> as an example; you can use any object instead).</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; l = dir(__builtins__)
&gt;&gt;&gt; d = __builtins__.__dict__
</pre></div>

<p>Print that dictionary however fancy you like:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; print l
['ArithmeticError', 'AssertionError', 'AttributeError',...
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pprint</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="p">[</span><span class="s1">'ArithmeticError'</span><span class="p">,</span>
 <span class="s1">'AssertionError'</span><span class="p">,</span>
 <span class="s1">'AttributeError'</span><span class="p">,</span>
 <span class="s1">'BaseException'</span><span class="p">,</span>
 <span class="s1">'DeprecationWarning'</span><span class="p">,</span>
<span class="o">...</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pprint</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="p">{</span> <span class="s1">'ArithmeticError'</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span> <span class="s1">'exceptions.ArithmeticError'</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s1">'AssertionError'</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span> <span class="s1">'exceptions.AssertionError'</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s1">'AttributeError'</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span> <span class="s1">'exceptions.AttributeError'</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">...</span>
  <span class="s1">'_'</span><span class="p">:</span> <span class="p">[</span> <span class="s1">'ArithmeticError'</span><span class="p">,</span>
         <span class="s1">'AssertionError'</span><span class="p">,</span>
         <span class="s1">'AttributeError'</span><span class="p">,</span>
         <span class="s1">'BaseException'</span><span class="p">,</span>
         <span class="s1">'DeprecationWarning'</span><span class="p">,</span>
<span class="o">...</span>
</pre></div>

<p>Pretty printing is also available in the interactive debugger as a command:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">Pdb</span><span class="p">)</span><span class="w"> </span><span class="n">pp</span><span class="w"> </span><span class="n">vars</span><span class="p">()</span>
<span class="p">{</span><span class="s1">'__builtins__'</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s1">'ArithmeticError'</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="s1">'exceptions.ArithmeticError'</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="s1">'AssertionError'</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="s1">'exceptions.AssertionError'</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="s1">'AttributeError'</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="s1">'exceptions.AttributeError'</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="s1">'BaseException'</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="s1">'exceptions.BaseException'</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="s1">'BufferError'</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="s1">'exceptions.BufferError'</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="o">...</span>
<span class="w">                  </span><span class="s1">'zip'</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">zip</span><span class="o">&gt;</span><span class="p">},</span>
<span class="w"> </span><span class="s1">'__file__'</span><span class="p">:</span><span class="w"> </span><span class="s1">'pass.py'</span><span class="p">,</span>
<span class="w"> </span><span class="s1">'__name__'</span><span class="p">:</span><span class="w"> </span><span class="s1">'__main__'</span><span class="p">}</span>
</pre></div>

<p><br></p>
<h3>Suggest</h3>
<p>You are really mixing together two different things.</p>
<p>Use <code>dir()</code>, <code>vars()</code> or the <code>inspect</code> module to get what you are interested
in (I use <code>__builtins__</code> as an example; you can use any object instead).</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; l = dir(__builtins__)
&gt;&gt;&gt; d = __builtins__.__dict__
</pre></div>

<p>Print that dictionary however fancy you like:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; print l
['ArithmeticError', 'AssertionError', 'AttributeError',...
</pre></div>

<p>or</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pprint</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="p">[</span><span class="s1">'ArithmeticError'</span><span class="p">,</span>
 <span class="s1">'AssertionError'</span><span class="p">,</span>
 <span class="s1">'AttributeError'</span><span class="p">,</span>
 <span class="s1">'BaseException'</span><span class="p">,</span>
 <span class="s1">'DeprecationWarning'</span><span class="p">,</span>
<span class="o">...</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">pprint</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="p">{</span> <span class="s1">'ArithmeticError'</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span> <span class="s1">'exceptions.ArithmeticError'</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s1">'AssertionError'</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span> <span class="s1">'exceptions.AssertionError'</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s1">'AttributeError'</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span> <span class="s1">'exceptions.AttributeError'</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">...</span>
  <span class="s1">'_'</span><span class="p">:</span> <span class="p">[</span> <span class="s1">'ArithmeticError'</span><span class="p">,</span>
         <span class="s1">'AssertionError'</span><span class="p">,</span>
         <span class="s1">'AttributeError'</span><span class="p">,</span>
         <span class="s1">'BaseException'</span><span class="p">,</span>
         <span class="s1">'DeprecationWarning'</span><span class="p">,</span>
<span class="o">...</span>
</pre></div>

<p>Pretty printing is also available in the interactive debugger as a command:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="n">Pdb</span><span class="p">)</span><span class="w"> </span><span class="n">pp</span><span class="w"> </span><span class="n">vars</span><span class="p">()</span>
<span class="p">{</span><span class="s1">'__builtins__'</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s1">'ArithmeticError'</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="s1">'exceptions.ArithmeticError'</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="s1">'AssertionError'</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="s1">'exceptions.AssertionError'</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="s1">'AttributeError'</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="s1">'exceptions.AttributeError'</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="s1">'BaseException'</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="s1">'exceptions.BaseException'</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="s1">'BufferError'</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">type</span><span class="w"> </span><span class="s1">'exceptions.BufferError'</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="o">...</span>
<span class="w">                  </span><span class="s1">'zip'</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">zip</span><span class="o">&gt;</span><span class="p">},</span>
<span class="w"> </span><span class="s1">'__file__'</span><span class="p">:</span><span class="w"> </span><span class="s1">'pass.py'</span><span class="p">,</span>
<span class="w"> </span><span class="s1">'__name__'</span><span class="p">:</span><span class="w"> </span><span class="s1">'__main__'</span><span class="p">}</span>
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/change-column-type-in-pandas/" class="u-url">Change column type in pandas</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/change-column-type-in-pandas/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:32:28+08:00" itemprop="datePublished" title="2023-02-17 02:32">2023-02-17 02:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>I created a DataFrame from a list of lists:</p>
<div class="code"><pre class="code literal-block">table = [
    ['a',  '1.2',  '4.2' ],
    ['b',  '70',   '0.03'],
    ['x',  '5',    '0'   ],
]

df = pd.DataFrame(table)
</pre></div>

<p>How do I convert the columns to specific types? In this case, I want to
convert columns 2 and 3 into floats.</p>
<p>Is there a way to specify the types while converting to DataFrame? Or is it
better to create the DataFrame first and then loop through the columns to
change the type for each column? Ideally I would like to do this in a dynamic
way because there can be hundreds of columns, and I don't want to specify
exactly which columns are of which type. All I can guarantee is that each
column contains values of the same type.</p>
<p><br><br></p>
<h2>Answer</h2>
<p>You have four main options for converting types in pandas:</p>
<ol>
<li>
<p><code>to_numeric()</code> - provides functionality to safely convert non-numeric types (e.g. strings) to a suitable numeric type. (See also <code>to_datetime()</code> and <code>to_timedelta()</code>.)</p>
</li>
<li>
<p><code>astype()</code> - convert (almost) any type to (almost) any other type (even if it's not necessarily sensible to do so). Also allows you to convert to categorial types (very useful).</p>
</li>
<li>
<p><code>infer_objects()</code> - a utility method to convert object columns holding Python objects to a pandas type if possible.</p>
</li>
<li>
<p><code>convert_dtypes()</code> - convert DataFrame columns to the "best possible" dtype that supports <code>pd.NA</code> (pandas' object to indicate a missing value).</p>
</li>
</ol>
<p>Read on for more detailed explanations and usage of each of these methods.</p>
<hr>
<h2>1. <code>to_numeric()</code>
</h2>
<p>The best way to convert one or more columns of a DataFrame to numeric values
is to use <code>pandas.to_numeric()</code>.</p>
<p>This function will try to change non-numeric objects (such as strings) into
integers or floating-point numbers as appropriate.</p>
<h3>Basic usage</h3>
<p>The input to <code>to_numeric()</code> is a Series or a single column of a DataFrame.</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; s = pd.Series(["8", 6, "7.5", 3, "0.9"]) # mixed string and numeric values
&gt;&gt;&gt; s
0      8
1      6
2    7.5
3      3
4    0.9
dtype: object

&gt;&gt;&gt; pd.to_numeric(s) # convert everything to float values
0    8.0
1    6.0
2    7.5
3    3.0
4    0.9
dtype: float64
</pre></div>

<p>As you can see, a new Series is returned. Remember to assign this output to a
variable or column name to continue using it:</p>
<div class="code"><pre class="code literal-block"># convert Series
my_series = pd.to_numeric(my_series)

# convert column "a" of a DataFrame
df["a"] = pd.to_numeric(df["a"])
</pre></div>

<p>You can also use it to convert multiple columns of a DataFrame via the
<code>apply()</code> method:</p>
<div class="code"><pre class="code literal-block"># convert all columns of DataFrame
df = df.apply(pd.to_numeric) # convert all columns of DataFrame

# convert just columns "a" and "b"
df[["a", "b"]] = df[["a", "b"]].apply(pd.to_numeric)
</pre></div>

<p>As long as your values can all be converted, that's probably all you need.</p>
<h3>Error handling</h3>
<p>But what if some values can't be converted to a numeric type?</p>
<p><code>to_numeric()</code> also takes an <code>errors</code> keyword argument that allows you to
force non-numeric values to be <code>NaN</code>, or simply ignore columns containing
these values.</p>
<p>Here's an example using a Series of strings <code>s</code> which has the object dtype:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; s = pd.Series(['1', '2', '4.7', 'pandas', '10'])
&gt;&gt;&gt; s
0         1
1         2
2       4.7
3    pandas
4        10
dtype: object
</pre></div>

<p>The default behaviour is to raise if it can't convert a value. In this case,
it can't cope with the string 'pandas':</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; pd.to_numeric(s) # or pd.to_numeric(s, errors='raise')
ValueError: Unable to parse string
</pre></div>

<p>Rather than fail, we might want 'pandas' to be considered a missing/bad
numeric value. We can coerce invalid values to <code>NaN</code> as follows using the
<code>errors</code> keyword argument:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; pd.to_numeric(s, errors='coerce')
0     1.0
1     2.0
2     4.7
3     NaN
4    10.0
dtype: float64
</pre></div>

<p>The third option for <code>errors</code> is just to ignore the operation if an invalid
value is encountered:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; pd.to_numeric(s, errors='ignore')
# the original Series is returned untouched
</pre></div>

<p>This last option is particularly useful for converting your entire DataFrame,
but don't know which of our columns can be converted reliably to a numeric
type. In that case, just write:</p>
<div class="code"><pre class="code literal-block">df.apply(pd.to_numeric, errors='ignore')
</pre></div>

<p>The function will be applied to each column of the DataFrame. Columns that can
be converted to a numeric type will be converted, while columns that cannot
(e.g. they contain non-digit strings or dates) will be left alone.</p>
<h3>Downcasting</h3>
<p>By default, conversion with <code>to_numeric()</code> will give you either an <code>int64</code> or
<code>float64</code> dtype (or whatever integer width is native to your platform).</p>
<p>That's usually what you want, but what if you wanted to save some memory and
use a more compact dtype, like <code>float32</code>, or <code>int8</code>?</p>
<p><code>to_numeric()</code> gives you the option to downcast to either <code>'integer'</code>,
<code>'signed'</code>, <code>'unsigned'</code>, <code>'float'</code>. Here's an example for a simple series <code>s</code>
of integer type:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; s = pd.Series([1, 2, -7])
&gt;&gt;&gt; s
0    1
1    2
2   -7
dtype: int64
</pre></div>

<p>Downcasting to <code>'integer'</code> uses the smallest possible integer that can hold
the values:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; pd.to_numeric(s, downcast='integer')
0    1
1    2
2   -7
dtype: int8
</pre></div>

<p>Downcasting to <code>'float'</code> similarly picks a smaller than normal floating type:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; pd.to_numeric(s, downcast='float')
0    1.0
1    2.0
2   -7.0
dtype: float32
</pre></div>

<hr>
<h2>2. <code>astype()</code>
</h2>
<p>The <code>astype()</code> method enables you to be explicit about the dtype you want your
DataFrame or Series to have. It's very versatile in that you can try and go
from one type to any other.</p>
<h3>Basic usage</h3>
<p>Just pick a type: you can use a NumPy dtype (e.g. <code>np.int16</code>), some Python
types (e.g. bool), or pandas-specific types (like the categorical dtype).</p>
<p>Call the method on the object you want to convert and <code>astype()</code> will try and
convert it for you:</p>
<div class="code"><pre class="code literal-block">#<span class="w"> </span><span class="nv">convert</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">DataFrame</span><span class="w"> </span><span class="nv">columns</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">int64</span><span class="w"> </span><span class="nv">dtype</span>
<span class="nv">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">df</span>.<span class="nv">astype</span><span class="ss">(</span><span class="nv">int</span><span class="ss">)</span>

#<span class="w"> </span><span class="nv">convert</span><span class="w"> </span><span class="nv">column</span><span class="w"> </span><span class="s2">"a"</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">int64</span><span class="w"> </span><span class="nv">dtype</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="s2">"b"</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">complex</span><span class="w"> </span><span class="nv">type</span>
<span class="nv">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">df</span>.<span class="nv">astype</span><span class="ss">(</span>{<span class="s2">"a"</span>:<span class="w"> </span><span class="nv">int</span>,<span class="w"> </span><span class="s2">"b"</span>:<span class="w"> </span><span class="nv">complex</span>}<span class="ss">)</span>

#<span class="w"> </span><span class="nv">convert</span><span class="w"> </span><span class="nv">Series</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">float16</span><span class="w"> </span><span class="nv">type</span>
<span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">s</span>.<span class="nv">astype</span><span class="ss">(</span><span class="nv">np</span>.<span class="nv">float16</span><span class="ss">)</span>

#<span class="w"> </span><span class="nv">convert</span><span class="w"> </span><span class="nv">Series</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">Python</span><span class="w"> </span><span class="nv">strings</span>
<span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">s</span>.<span class="nv">astype</span><span class="ss">(</span><span class="nv">str</span><span class="ss">)</span>

#<span class="w"> </span><span class="nv">convert</span><span class="w"> </span><span class="nv">Series</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">categorical</span><span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">see</span><span class="w"> </span><span class="nv">docs</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nv">more</span><span class="w"> </span><span class="nv">details</span>
<span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">s</span>.<span class="nv">astype</span><span class="ss">(</span><span class="s1">'category'</span><span class="ss">)</span>
</pre></div>

<p>Notice I said "try" - if <code>astype()</code> does not know how to convert a value in
the Series or DataFrame, it will raise an error. For example, if you have a
<code>NaN</code> or <code>inf</code> value you'll get an error trying to convert it to an integer.</p>
<p>As of pandas 0.20.0, this error can be suppressed by passing
<code>errors='ignore'</code>. Your original object will be returned untouched.</p>
<h3>Be careful</h3>
<p><code>astype()</code> is powerful, but it will sometimes convert values "incorrectly".
For example:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; s = pd.Series([1, 2, -7])
&gt;&gt;&gt; s
0    1
1    2
2   -7
dtype: int64
</pre></div>

<p>These are small integers, so how about converting to an unsigned 8-bit type to
save memory?</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; s.astype(np.uint8)
0      1
1      2
2    249
dtype: uint8
</pre></div>

<p>The conversion worked, but the -7 was wrapped round to become 249 (i.e. 28 -
7)!</p>
<p>Trying to downcast using <code>pd.to_numeric(s, downcast='unsigned')</code> instead could
help prevent this error.</p>
<hr>
<h2>3. <code>infer_objects()</code>
</h2>
<p>Version 0.21.0 of pandas introduced the method <code>infer_objects()</code> for
converting columns of a DataFrame that have an object datatype to a more
specific type (soft conversions).</p>
<p>For example, here's a DataFrame with two columns of object type. One holds
actual integers and the other holds strings representing integers:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; df = pd.DataFrame({'a': [7, 1, 5], 'b': ['3','2','1']}, dtype='object')
&gt;&gt;&gt; df.dtypes
a    object
b    object
dtype: object
</pre></div>

<p>Using <code>infer_objects()</code>, you can change the type of column 'a' to int64:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; df = df.infer_objects()
&gt;&gt;&gt; df.dtypes
a     int64
b    object
dtype: object
</pre></div>

<p>Column 'b' has been left alone since its values were strings, not integers. If
you wanted to force both columns to an integer type, you could use
<code>df.astype(int)</code> instead.</p>
<hr>
<h2>4. <code>convert_dtypes()</code>
</h2>
<p>Version 1.0 and above includes a method <code>convert_dtypes()</code> to convert Series
and DataFrame columns to the best possible dtype that supports the <code>pd.NA</code>
missing value.</p>
<p>Here "best possible" means the type most suited to hold the values. For
example, this a pandas integer type, if all of the values are integers (or
missing values): an object column of Python integer objects are converted to
<code>Int64</code>, a column of NumPy <code>int32</code> values, will become the pandas dtype
<code>Int32</code>.</p>
<p>With our <code>object</code> DataFrame <code>df</code>, we get the following result:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; df.convert_dtypes().dtypes                                             
a     Int64
b    string
dtype: object
</pre></div>

<p>Since column 'a' held integer values, it was converted to the <code>Int64</code> type
(which is capable of holding missing values, unlike <code>int64</code>).</p>
<p>Column 'b' contained string objects, so was changed to pandas' <code>string</code> dtype.</p>
<p>By default, this method will infer the type from object values in each column.
We can change this by passing <code>infer_objects=False</code>:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; df.convert_dtypes(infer_objects=False).dtypes                          
a    object
b    string
dtype: object
</pre></div>

<p>Now column 'a' remained an object column: pandas knows it can be described as
an 'integer' column (internally it ran <code>infer_dtype</code>) but didn't infer exactly
what dtype of integer it should have so did not convert it. Column 'b' was
again converted to 'string' dtype as it was recognised as holding 'string'
values.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Use this:</p>
<div class="code"><pre class="code literal-block">a = [['a', '1.2', '4.2'], ['b', '70', '0.03'], ['x', '5', '0']]
df = pd.DataFrame(a, columns=['one', 'two', 'three'])
df

Out[16]:
  one  two three
0   a  1.2   4.2
1   b   70  0.03
2   x    5     0

df.dtypes

Out[17]:
one      object
two      object
three    object

df[['two', 'three']] = df[['two', 'three']].astype(float)

df.dtypes

Out[19]:
one       object
two      float64
three    float64
</pre></div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/what-is-the-use-of-assert-in-python/" class="u-url">What is the use of "assert" in Python?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/arya/">Arya</a>
            </span></p>
            <p class="dateline">
            <a href="posts/what-is-the-use-of-assert-in-python/" rel="bookmark">
            <time class="published dt-published" datetime="2023-02-17T02:32:00+08:00" itemprop="datePublished" title="2023-02-17 02:32">2023-02-17 02:32</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <p>What does <code>assert</code> mean? How is it used?</p>
<p><br><br></p>
<h2>Answer</h2>
<p>The <code>assert</code> statement exists in almost every programming language. It has two
main uses:</p>
<ol>
<li>
<p>It helps detect problems early in your program, where the cause is clear, rather than later when some other operation fails. A type error in Python, for example, can go through several layers of code before actually raising an <code>Exception</code> if not caught early on.</p>
</li>
<li>
<p>It works as documentation for other developers reading the code, who see the <code>assert</code> and can confidently say that its condition holds from now on.</p>
</li>
</ol>
<p>When you do...</p>
<div class="code"><pre class="code literal-block">assert condition
</pre></div>

<p>... you're telling the program to test that condition, and immediately trigger
an error if the condition is false.</p>
<p>In Python, it's roughly equivalent to this:</p>
<div class="code"><pre class="code literal-block"><span class="k">if</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">condition</span>:
<span class="w">    </span><span class="nv">raise</span><span class="w"> </span><span class="nv">AssertionError</span><span class="ss">()</span>
</pre></div>

<p>Try it in the Python shell:</p>
<div class="code"><pre class="code literal-block">&gt;&gt;&gt; assert True # nothing happens
&gt;&gt;&gt; assert False
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
AssertionError
</pre></div>

<p>Assertions can include an optional message, and you can disable them when
running the interpreter.</p>
<p>To print a message if the assertion fails:</p>
<div class="code"><pre class="code literal-block">assert False, "Oh no! This assertion failed!"
</pre></div>

<p>Do <strong>not</strong> use parenthesis to call <code>assert</code> like a function. It is a
statement. If you do <code>assert(condition, message)</code> you'll be running the
<code>assert</code> with a <code>(condition, message)</code> tuple as first parameter.</p>
<p>As for disabling them, when running <code>python</code> in optimized mode, where
<code>__debug__</code> is <code>False</code>, assert statements will be ignored. Just pass the <code>-O</code>
flag:</p>
<div class="code"><pre class="code literal-block">python -O script.py
</pre></div>

<p>See here for the relevant documentation.</p>
<p><br></p>
<h3>Suggest</h3>
<p>Watch out for the parentheses. As has been pointed out in other answers, in
Python 3, <code>assert</code> is still a statement, so by analogy with <code>print(..)</code>, one
may extrapolate the same to <code>assert(..)</code> or <code>raise(..)</code> but you shouldn't.</p>
<p>This is wrong:</p>
<div class="code"><pre class="code literal-block">assert(2 + 2 == 5, "Houston we've got a problem")
</pre></div>

<p>This is correct:</p>
<div class="code"><pre class="code literal-block">assert 2 + 2 == 5, "Houston we've got a problem"
</pre></div>

<p>The reason the first one will not work is that <code>bool( (False, "Houston we've
got a problem") )</code> evaluates to <code>True</code>.</p>
<p>In the statement <code>assert(False)</code>, these are just redundant parentheses around
<code>False</code>, which evaluate to their contents. But with <code>assert(False,)</code> the
parentheses are now a tuple, and a non-empty tuple evaluates to <code>True</code> in a
boolean context.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-269.html" rel="prev">Newer posts</a>
            </li>
            <li class="next">
                <a href="index-267.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2023         Go to StackOverflow Chinese Site  <a href="http://stackoverflow.ink">StackOverflow-ZH</a>  
            
        </footer>
</div>
</div>


            <script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script src="assets/js/search.js"></script>
</body>
</html>
